----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  Z:Eigene Dateien\GitHub\CILS4EU_mig\03 Analysis\03_log\log_01_to_panel_29022024_Maria.log
  log type:  text
 opened on:  29 Feb 2024, 10:20:47

. 
. 
. ************************************************************************
. **# Bookmark  1. Browse the datasets ***********************************
. ************************************************************************
. 
. * Dataset relationship information 
. use "$DATA/w6_ylhcp_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. describe

Contains data from C:\Users\hornunma\Desktop\DATA\CILS4EU_mig/w6_ylhcp_ge_v6.0.0_rv.dta
 Observations:         5,370                  30 Jul 2021
    Variables:            59                  30 Jul 2021 15:18
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
youthid         long    %32.0g     youthid    unique youth id
youthid_ge      byte    %32.0g     youthid_ge
                                              national youth id (germany)
country         byte    %32.0g     country    country of survey
y6_status       byte    %32.0g     y6_status
                                              mode of youth lhc partner interview
y6_version      byte    %32.0g     y6_version
                                              version of youth lhc partner interview
y6_sample       byte    %32.0g     y6_sample
                                              sample
y6_intdat_ylhcp byte    %4.0f      y6_intdat_ylhcp
                                              date of survey
y6_intdat_ylh~V int     %tm        y6_intdat_ylhcpRV
                                              date of survey (reduced version)
y6_vers_ylhcp   str21   %21s                  data release version of youth lhc partner interview
y6_rpindex      byte    %32.0g     y6_rpindex
                                              unique partner index
y6_rpsex        byte    %32.0g     y6_rpsex   rp1: sex of partner
y6_rpdobm       byte    %32.0g     y6_rpdobm
                                              rp2: when was partner born: month
y6_rpdoby       byte    %32.0g     y6_rpdoby
                                              rp2: when was partner born: year
y6_rpdobyRV     int     %32.0g     y6_rpdobyRV
                                              rp2: when was partner born: year (reduced version)
y6_rp1startm    byte    %32.0g     y6_rp1startm
                                              rp3: start of relationship (month)
y6_rp1starty    byte    %32.0g     y6_rp1starty
                                              rp3: start of relationship (year)
y6_rp1startyRV  int     %32.0g     y6_rp1startyRV
                                              rp3: start of relationship (year) (reduced version)
y6_rp1checkbdat byte    %38.0g     y6_rp1checkbdat
                                              rp4: january 2011: did i record that correctly
y6_rp1endm      byte    %32.0g     y6_rp1endm
                                              rp5: end of relationship (month)
y6_rp1endy      int     %32.0g     y6_rp1endy
                                              rp5: end of relationship (year)
y6_rp1ongoing   byte    %32.0g     y6_rp1ongoing
                                              rp5: relationship is still on-going
y6_rp2relship   byte    %32.0g     y6_rp2relship
                                              rp6: together with partner at other point in time, first other time
y6_rp2startm    byte    %32.0g     y6_rp2startm
                                              rp7: start of relationship (month), first other time
y6_rp2starty    int     %32.0g     y6_rp2starty
                                              rp7: start of relationship (year), first other time
y6_rp2endm      byte    %32.0g     y6_rp2endm
                                              rp8: end of relationship (month), first other time
y6_rp2endy      int     %32.0g     y6_rp2endy
                                              rp8: end of relationship (year), first other time
y6_rp2ongoing   byte    %32.0g     y6_rp2ongoing
                                              rp8: relationship is still on-going, first other time
y6_rp3relship   byte    %32.0g     y6_rp3relship
                                              rp9: together with partner at other point in time, second other time
y6_rp3startm    byte    %32.0g     y6_rp3startm
                                              rp10: start of relationship (month), second other time
y6_rp3starty    int     %32.0g     y6_rp3starty
                                              rp10: start of relationship (year), second other time
y6_rp3endm      byte    %32.0g     y6_rp3endm
                                              rp11: end of relationship (month), second other time
y6_rp3endy      int     %32.0g     y6_rp3endy
                                              rp11: end of relationship (year), second other time
y6_rp3ongoing   byte    %32.0g     y6_rp3ongoing
                                              rp11: relationship is still on-going, second other time
y6_rp4relship   byte    %32.0g     y6_rp4relship
                                              rp12: together with partner at other point in time, third other time
y6_rpeduc8      byte    %35.0g     y6_rpeduc8
                                              rp13: was partner in school at beginning of relationship
y6_rpeduc9      byte    %62.0g     y6_rpeduc9
                                              rp14: which educational degree did partner have at beginning of relationship
y6_rpeduc9op    str36   %36s                  rp14: which educational degree did partner have at beginning, other degree
y6_rpeduc9_add  str36   %36s                  rp14: which educational degree did partner have at beginning, additional inform.
y6_rpsit2a      byte    %129.0g    y6_rpsit2a
                                              rp15: what type of education did he/she do at beginning of relationship
y6_rpsit2aop    str36   %36s                  rp15: what type of education did he/she do at beginning, other education
y6_rpsit2aopRV  str72   %72s                  rp15: what type of educ. did he/she do at beg., other educ. (reduced version)
y6_rpsit2a_add  str36   %36s                  rp15: what type of education did he/she do at beginning, additional information
y6_rpback2      byte    %52.0g     y6_rpback2
                                              rp16: what is his/her background
y6_rpback2RV    byte    %32.0g     y6_rpback2RV
                                              rp16: what is his/her background (reduced version)
y6_rpback2_add  str36   %36s                  rp16: what is his/her background, additional information
y6_rpcohab      byte    %32.0g     y6_rpcohab
                                              rp17: lived together with partner
y6_rpcohabsta~m byte    %32.0g     y6_rpcohabstartm
                                              rp18: start of cohabitation with partner: month
y6_rpcohabsta~y byte    %32.0g     y6_rpcohabstarty
                                              rp18: start of cohabitation with partner: year
y6_rpcohabsta~V int     %32.0g     y6_rpcohabstartyRV
                                              rp18: start of cohabitation with partner: year (reduced version)
y6_rpcohabendm  byte    %32.0g     y6_rpcohabendm
                                              rp19: end of cohabitation with partner: month
y6_rpcohabendy  int     %32.0g     y6_rpcohabendy
                                              rp19: end of cohabitation with partner: year
y6_rpcohab_on~g byte    %32.0g     y6_rpcohab_ongoing
                                              rp19: still lives together with partner
y6_rpmarst4     byte    %32.0g     y6_rpmarst4
                                              rp20: married to partner
y6_rpmarstartm  byte    %32.0g     y6_rpmarstartm
                                              rp21: start of marriage with partner: month
y6_rpmarstarty  byte    %32.0g     y6_rpmarstarty
                                              rp21: start of marriage with partner: year
y6_rpmarstart~V int     %32.0g     y6_rpmarstartyRV
                                              rp21: start of marriage with partner: year (reduced version)
y6_rpmarendm    byte    %32.0g     y6_rpmarendm
                                              rp22: end of marriage with partner: month
y6_rpmarendy    int     %32.0g     y6_rpmarendy
                                              rp22: end of marriage with partner: year
y6_rpmar_ongo~g byte    %32.0g     y6_rpmar_ongoing
                                              rp22: still married to partner
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: youthid

. 
. * Dataset  with year of birth
. use "$DATA/w6_ym_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. 
. 
. * Dataset  education and profession 
. use "$DATA/w6_ylhcs_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. describe

Contains data from C:\Users\hornunma\Desktop\DATA\CILS4EU_mig/w6_ylhcs_ge_v6.0.0_rv.dta
 Observations:        25,008                  30 Jul 2021
    Variables:           280                  30 Jul 2021 15:19
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
youthid         long    %32.0f     youthid    unique youth id
youthid_ge      byte    %32.0g     youthid_ge
                                              national youth id (germany)
country         byte    %32.0g     country    country of survey
y6_status       byte    %32.0g     y6_status
                                              mode of youth structural lhc interview
y6_version      byte    %32.0g     y6_version
                                              version of youth structural lhc interview
y6_sample       byte    %32.0g     y6_sample
                                              sample
y6_intdat_ylhcs byte    %4.0f      y6_intdat_ylhcs
                                              date of survey
y6_intdat_ylh~V int     %tm        y6_intdat_ylhcsRV
                                              date of survey (reduced version)
y6_vers_ylhcs   str21   %21s                  data release version of youth structural lhc interview
y6_ylhcs_mode   byte    %32.0g     y6_ylhcs_mode
                                              mode of spell entry
y6_ylhcs_index  byte    %32.0g     y6_ylhcs_index
                                              unique personal spell index
y6_ylhcs_spt1   byte    %32.0g     y6_ylhcs_spt1
                                              spell type (first level)
y6_ylhcs_spt2   byte    %43.0g     y6_ylhcs_spt2
                                              spell type (second level)
y6_ylhcs_begd~m byte    %32.0g     y6_ylhcs_begdatm
                                              start of spell (month)
y6_ylhcs_begd~y int     %32.0g     y6_ylhcs_begdaty
                                              start of spell (year)
y6_ylhcs_endd~m byte    %32.0g     y6_ylhcs_enddatm
                                              end of spell (month)
y6_ylhcs_endd~y int     %32.0g     y6_ylhcs_enddaty
                                              end of spell (year)
y6_ylhcs_ongo~g byte    %32.0g     y6_ylhcs_ongoing
                                              spell is still ongoing
y6_ylhcs_corr~n byte    %74.0g     y6_ylhcs_correction
                                              correction in check module
y6_ylhcs_tp     byte    %32.0g     y6_ylhcs_tp
                                              technical problem in longitudinal section
y6_s1_sit2a     byte    %129.0g    y6_s1_sit2a
                                              1s1: which school-type did or do you attend
y6_s1_sit2aop   str36   %36s                  1s1: which school-type did or do you attend, other general education school
y6_s1_sit2aopRV str72   %72s                  1s1: which school-type, other general education school (reduced version)
y6_s1_sit2a_add str36   %36s                  1s1: which school-type did or do you attend, additional information
y6_s1_checkbdat byte    %38.0g     y6_s1_checkbdat
                                              2s1: january 2011: did i record that correctly
y6_s1_grad3     byte    %32.0g     y6_s1_grad3
                                              3s1: did you complete this general education school with an educational degree
y6_s1_g_fed_ge  byte    %32.0g     y6_s1_g_fed_ge
                                              4s1: in which federal state did you get this educational degree
y6_s1_g_educ5   byte    %52.0g     y6_s1_g_educ5
                                              5s1: in which country did you get this educational degree
y6_s1_g_educ5RV byte    %32.0g     y6_s1_g_educ5RV
                                              5s1: in which country did you get this educational degree (reduced version)
y6_s1_g_educ2   byte    %62.0g     y6_s1_g_educ2
                                              6s1: which educational degree was this
y6_s1_g_educ2op str36   %36s                  6s1: which educational degree was this, other educational degree
y6_s1_g_educ2~d str36   %36s                  6s1: which educational degree was this, additional information
y6_s1_g_ggrad~G byte    %32.0g     y6_s1_g_ggradeoG
                                              7s1: grades in school leaving certificate: overall (generated)
y6_s1_g_ggradeo double  %32.0g     y6_s1_g_ggradeo
                                              7s1: grades in school leaving certificate: overall, grade
y6_s1_g_gcred~o float   %32.0g     y6_s1_g_gcredito
                                              7s1: grades in school leaving certificate: overall, credit points
y6_s1_proc1     byte    %32.0g     y6_s1_proc1
                                              8s1: another general education school since january 2011
y6_s1_proc2     byte    %32.0g     y6_s1_proc2
                                              9s1: open calendar
y6_s1_proc3     byte    %32.0g     y6_s1_proc3
                                              10s1: is any information missing
y6_s2_sit2b     byte    %72.0g     y6_s2_sit2b
                                              1s2: which school-type did or do you attend
y6_s2_sit2bop1  str36   %36s                  1s2: which school-type did or do you attend, other evening school
y6_s2_sit2b~1RV str67   %67s                  1s2: which school-type, other evening school (reduced version)
y6_s2_sit2bop2  str36   %36s                  1s2: which school-type did or do you attend, other general education school
y6_s2_sit2b~2RV str65   %65s                  1s2: which school-type, other general education school (reduced version)
y6_s2_grad3     byte    %32.0g     y6_s2_grad3
                                              2s2: did you complete this school with an educational degree
y6_s2_g_fed_ge  byte    %32.0g     y6_s2_g_fed_ge
                                              3s2: in which federal state did you get this educational degree
y6_s2_g_educ5   byte    %52.0g     y6_s2_g_educ5
                                              4s2: in which country did you get this educational degree
y6_s2_g_educ5RV byte    %32.0g     y6_s2_g_educ5RV
                                              4s2: in which country did you get this educational degree (reduced version)
y6_s2_g_educ2   byte    %62.0g     y6_s2_g_educ2
                                              5s2: which educational degree was this
y6_s2_g_educ2op str36   %36s                  5s2: which educational degree was this, other educational degree
y6_s2_g_educ2~d str36   %36s                  5s2: which educational degree was this, additional information
y6_s2_g_ggrad~G byte    %32.0g     y6_s2_g_ggradeoG
                                              6s2: grades in school leaving certificate: overall, grade (generated)
y6_s2_g_ggradeo double  %32.0g     y6_s2_g_ggradeo
                                              6s2: grades in school leaving certificate: overall, grade
y6_s2_g_gcred~o byte    %32.0g     y6_s2_g_gcredito
                                              6s2: grades in school leaving certificate: overall, credit points
y6_s2_proc1     byte    %32.0g     y6_s2_proc1
                                              7s2: another second chance education since january 2011
y6_s2_proc2     byte    %32.0g     y6_s2_proc2
                                              8s2: open calendar
y6_s2_proc3     byte    %32.0g     y6_s2_proc3
                                              9s2: is any information missing
y6_s3_isco08    byte    %32.0g     y6_s3_isco08
                                              1s3: in which profession did or do you do your apprenticeship
y6_s3_isco08RV  int     %32.0g     y6_s3_isco08RV
                                              1s3: in which profession did or do you do your apprenticeship (reduced version)
y6_s3_iseiG     float   %32.0g     y6_s3_iseiG
                                              1s3: in which profession did or do you do your apprenticeship, isei (generated)
y6_s3_siopsG    float   %32.0g     y6_s3_siopsG
                                              1s3: in which profession did or do you do your apprenticeship, siops (generated)
y6_s3_grad3     byte    %32.0g     y6_s3_grad3
                                              2s3: did you complete this vocational training
y6_s3_g_isco08  byte    %32.0g     y6_s3_g_isco08
                                              3s3: what is the exact title of your vocational qualification
y6_s3_g_isco0~V int     %32.0g     y6_s3_g_isco08RV
                                              3s3: what is the exact title of your vocational qualification (reduced version)
y6_s3_g_iseiG   float   %32.0g     y6_s3_g_iseiG
                                              3s3: what is the exact title of your vocational qualification, isei (generated)
y6_s3_g_siopsG  float   %32.0g     y6_s3_g_siopsG
                                              3s3: what is the exact title of your vocational qualification, siops (generated)
y6_s3_g_ggrad~G byte    %32.0g     y6_s3_g_ggradeoG
                                              4s3: overall grade you got in vocational qualification certificate (generated)
y6_s3_g_ggradeo double  %32.0g     y6_s3_g_ggradeo
                                              4s3: overall grade you got in vocational qualification certificate, grade
y6_s3_g_gcred~o byte    %32.0g     y6_s3_g_gcredito
                                              4s3: overall grade you got in vocational qualification certificate, credit point
y6_s3_g_educ1   byte    %32.0g     y6_s3_g_educ1
                                              5s3: receive an additional educational degree with your vocational qualification
y6_s3_gs_fed_ge byte    %32.0g     y6_s3_gs_fed_ge
                                              6s3: in which federal state did you receive this degree
y6_s3_gs_educ5  byte    %52.0g     y6_s3_gs_educ5
                                              7s3: in which country did you receive this degree
y6_s3_gs_educ~V byte    %32.0g     y6_s3_gs_educ5RV
                                              7s3: in which country did you receive this degree (reduced version)
y6_s3_gs_educ2  byte    %62.0g     y6_s3_gs_educ2
                                              8s3: which educational degree was this
y6_s3_gs_educ~p str36   %36s                  8s3: which educational degree was this, other educational degree
y6_s3_gs_educ~d str36   %36s                  8s3: which educational degree was this, additional information
y6_s3_gs_ggra~G byte    %32.0g     y6_s3_gs_ggradeoG
                                              9s3: grades in school leaving certificate: overall (generated)
y6_s3_gs_ggra~o double  %32.0g     y6_s3_gs_ggradeo
                                              9s3: grades in school leaving certificate: overall, grade
y6_s3_gs_gcre~o byte    %32.0g     y6_s3_gs_gcredito
                                              9s3: grades in school leaving certificate: overall, credit points
y6_s3_proc1     byte    %32.0g     y6_s3_proc1
                                              10s3: another apprenticeship since january 2011
y6_s3_proc2     byte    %32.0g     y6_s3_proc2
                                              11s3: open calendar
y6_s3_proc3     byte    %32.0g     y6_s3_proc3
                                              12s3: is any information missing
y6_s4_isco08    byte    %32.0g     y6_s4_isco08
                                              1s4: in which profession did or do you do your apprenticeship
y6_s4_isco08RV  int     %32.0g     y6_s4_isco08RV
                                              1s4: in which profession did or do you do your apprenticeship (reduced version)
y6_s4_iseiG     float   %32.0g     y6_s4_iseiG
                                              1s4: in which profession did or do you do your apprenticeship, isei (generated)
y6_s4_siopsG    float   %32.0g     y6_s4_siopsG
                                              1s4: in which profession did or do you do your apprenticeship, siops (generated)
y6_s4_grad3     byte    %32.0g     y6_s4_grad3
                                              2s4: did you complete this vocational training
y6_s4_g_isco08  byte    %32.0g     y6_s4_g_isco08
                                              3s4: what is the exact title of your vocational qualification
y6_s4_g_isco0~V int     %32.0g     y6_s4_g_isco08RV
                                              3s4: what is the exact title of your vocational qualification (reduced version)
y6_s4_g_iseiG   float   %32.0g     y6_s4_g_iseiG
                                              3s4: what is the exact title of your vocational qualification, isei (generated)
y6_s4_g_siopsG  float   %32.0g     y6_s4_g_siopsG
                                              3s4: what is the exact title of your vocational qualification, siops (generated)
y6_s4_g_ggrad~G byte    %32.0g     y6_s4_g_ggradeoG
                                              4s4: overall grade you got in vocational qualification certificate (generated)
y6_s4_g_ggradeo double  %32.0g     y6_s4_g_ggradeo
                                              4s4: overall grade you got in vocational qualification certificate, grade
y6_s4_g_gcred~o byte    %32.0g     y6_s4_g_gcredito
                                              4s4: overall grade you got in vocational qualification certificate, credit point
y6_s4_g_educ1   byte    %32.0g     y6_s4_g_educ1
                                              5s4: receive an additional educational degree with your vocational qualification
y6_s4_gs_fed_ge byte    %32.0g     y6_s4_gs_fed_ge
                                              6s4: in which federal state did you receive this degree
y6_s4_gs_educ5  byte    %52.0g     y6_s4_gs_educ5
                                              7s4: in which country did you receive this degree
y6_s4_gs_educ~V byte    %32.0g     y6_s4_gs_educ5RV
                                              7s4: in which country did you receive this degree (reduced version)
y6_s4_gs_educ2  byte    %62.0g     y6_s4_gs_educ2
                                              8s4: which educational degree was this
y6_s4_gs_educ~p str36   %36s                  8s4: which educational degree was this, other educational degree
y6_s4_gs_educ~d str36   %36s                  8s4: which educational degree was this, additional information
y6_s4_gs_ggra~G byte    %32.0g     y6_s4_gs_ggradeoG
                                              9s4: grades in school leaving certificate: overall (generated)
y6_s4_gs_ggra~o double  %32.0g     y6_s4_gs_ggradeo
                                              9s4: grades in school leaving certificate: overall, grade
y6_s4_gs_gcre~o byte    %32.0g     y6_s4_gs_gcredito
                                              9s4: grades in school leaving certificate: overall, credit points
y6_s4_proc1     byte    %32.0g     y6_s4_proc1
                                              10s4: another school-based vocational education since january 2011
y6_s4_proc2     byte    %32.0g     y6_s4_proc2
                                              11s4: open calendar
y6_s4_proc3     byte    %32.0g     y6_s4_proc3
                                              12s4: is any information missing
y6_s5_sit2c     byte    %39.0g     y6_s5_sit2c
                                              1s5: which professional school did or do you attend
y6_s5_sit2cop   str36   %36s                  1s5: which professional school did or do you attend, other school
y6_s5_sit2copRV str72   %72s                  1s5: which professional school, other school (reduced version)
y6_s5_grad3     byte    %32.0g     y6_s5_grad3
                                              2s5: did you complete this continuing vocational education
y6_s5_g_gradG   byte    %32.0g     y6_s5_g_gradG
                                              3s5: what is the exact title of further voc. qualification (generated)
y6_s5_g_isco08  byte    %32.0g     y6_s5_g_isco08
                                              3s5: what is the exact title of further voc. qualification
y6_s5_g_isco0~V int     %32.0g     y6_s5_g_isco08RV
                                              3s5: what is the exact title of further voc. qualification (reduced version)
y6_s5_g_iseiG   float   %32.0g     y6_s5_g_iseiG
                                              3s5: what is the exact title of further voc. qualification, isei (generated)
y6_s5_g_siopsG  float   %32.0g     y6_s5_g_siopsG
                                              3s5: what is the exact title of further voc. qualification, siops (generated)
y6_s5_g_educ2   byte    %62.0g     y6_s5_g_educ2
                                              3s5: exact title of further vocational qualification, general education degree
y6_s5_g_educ2op str36   %36s                  3s5: exact title of further vocational qualification, other qualification
y6_s5_g_educ2~d str36   %36s                  3s5: exact title of further vocational qualification, additional information
y6_s5_g_ggrad~G byte    %32.0g     y6_s5_g_ggradeoG
                                              4s5: grades in school leaving certificate: overall (generated)
y6_s5_g_ggradeo double  %32.0g     y6_s5_g_ggradeo
                                              4s5: grades in school leaving certificate: overall, grade
y6_s5_g_gcred~o byte    %32.0g     y6_s5_g_gcredito
                                              4s5: grades in school leaving certificate: overall, credit points
y6_s5_proc1     byte    %32.0g     y6_s5_proc1
                                              5s5: another school for further education and training since january 2011
y6_s5_proc2     byte    %32.0g     y6_s5_proc2
                                              6s5: open calendar
y6_s5_proc3     byte    %32.0g     y6_s5_proc3
                                              7s5: is any information missing
y6_s6_grad3     byte    %32.0g     y6_s6_grad3
                                              1s6: did you complete this vocational re-training
y6_s6_g_isco08  byte    %32.0g     y6_s6_g_isco08
                                              2s6: what is the exact title of your qualification
y6_s6_g_isco0~V int     %32.0g     y6_s6_g_isco08RV
                                              2s6: what is the exact title of your qualification (reduced version)
y6_s6_g_iseiG   float   %32.0g     y6_s6_g_iseiG
                                              2s6: what is the exact title of your qualification, isei (generated)
y6_s6_g_siopsG  byte    %32.0g     y6_s6_g_siopsG
                                              2s6: what is the exact title of your qualification, siops (generated)
y6_s6_g_ggrad~G byte    %32.0g     y6_s6_g_ggradeoG
                                              3s6: grades in re-training certificate: overall (generated)
y6_s6_g_ggradeo double  %32.0g     y6_s6_g_ggradeo
                                              3s6: grades in re-training certificate: overall, grade
y6_s6_g_gcred~o byte    %32.0g     y6_s6_g_gcredito
                                              3s6: grades in re-training certificate: overall, credit points
y6_s6_educ1     byte    %32.0g     y6_s6_educ1
                                              4s6: receive an additional educational degree with your re-training
y6_s6_gs_fed_ge byte    %32.0g     y6_s6_gs_fed_ge
                                              5s6: in which federal state did you receive this degree
y6_s6_gs_educ5  byte    %52.0g     y6_s6_gs_educ5
                                              6s6: in which country did you receive this degree
y6_s6_gs_educ~V byte    %32.0g     y6_s6_gs_educ5RV
                                              6s6: in which country did you receive this degree (reduced version)
y6_s6_gs_educ2  byte    %62.0g     y6_s6_gs_educ2
                                              7s6: which educational degree was this
y6_s6_gs_educ~p str36   %36s                  7s6: which educational degree was this, other educational degree
y6_s6_gs_ggra~G byte    %32.0g     y6_s6_gs_ggradeoG
                                              8s6: grades in school leaving certificate: overall (generated)
y6_s6_gs_ggra~o double  %32.0g     y6_s6_gs_ggradeo
                                              8s6: grades in school leaving certificate: overall, grade
y6_s6_gs_gcre~o byte    %32.0g     y6_s6_gs_gcredito
                                              8s6: grades in school leaving certificate: overall, credit points
y6_s6_proc1     byte    %32.0g     y6_s6_proc1
                                              9s6: another re-training since january 2011
y6_s6_proc2     byte    %32.0g     y6_s6_proc2
                                              10s6: open calendar
y6_s6_proc3     byte    %32.0g     y6_s6_proc3
                                              11s6: is any information missing
y6_s7_masubj1~g byte    %75.0g     y6_s7_masubj1_sg
                                              1s7: which subject did or do you study, major subject 1, subject group
y6_s7_masu~1_as byte    %69.0g     y6_s7_masubj1_as
                                              1s7: which subject did or do you study, major subject 1, area of studies
y6_s7_masubj1_s int     %72.0g     y6_s7_masubj1_s
                                              1s7: which subject did or do you study, major subject 1, subject
y6_s7_masubj2~g byte    %75.0g     y6_s7_masubj2_sg
                                              1s7: which subject did or do you study, major subject 2, subject group
y6_s7_masu~2_as byte    %69.0g     y6_s7_masubj2_as
                                              1s7: which subject did or do you study, major subject 2, area of studies
y6_s7_masubj2_s int     %72.0g     y6_s7_masubj2_s
                                              1s7: which subject did or do you study, major subject 2, subject
y6_s7_masubj3~g byte    %75.0g     y6_s7_masubj3_sg
                                              1s7: which subject did or do you study, major subject 3, subject group
y6_s7_masu~3_as byte    %69.0g     y6_s7_masubj3_as
                                              1s7: which subject did or do you study, major subject 3, area of studies
y6_s7_masubj3_s int     %72.0g     y6_s7_masubj3_s
                                              1s7: which subject did or do you study, major subject 3, subject
y6_s7_masubj4~g byte    %75.0g     y6_s7_masubj4_sg
                                              1s7: which subject did or do you study, major subject 4, subject group
y6_s7_masu~4_as byte    %69.0g     y6_s7_masubj4_as
                                              1s7: which subject did or do you study, major subject 4, area of studies
y6_s7_masubj4_s byte    %72.0g     y6_s7_masubj4_s
                                              1s7: which subject did or do you study, major subject 4, subject
y6_s7_type      byte    %54.0g     y6_s7_type
                                              2s7: which institution of higher education did or do you attend
y6_s7_typeop    str36   %36s                  2s7: which institution of higher education, other institution
y6_s7_typeopRV  str67   %67s                  2s7: which institution of higher education, other institution (reduced version)
y6_s7_type_add  str36   %36s                  2s7: which institution of higher education, additional information
y6_s7_name      str36   %36s                  3s7: what was or is the exact name of this institution of higher education
y6_s7_city      str36   %36s                  4s7: in which city did or do you study this subject
y6_s7_rest      byte    %32.0g     y6_s7_rest
                                              5s7: selection test or specific gpa for admission to study subject
y6_s7_grad3     byte    %32.0g     y6_s7_grad3
                                              6s7: did you earn a university degree in this subject
y6_s7_g_degree  byte    %52.0g     y6_s7_g_degree
                                              7s7: which university degree did you earn
y6_s7_g_degre~p str36   %36s                  7s7: which university degree did you earn, other degree
y6_s7_g_ggrad~G byte    %32.0g     y6_s7_g_ggradeoG
                                              8s7: grades in examination certificate: overall (generated)
y6_s7_g_ggradeo double  %32.0g     y6_s7_g_ggradeo
                                              8s7: grades in examination certificate: overall, grade
y6_s7_g_gcred~o byte    %32.0g     y6_s7_g_gcredito
                                              8s7: grades in examination certificate: overall, credit points
y6_s7_degree    byte    %52.0g     y6_s7_degree
                                              9s7: which degree will you receive with your current studies
y6_s7_degreeop  str36   %36s                  9s7: which degree will you receive with your current studies, other degree
y6_s7_degree_~d str36   %36s                  9s7: which degree will you receive with current studies, additional information
y6_s7_proc1     byte    %32.0g     y6_s7_proc1
                                              10s7: another subject since january 2011
y6_s7_proc2     byte    %32.0g     y6_s7_proc2
                                              11s7: open calendar
y6_s7_proc3     byte    %32.0g     y6_s7_proc3
                                              12s7: is any information missing
y6_s8_educ1     byte    %32.0g     y6_s8_educ1
                                              1s8: receive an educational degree in the course of your vocational preparation
y6_s8_gs_fed_ge byte    %32.0g     y6_s8_gs_fed_ge
                                              2s8: in which federal state did you receive this degree
y6_s8_gs_educ5  byte    %52.0g     y6_s8_gs_educ5
                                              3s8: in which country did you receive this degree
y6_s8_gs_educ~V byte    %32.0g     y6_s8_gs_educ5RV
                                              3s8: in which country did you receive this degree (reduced version)
y6_s8_gs_educ2  byte    %62.0g     y6_s8_gs_educ2
                                              4s8: which educational degree was this
y6_s8_gs_educ~p str36   %36s                  4s8: which educational degree was this, other educational degree
y6_s8_gs_educ~d str36   %36s                  4s8: which educational degree was this, additional information
y6_s8_gs_ggra~G byte    %32.0g     y6_s8_gs_ggradeoG
                                              5s8: grades in school leaving certificate: overall (generated)
y6_s8_gs_ggra~o double  %32.0g     y6_s8_gs_ggradeo
                                              5s8: grades in school leaving certificate: overall, grade
y6_s8_gs_gcre~o float   %32.0g     y6_s8_gs_gcredito
                                              5s8: grades in school leaving certificate: overall, credit points
y6_s8_prepG     byte    %32.0g     y6_s8_prepG
                                              6s8: for which profession did voc. prep. measure prepare you (generated)
y6_s8_isco08    byte    %32.0g     y6_s8_isco08
                                              6s8: for which profession did voc. prep. measure prepare you
y6_s8_isco08RV  int     %32.0g     y6_s8_isco08RV
                                              6s8: for which profession did voc. prep. measure prepare you (reduced version)
y6_s8_iseiG     float   %32.0g     y6_s8_iseiG
                                              6s8: for which profession did voc. prep. measure prepare you, isei (generated)
y6_s8_siopsG    float   %32.0g     y6_s8_siopsG
                                              6s8: for which profession did voc. prep. measure prepare you, siops (generated)
y6_s8_proc1     byte    %32.0g     y6_s8_proc1
                                              7s8: another vocational preparation measure since january 2011
y6_s8_proc2     byte    %32.0g     y6_s8_proc2
                                              8s8: open calendar
y6_s8_proc3     byte    %32.0g     y6_s8_proc3
                                              9s8: is any information missing
y6_s9_tactG     byte    %32.0g     y6_s9_tactG
                                              1s9: in which profession did or do you do your vocational training (generated)
y6_s9_isco08    byte    %32.0g     y6_s9_isco08
                                              1s9: in which profession did or do you do your vocational training
y6_s9_isco08RV  int     %32.0g     y6_s9_isco08RV
                                              1s9: in which profession did or do you do your voc. training (reduced version)
y6_s9_iseiG     float   %32.0g     y6_s9_iseiG
                                              1s9: in which profession did or do you do your voc. training, isei (generated)
y6_s9_siopsG    float   %32.0g     y6_s9_siopsG
                                              1s9: in which profession did or do you do your voc. training, siops (generated)
y6_s9_tactop    str36   %36s                  1s9: in which profession did or do you do your voc. training, other activity
y6_s9_tactopRV  str72   %72s                  1s9: profession of vocational training, other activity (reduced version)
y6_s9_proc1     byte    %32.0g     y6_s9_proc1
                                              2s9: another vocational training since january 2011
y6_s9_proc2     byte    %32.0g     y6_s9_proc2
                                              3s9: open calendar
y6_s9_proc3     byte    %32.0g     y6_s9_proc3
                                              4s9: is any information missing
y6_s10_isco08   byte    %32.0g     y6_s10_isco08
                                              1s10: what is your profession called
y6_s10_isco08RV int     %32.0g     y6_s10_isco08RV
                                              1s10: what is your profession called (reduced version)
y6_s10_iseiG    float   %32.0g     y6_s10_iseiG
                                              1s10: what is your profession called, isei (generated)
y6_s10_siopsG   float   %32.0g     y6_s10_siopsG
                                              1s10: what is your profession called, siops (generated)
y6_s10_cont5    byte    %36.0g     y6_s10_cont5
                                              2s10: type of contract at the beginning for this profession or job
y6_s10_cont6    byte    %32.0g     y6_s10_cont6
                                              3s10: was contract changed from a temporary contract to a permanent contract
y6_s10_workh    byte    %37.0g     y6_s10_workh
                                              4s10: weekly working hours in contract at beginning of job
y6_s10_workhRV  float   %37.0g     y6_s10_workhRV
                                              4s10: weekly working hours in contract at beginning of job (reduced version)
y6_s10_proc1a   byte    %32.0g     y6_s10_proc1a
                                              5s10: another full-time employment in same occupation since january 2011
y6_s10_proc1b   byte    %32.0g     y6_s10_proc1b
                                              6s10: another full-time employment in different occupation since january 2011
y6_s10_proc2    byte    %32.0g     y6_s10_proc2
                                              7s10: open calendar
y6_s10_proc3    byte    %32.0g     y6_s10_proc3
                                              8s10: is any information missing
y6_s11_isco08   byte    %32.0g     y6_s11_isco08
                                              1s11: what is your profession called
y6_s11_isco08RV int     %32.0g     y6_s11_isco08RV
                                              1s11: what is your profession called (reduced version)
y6_s11_iseiG    float   %32.0g     y6_s11_iseiG
                                              1s11: what is your profession called, isei (generated)
y6_s11_siopsG   float   %32.0g     y6_s11_siopsG
                                              1s11: what is your profession called, siops (generated)
y6_s11_proc1a   byte    %32.0g     y6_s11_proc1a
                                              2s11: another employment as contr. family worker in same occ. since january 2011
y6_s11_proc1b   byte    %32.0g     y6_s11_proc1b
                                              3s11: another employment as family worker in different occ. since january 2011
y6_s11_proc2    byte    %32.0g     y6_s11_proc2
                                              4s11: open calendar
y6_s11_proc3    byte    %32.0g     y6_s11_proc3
                                              5s11: is any information missing
y6_s12_isco08   byte    %32.0g     y6_s12_isco08
                                              1s12: what is your profession called
y6_s12_isco08RV int     %32.0g     y6_s12_isco08RV
                                              1s12: what is your profession called (reduced version)
y6_s12_iseiG    float   %32.0g     y6_s12_iseiG
                                              1s12: what is your profession called, isei (generated)
y6_s12_siopsG   float   %32.0g     y6_s12_siopsG
                                              1s12: what is your profession called, siops (generated)
y6_s12_proc1a   byte    %32.0g     y6_s12_proc1a
                                              2s12: another self-employment in same occupation since january 2011
y6_s12_proc1b   byte    %32.0g     y6_s12_proc1b
                                              3s12: another self-employment in different occupation since january 2011
y6_s12_proc2    byte    %32.0g     y6_s12_proc2
                                              4s12: open calendar
y6_s12_proc3    byte    %32.0g     y6_s12_proc3
                                              5s12: is any information missing
y6_s13_isco08   byte    %32.0g     y6_s13_isco08
                                              1s13: what is your profession called
y6_s13_isco08RV int     %32.0g     y6_s13_isco08RV
                                              1s13: what is your profession called (reduced version)
y6_s13_iseiG    float   %32.0g     y6_s13_iseiG
                                              1s13: what is your profession called, isei (generated)
y6_s13_siopsG   float   %32.0g     y6_s13_siopsG
                                              1s13: what is your profession called, siops (generated)
y6_s13_cont5    byte    %36.0g     y6_s13_cont5
                                              2s13: type of contract at the beginning for this profession or job
y6_s13_cont6    byte    %32.0g     y6_s13_cont6
                                              3s13: was contract changed from a temporary contract to a permanent contract
y6_s13_workh    byte    %37.0g     y6_s13_workh
                                              4s13: weekly working hours in contract at beginning of job
y6_s13_workhRV  float   %37.0g     y6_s13_workhRV
                                              4s13: weekly working hours in contract at beginning of job (reduced version)
y6_s13_proc1a   byte    %32.0g     y6_s13_proc1a
                                              5s13: another part-time employment in same occupation since january 2011
y6_s13_proc1b   byte    %32.0g     y6_s13_proc1b
                                              6s13: another part-time employment in different occupation since january 2011
y6_s13_proc2    byte    %32.0g     y6_s13_proc2
                                              7s13: open calendar
y6_s13_proc3    byte    %32.0g     y6_s13_proc3
                                              8s13: is any information missing
y6_s14_tact     byte    %62.0g     y6_s14_tact
                                              1s14: what did you do exactly
y6_s14_tactop   str36   %36s                  1s14: what did you do exactly, something else
y6_s14_tactopRV str35   %35s                  1s14: what did you do exactly, something else (reduced version)
y6_s14_isco08   byte    %32.0g     y6_s14_isco08
                                              2s14: for which profession did or does this activity prepare
y6_s14_isco08RV int     %32.0g     y6_s14_isco08RV
                                              2s14: for which profession did or does this activity prepare (reduced version)
y6_s14_iseiG    float   %32.0g     y6_s14_iseiG
                                              2s14: for which profession did or does this activity prepare, isei (generated)
y6_s14_siopsG   float   %32.0g     y6_s14_siopsG
                                              2s14: for which profession did or does this activity prepare, siops (generated)
y6_s14_paid     byte    %32.0g     y6_s14_paid
                                              3s14: was this activity paid or unpaid or was there expense allowance
y6_s14_proc1    byte    %32.0g     y6_s14_proc1
                                              4s14: another internship since january 2011
y6_s14_proc2    byte    %32.0g     y6_s14_proc2
                                              5s14: open calendar
y6_s14_proc3    byte    %32.0g     y6_s14_proc3
                                              6s14: is any information missing
y6_s15_proc1    byte    %32.0g     y6_s15_proc1
                                              1s15: another secondary employment since january 2011
y6_s15_proc2    byte    %32.0g     y6_s15_proc2
                                              2s15: open calendar
y6_s15_proc3    byte    %32.0g     y6_s15_proc3
                                              3s15: is any information missing
y6_s16_proc1    byte    %32.0g     y6_s16_proc1
                                              1s16: another maternity leave or parental leave since january 2011
y6_s16_proc2    byte    %32.0g     y6_s16_proc2
                                              2s16: open calendar
y6_s16_proc3    byte    %32.0g     y6_s16_proc3
                                              3s16: is any information missing
y6_s17_proc1    byte    %32.0g     y6_s17_proc1
                                              1s17: another volontary or military service since january 2011
y6_s17_proc2    byte    %32.0g     y6_s17_proc2
                                              2s17: open calendar
y6_s17_proc3    byte    %32.0g     y6_s17_proc3
                                              3s17: is any information missing
y6_s18_proc1    byte    %32.0g     y6_s18_proc1
                                              1s18: another work & travel programme or stay abroad since january 2011
y6_s18_proc2    byte    %32.0g     y6_s18_proc2
                                              2s18: open calendar
y6_s18_proc3    byte    %32.0g     y6_s18_proc3
                                              3s18: is any information missing
y6_s19_proc1    byte    %32.0g     y6_s19_proc1
                                              1s19: another period of unemployment or job-seeking since january 2011
y6_s19_proc2    byte    %32.0g     y6_s19_proc2
                                              2s19: open calendar
y6_s19_proc3    byte    %32.0g     y6_s19_proc3
                                              3s19: is any information missing
y6_s20_proc1    byte    %32.0g     y6_s20_proc1
                                              1s20: another period as househusband or housewife since january 2011
y6_s20_proc2    byte    %32.0g     y6_s20_proc2
                                              2s20: open calendar
y6_s20_proc3    byte    %32.0g     y6_s20_proc3
                                              3s20: is any information missing
y6_s21_proc1    byte    %32.0g     y6_s21_proc1
                                              1s21: another period of incapacity for work since january 2011
y6_s21_proc2    byte    %32.0g     y6_s21_proc2
                                              2s21: open calendar
y6_s21_proc3    byte    %32.0g     y6_s21_proc3
                                              3s21: is any information missing
y6_s22_tactop   str36   %36s                  1s22: what did you do during this time
y6_s22_tactopRV str55   %55s                  1s22: what did you do during this time (reduced version)
y6_s22_proc1    byte    %32.0g     y6_s22_proc1
                                              2s22: another activity since january 2011
y6_s22_proc2    byte    %32.0g     y6_s22_proc2
                                              3s22: open calendar
y6_s22_proc3    byte    %32.0g     y6_s22_proc3
                                              4s22: is any information missing
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: youthid

. 
.  
. order  *id   y6_ylhcs_index y6_s1_sit2a *dat* y6_ylhcs_spt2  y6_ylhcs_spt1

. br *id   y6_ylhcs_index y6_s1_sit2a *dat* y6_ylhcs_spt2  y6_ylhcs_spt1

. 
.   
. 
.  
.  
. ************************************************************************
. **# Bookmark  2. Preparation of dataset ********************************
. ************************************************************************
. 
. * Dataset  education and profession
. use "$DATA/w6_ylhcs_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. 
.  
. *  add year of birth from the other dataset 
. merge m:1 youthid using "$DATA/w6_ym_ge_v6.0.0_rv.dta" , keepusing (y6_doby y6_dobm  y6_sex) keep (match)
(label youthid_ge already defined)
(label y6_sample already defined)
(label y6_version already defined)
(label y6_status already defined)
(label country already defined)
(label youthid already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            25,008  (_merge==3)
    -----------------------------------------

. 
. 
. * Get months and year of the interview separately 
. gen intdate = dofm(y6_intdat_ylhcsRV)

. format intdate %d

. gen intmonth=month(intdate)

. gen inty=year(intdate) 

. drop intdate

. 
. * generate an age variable (broad)
. gen age = y6_ylhcs_begdaty - y6_doby 

. fre age  if y6_ylhcs_index==1  

age
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   5     |          7       0.14       0.14       0.14
        6     |         64       1.27       1.27       1.41
        7     |         80       1.59       1.59       2.99
        8     |         26       0.52       0.52       3.51
        9     |         75       1.49       1.49       5.00
        10    |       1339      26.56      26.56      31.55
        11    |       1531      30.36      30.36      61.92
        12    |        574      11.38      11.38      73.30
        13    |        329       6.53       6.53      79.83
        14    |        221       4.38       4.38      84.21
        15    |        256       5.08       5.08      89.29
        16    |        305       6.05       6.05      95.34
        17    |        152       3.01       3.01      98.35
        18    |         35       0.69       0.69      99.05
        19    |         27       0.54       0.54      99.58
        20    |         10       0.20       0.20      99.78
        21    |          8       0.16       0.16      99.94
        22    |          2       0.04       0.04      99.98
        2032  |          1       0.02       0.02     100.00
        Total |       5042     100.00     100.00           
-----------------------------------------------------------

. br if age == 22 & y6_ylhcs_index==1  

. fre y6_sample

y6_sample -- sample
-------------------------------------------------------------------
                      |      Freq.    Percent      Valid       Cum.
----------------------+--------------------------------------------
Valid   1 panel       |       7830      31.31      31.31      31.31
        2 refreshment |      17178      68.69      68.69     100.00
        Total         |      25008     100.00     100.00           
-------------------------------------------------------------------

. 
. 
. *clone some variables
. clonevar begm  = y6_ylhcs_begdatm

. clonevar begy  = y6_ylhcs_begdaty

. 
. clonevar endm        = y6_ylhcs_enddatm

. clonevar endy        = y6_ylhcs_enddaty

. 
. clonevar birthdm     = y6_dobm 

. clonevar birthdy     = y6_doby 

. 
. clonevar index       = y6_ylhcs_index

. 
. 
. 
. * Extract value labels
. levelsof y6_s1_sit2a, local(values) clean
-99 -88 -77 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17

. label list y6_s1_sit2a
y6_s1_sit2a:
         -99 dont know
         -88 no answer
         -77 not applicable
         -66 question not asked
         -55 other missing
         -44 interrupted interview
         -33 not available in reduced version
         -22 refusal
           1 lower secondary school (hauptschule)
           2 intermediate secondary school (realschule)
           3 combined lower and intermediate secondary school (realschule plus)
           4 upper secondary school (gymnasium)
           5 higher secondary vocational school (fachoberschule)
           6 combined lower and intermediate secondary school (mittelschule)
           7 combined lower and intermediate secondary school (regelschule)
           8 combined lower and intermediate secondary school (sekundarschule)
           9 combined lower and intermediate secondary school (haupt-realschule)
          10 school for special needs (foerderschule)
          11 rudolf-steiner school (waldorfschule)
          12 comprehensive school (integrierte gesamtschule)
          13 combined lower, intermediate and upper secondary school (kooperative gesamtschule)
          14 combined lower, intermediate and upper secondary school (kooperative gesamtschule): lower secondary track (hauptschulzweig)
          15 combined lower, intermediate and upper secondary school (kooperative gesamtschule): intermediate secondary track (realschulzweig)
          16 combined lower, intermediate and upper secondary school (kooperative gesamtschule): upper secondary track (gymnasialzweig)
          17 other general education school

. 
. 
. levelsof  y6_s2_sit2b ,  local(values) clean
-99 -88 -77 1 2 3 4 5 6 7 8 9 10 11 12 13 15

. label list y6_s2_sit2b 
y6_s2_sit2b:
         -99 don't know
         -88 no answer
         -77 not applicable
         -66 question not asked
         -55 other missing
         -44 interrupted interview
         -33 not available in reduced version
         -22 refusal
           1 evening lower secondary school (abendhauptschule)
           2 evening intermediate secondary school (abendrealschule)
           3 evening upper secondary school (abendgymnasium)
           4 other evening school (andere abendschule)
           5 folk high school (volkshochschule)
           6 vocational extension school (berufsaufbauschule)
           7 school for continuing vocational training (fachschule/fachakademie)
           8 vocational college (berufskolleg)
           9 higher secondary vocational school (berufsoberschule)
          10 distance learning school (fernschule)
          11 higher secondary vocational school (fachoberschule)
          12 higher secondary vocational school (fachgymnasium/berufliches gymnasium)
          13 adult education college (kolleg)
          14 remote adult education college (telekolleg)
          15 other type of school

. 
. 
. levelsof  y6_ylhcs_spt2 ,  local(values) clean
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22

. label list y6_ylhcs_spt2
y6_ylhcs_spt2:
         -99 dont know
         -88 no answer
         -77 not applicable
         -66 question not asked
         -55 other missing
         -44 interrupted interview
         -33 not available in reduced version
         -22 refusal
           1 general education
           2 second chance education
           3 apprenticeship (in a company and in school)
           4 school-based vocational education
           5 school for further education and training
           6 re-training
           7 studying
           8 vocational preparation
           9 other vocational education
          10 full-time employment
          11 contributing family worker
          12 self-employment
          13 part-time employment
          14 internship/traineeship/etc.
          15 other secondary employment
          16 maternity/parental leave
          17 voluntary/military service
          18 work & travel programme/stay abroad
          19 unemployment/job-seeking
          20 housewife/househusband
          21 incapacity for work
          22 other activity

. 
. 
. 
. * Educational spells
. 
. // Create a variable for the educational spells including : y6_s1_sit2a (detailed info on school),  y6_ylhcs_spt2 (other things such employment,..), y6_s2_sit2b (second chance education )
. 
. 
. gen spelltype = .
(25,008 missing values generated)

. * Lower secondary
. replace spelltype = 1 if y6_s1_sit2a == 1 | y6_s1_sit2a == 14
(704 real changes made)

. replace spelltype = 1 if y6_s1_sit2a == -77 & inlist(y6_ylhcs_spt2, 4, 5, 8, 9)
(1,555 real changes made)

. replace spelltype = 1 if y6_ylhcs_spt2 == 2 & inlist(y6_s2_sit2b, 1, 6, 7, 8)
(361 real changes made)

. * Intermediate secondary 
. replace spelltype = 2 if inlist(y6_s1_sit2a, 2, 3, 6, 7, 8, 9, 12, 13, 15)
(2,221 real changes made)

. replace spelltype = 2 if y6_ylhcs_spt2 == 2 & y6_s2_sit2b == 2
(39 real changes made)

. * Upper secondary 
. replace spelltype = 3 if inlist(y6_s1_sit2a, 4, 5, 11, 16)
(3,166 real changes made)

. replace spelltype = 3 if y6_ylhcs_spt2 == 2 & inlist(y6_s2_sit2b, 3, 9, 11, 12, 13, 14)
(190 real changes made)

. * Tertiary
. replace spelltype = 4 if y6_s1_sit2a == -77 & y6_ylhcs_spt2 == 7
(1,949 real changes made)

. * Other 
. replace spelltype = 5 if inlist(y6_s1_sit2a, 10, 17)
(456 real changes made)

. replace spelltype = 5 if y6_s1_sit2a == -77 & y6_ylhcs_spt2 == 6 
(6 real changes made)

. replace spelltype = 5 if y6_ylhcs_spt2 == 2 & inlist(y6_s2_sit2b, 4, 5, 10, 15)
(57 real changes made)

. * Apprenticeship
. replace spelltype = 6 if y6_s1_sit2a == -77 & y6_ylhcs_spt2 == 3
(1,840 real changes made)

. * Employment 
. replace spelltype = 7 if y6_s1_sit2a == -77 & inrange(y6_ylhcs_spt2, 10, 17)
(7,247 real changes made)

. * Out of employment 
. replace spelltype = 8 if y6_s1_sit2a == -77 & inrange(y6_ylhcs_spt2, 18, 22)
(5,205 real changes made)

. 
. 
. label define spelltype 1 "Lower secondary" 2 "Intermediate secondary" 3 "Upper secondary" 4 "Tertiary" 5 "Other" 6 "Apprenticeship" 7 "Employment" 8 "Out of employment"

. label values spelltype spelltype 

. 
. 
. tab spelltype y6_s1_sit2a, m  

                      |                                                        1s1: which school-type did or do you attend
            spelltype | dont know  no answer  not appli  lower sec  intermedi  combined   upper sec  higher se  combined   combined   combined   combined   school fo  rudolf-st |     Total
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
      Lower secondary |         0          0      1,916        683          0          0          0          0          0          0          0          0          0          0 |     2,620 
Intermediate secondar |         0          0         39          0      1,550         92          0          0         30         16         50         51          0          0 |     2,260 
      Upper secondary |         0          0        190          0          0          0      2,456        420          0          0          0          0          0         45 |     3,356 
             Tertiary |         0          0      1,949          0          0          0          0          0          0          0          0          0          0          0 |     1,949 
                Other |         0          0         63          0          0          0          0          0          0          0          0          0         62          0 |       519 
       Apprenticeship |         0          0      1,840          0          0          0          0          0          0          0          0          0          0          0 |     1,840 
           Employment |         0          0      7,247          0          0          0          0          0          0          0          0          0          0          0 |     7,247 
    Out of employment |         0          0      5,205          0          0          0          0          0          0          0          0          0          0          0 |     5,205 
                    . |         5          5          2          0          0          0          0          0          0          0          0          0          0          0 |        12 
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
                Total |         5          5     18,451        683      1,550         92      2,456        420         30         16         50         51         62         45 |    25,008 


                      |            1s1: which school-type did or do you attend
            spelltype | comprehen  combined   combined   combined   combined   other gen |     Total
----------------------+------------------------------------------------------------------+----------
      Lower secondary |         0          0         21          0          0          0 |     2,620 
Intermediate secondar |       273         44          0        115          0          0 |     2,260 
      Upper secondary |         0          0          0          0        245          0 |     3,356 
             Tertiary |         0          0          0          0          0          0 |     1,949 
                Other |         0          0          0          0          0        394 |       519 
       Apprenticeship |         0          0          0          0          0          0 |     1,840 
           Employment |         0          0          0          0          0          0 |     7,247 
    Out of employment |         0          0          0          0          0          0 |     5,205 
                    . |         0          0          0          0          0          0 |        12 
----------------------+------------------------------------------------------------------+----------
                Total |       273         44         21        115        245        394 |    25,008 

. tab spelltype y6_s2_sit2b, m 

                      |                                                        1s2: which school-type did or do you attend
            spelltype | don't kno  no answer  not appli  evening l  evening i  evening u  other eve  folk high  vocationa  school fo  vocationa  higher se  distance   higher se |     Total
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
      Lower secondary |         0          0      2,259          3          0          0          0          0          7         19        332          0          0          0 |     2,620 
Intermediate secondar |         0          0      2,221          0         39          0          0          0          0          0          0          0          0          0 |     2,260 
      Upper secondary |         0          0      3,166          0          0         12          0          0          0          0          0         27          0         96 |     3,356 
             Tertiary |         0          0      1,949          0          0          0          0          0          0          0          0          0          0          0 |     1,949 
                Other |         0          0        462          0          0          0          7         15          0          0          0          0          1          0 |       519 
       Apprenticeship |         0          0      1,840          0          0          0          0          0          0          0          0          0          0          0 |     1,840 
           Employment |         0          0      7,247          0          0          0          0          0          0          0          0          0          0          0 |     7,247 
    Out of employment |         0          0      5,205          0          0          0          0          0          0          0          0          0          0          0 |     5,205 
                    . |         1          1         10          0          0          0          0          0          0          0          0          0          0          0 |        12 
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
                Total |         1          1     24,359          3         39         12          7         15          7         19        332         27          1         96 |    25,008 


                      | 1s2: which school-type did or do
                      |            you attend
            spelltype | higher se  adult edu  other typ |     Total
----------------------+---------------------------------+----------
      Lower secondary |         0          0          0 |     2,620 
Intermediate secondar |         0          0          0 |     2,260 
      Upper secondary |        32         23          0 |     3,356 
             Tertiary |         0          0          0 |     1,949 
                Other |         0          0         34 |       519 
       Apprenticeship |         0          0          0 |     1,840 
           Employment |         0          0          0 |     7,247 
    Out of employment |         0          0          0 |     5,205 
                    . |         0          0          0 |        12 
----------------------+---------------------------------+----------
                Total |        32         23         34 |    25,008 

. tab spelltype y6_ylhcs_spt2, m 

                      |                                                                 spell type (second level)
            spelltype | general e  second ch  apprentic  school-ba  school fo  re-traini   studying  vocationa  other voc  full-time  contribut  self-empl  part-time  internshi |     Total
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
      Lower secondary |       704        361          0        573         46          0          0        593        343          0          0          0          0          0 |     2,620 
Intermediate secondar |     2,221         39          0          0          0          0          0          0          0          0          0          0          0          0 |     2,260 
      Upper secondary |     3,166        190          0          0          0          0          0          0          0          0          0          0          0          0 |     3,356 
             Tertiary |         0          0          0          0          0          0      1,949          0          0          0          0          0          0          0 |     1,949 
                Other |       456         57          0          0          0          6          0          0          0          0          0          0          0          0 |       519 
       Apprenticeship |         0          0      1,840          0          0          0          0          0          0          0          0          0          0          0 |     1,840 
           Employment |         0          0          0          0          0          0          0          0          0      1,403        166        103        585      1,498 |     7,247 
    Out of employment |         0          0          0          0          0          0          0          0          0          0          0          0          0          0 |     5,205 
                    . |        10          2          0          0          0          0          0          0          0          0          0          0          0          0 |        12 
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
                Total |     6,557        649      1,840        573         46          6      1,949        593        343      1,403        166        103        585      1,498 |    25,008 


                      |                                spell type (second level)
            spelltype | other sec  maternity  voluntary  work & tr  unemploym  housewife  incapacit  other act |     Total
----------------------+----------------------------------------------------------------------------------------+----------
      Lower secondary |         0          0          0          0          0          0          0          0 |     2,620 
Intermediate secondar |         0          0          0          0          0          0          0          0 |     2,260 
      Upper secondary |         0          0          0          0          0          0          0          0 |     3,356 
             Tertiary |         0          0          0          0          0          0          0          0 |     1,949 
                Other |         0          0          0          0          0          0          0          0 |       519 
       Apprenticeship |         0          0          0          0          0          0          0          0 |     1,840 
           Employment |     2,946         87        459          0          0          0          0          0 |     7,247 
    Out of employment |         0          0          0        358        801         51         47      3,948 |     5,205 
                    . |         0          0          0          0          0          0          0          0 |        12 
----------------------+----------------------------------------------------------------------------------------+----------
                Total |     2,946         87        459        358        801         51         47      3,948 |    25,008 

. 
. 
. // it seems as if don't know and no answer in y6_s1_sit2a,is general education or second chance (see y6_ylhcs_spt2), so I'd recode the missings in spelltype to 'other'
. 
. replace spelltype = 5 if spelltype ==. 
(12 real changes made)

. 
. 
. 
. * Generate a robustness-check variable for educational spells 
. 
. 
. gen robtype = .
(25,008 missing values generated)

. * Lower secondary
. replace robtype = 1 if y6_s1_sit2a == 1 
(683 real changes made)

. replace robtype = 1 if y6_s1_sit2a == -77 & inlist(y6_ylhcs_spt2, 4, 5, 8, 9)
(1,555 real changes made)

. replace robtype = 1 if y6_ylhcs_spt2 == 2 & inlist(y6_s2_sit2b, 1, 6, 7, 8)
(361 real changes made)

. * Intermediate secondary 
. replace robtype = 2 if inlist(y6_s1_sit2a, 2, 3, 6, 7, 8, 9)
(1,789 real changes made)

. replace robtype = 2 if y6_ylhcs_spt2 == 2 & y6_s2_sit2b == 2
(39 real changes made)

. * Upper secondary 
. replace robtype = 3 if inlist(y6_s1_sit2a, 4, 5)
(2,876 real changes made)

. replace robtype = 3 if y6_ylhcs_spt2 == 2 & inlist(y6_s2_sit2b, 3, 9, 11, 12, 13, 14)
(190 real changes made)

. * Tertiary
. replace robtype = 4 if y6_s1_sit2a == -77 & y6_ylhcs_spt2 == 7
(1,949 real changes made)

. * Other 
. replace robtype = 5 if inlist(y6_s1_sit2a, 10, 17)
(456 real changes made)

. replace robtype = 5 if y6_s1_sit2a == -77 & y6_ylhcs_spt2 == 6 
(6 real changes made)

. replace robtype = 5 if y6_ylhcs_spt2 == 2 & inlist(y6_s2_sit2b, 4, 5, 10, 15)
(57 real changes made)

. * Apprenticeship
. replace robtype = 6 if y6_s1_sit2a == -77 & y6_ylhcs_spt2 == 3
(1,840 real changes made)

. * Employment 
. replace robtype = 7 if y6_s1_sit2a == -77 & inrange(y6_ylhcs_spt2, 10, 17)
(7,247 real changes made)

. * Out of employment 
. replace robtype = 8 if y6_s1_sit2a == -77 & inrange(y6_ylhcs_spt2, 18, 22)
(5,205 real changes made)

. * Combined 
. replace robtype = 9 if inrange(y6_s1_sit2a, 11, 16)
(743 real changes made)

. 
. label define robtype 1 "Lower secondary" 2 "Intermediate secondary" 3 "Upper secondary" 4 "Tertiary" 5 "Other" 6 "Apprenticeship" 7 "Employment" 8 "Out of employment" 9 "Combined" , modify 

. label values robtype robtype 

. 
. 
. tab robtype y6_s1_sit2a, m  

                      |                                                        1s1: which school-type did or do you attend
              robtype | dont know  no answer  not appli  lower sec  intermedi  combined   upper sec  higher se  combined   combined   combined   combined   school fo  rudolf-st |     Total
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
      Lower secondary |         0          0      1,916        683          0          0          0          0          0          0          0          0          0          0 |     2,599 
Intermediate secondar |         0          0         39          0      1,550         92          0          0         30         16         50         51          0          0 |     1,828 
      Upper secondary |         0          0        190          0          0          0      2,456        420          0          0          0          0          0          0 |     3,066 
             Tertiary |         0          0      1,949          0          0          0          0          0          0          0          0          0          0          0 |     1,949 
                Other |         0          0         63          0          0          0          0          0          0          0          0          0         62          0 |       519 
       Apprenticeship |         0          0      1,840          0          0          0          0          0          0          0          0          0          0          0 |     1,840 
           Employment |         0          0      7,247          0          0          0          0          0          0          0          0          0          0          0 |     7,247 
    Out of employment |         0          0      5,205          0          0          0          0          0          0          0          0          0          0          0 |     5,205 
             Combined |         0          0          0          0          0          0          0          0          0          0          0          0          0         45 |       743 
                    . |         5          5          2          0          0          0          0          0          0          0          0          0          0          0 |        12 
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
                Total |         5          5     18,451        683      1,550         92      2,456        420         30         16         50         51         62         45 |    25,008 


                      |            1s1: which school-type did or do you attend
              robtype | comprehen  combined   combined   combined   combined   other gen |     Total
----------------------+------------------------------------------------------------------+----------
      Lower secondary |         0          0          0          0          0          0 |     2,599 
Intermediate secondar |         0          0          0          0          0          0 |     1,828 
      Upper secondary |         0          0          0          0          0          0 |     3,066 
             Tertiary |         0          0          0          0          0          0 |     1,949 
                Other |         0          0          0          0          0        394 |       519 
       Apprenticeship |         0          0          0          0          0          0 |     1,840 
           Employment |         0          0          0          0          0          0 |     7,247 
    Out of employment |         0          0          0          0          0          0 |     5,205 
             Combined |       273         44         21        115        245          0 |       743 
                    . |         0          0          0          0          0          0 |        12 
----------------------+------------------------------------------------------------------+----------
                Total |       273         44         21        115        245        394 |    25,008 

. tab robtype y6_s2_sit2b, m 

                      |                                                        1s2: which school-type did or do you attend
              robtype | don't kno  no answer  not appli  evening l  evening i  evening u  other eve  folk high  vocationa  school fo  vocationa  higher se  distance   higher se |     Total
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
      Lower secondary |         0          0      2,238          3          0          0          0          0          7         19        332          0          0          0 |     2,599 
Intermediate secondar |         0          0      1,789          0         39          0          0          0          0          0          0          0          0          0 |     1,828 
      Upper secondary |         0          0      2,876          0          0         12          0          0          0          0          0         27          0         96 |     3,066 
             Tertiary |         0          0      1,949          0          0          0          0          0          0          0          0          0          0          0 |     1,949 
                Other |         0          0        462          0          0          0          7         15          0          0          0          0          1          0 |       519 
       Apprenticeship |         0          0      1,840          0          0          0          0          0          0          0          0          0          0          0 |     1,840 
           Employment |         0          0      7,247          0          0          0          0          0          0          0          0          0          0          0 |     7,247 
    Out of employment |         0          0      5,205          0          0          0          0          0          0          0          0          0          0          0 |     5,205 
             Combined |         0          0        743          0          0          0          0          0          0          0          0          0          0          0 |       743 
                    . |         1          1         10          0          0          0          0          0          0          0          0          0          0          0 |        12 
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
                Total |         1          1     24,359          3         39         12          7         15          7         19        332         27          1         96 |    25,008 


                      | 1s2: which school-type did or do
                      |            you attend
              robtype | higher se  adult edu  other typ |     Total
----------------------+---------------------------------+----------
      Lower secondary |         0          0          0 |     2,599 
Intermediate secondar |         0          0          0 |     1,828 
      Upper secondary |        32         23          0 |     3,066 
             Tertiary |         0          0          0 |     1,949 
                Other |         0          0         34 |       519 
       Apprenticeship |         0          0          0 |     1,840 
           Employment |         0          0          0 |     7,247 
    Out of employment |         0          0          0 |     5,205 
             Combined |         0          0          0 |       743 
                    . |         0          0          0 |        12 
----------------------+---------------------------------+----------
                Total |        32         23         34 |    25,008 

. tab robtype y6_ylhcs_spt2, m 

                      |                                                                 spell type (second level)
              robtype | general e  second ch  apprentic  school-ba  school fo  re-traini   studying  vocationa  other voc  full-time  contribut  self-empl  part-time  internshi |     Total
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
      Lower secondary |       683        361          0        573         46          0          0        593        343          0          0          0          0          0 |     2,599 
Intermediate secondar |     1,789         39          0          0          0          0          0          0          0          0          0          0          0          0 |     1,828 
      Upper secondary |     2,876        190          0          0          0          0          0          0          0          0          0          0          0          0 |     3,066 
             Tertiary |         0          0          0          0          0          0      1,949          0          0          0          0          0          0          0 |     1,949 
                Other |       456         57          0          0          0          6          0          0          0          0          0          0          0          0 |       519 
       Apprenticeship |         0          0      1,840          0          0          0          0          0          0          0          0          0          0          0 |     1,840 
           Employment |         0          0          0          0          0          0          0          0          0      1,403        166        103        585      1,498 |     7,247 
    Out of employment |         0          0          0          0          0          0          0          0          0          0          0          0          0          0 |     5,205 
             Combined |       743          0          0          0          0          0          0          0          0          0          0          0          0          0 |       743 
                    . |        10          2          0          0          0          0          0          0          0          0          0          0          0          0 |        12 
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
                Total |     6,557        649      1,840        573         46          6      1,949        593        343      1,403        166        103        585      1,498 |    25,008 


                      |                                spell type (second level)
              robtype | other sec  maternity  voluntary  work & tr  unemploym  housewife  incapacit  other act |     Total
----------------------+----------------------------------------------------------------------------------------+----------
      Lower secondary |         0          0          0          0          0          0          0          0 |     2,599 
Intermediate secondar |         0          0          0          0          0          0          0          0 |     1,828 
      Upper secondary |         0          0          0          0          0          0          0          0 |     3,066 
             Tertiary |         0          0          0          0          0          0          0          0 |     1,949 
                Other |         0          0          0          0          0          0          0          0 |       519 
       Apprenticeship |         0          0          0          0          0          0          0          0 |     1,840 
           Employment |     2,946         87        459          0          0          0          0          0 |     7,247 
    Out of employment |         0          0          0        358        801         51         47      3,948 |     5,205 
             Combined |         0          0          0          0          0          0          0          0 |       743 
                    . |         0          0          0          0          0          0          0          0 |        12 
----------------------+----------------------------------------------------------------------------------------+----------
                Total |     2,946         87        459        358        801         51         47      3,948 |    25,008 

. 
. 
. // it seems as if don't know and no answer in y6_s1_sit2a,is general education or second chance (see y6_ylhcs_spt2), so I'd recode the missings in spelltype to 'other'
. replace robtype  = 5 if robtype ==. 
(12 real changes made)

. 
. 
. 
. tab robtype spelltype, m 

                      |                                        spelltype
              robtype | Lower sec  Intermedi  Upper sec   Tertiary      Other  Apprentic  Employmen  Out of em |     Total
----------------------+----------------------------------------------------------------------------------------+----------
      Lower secondary |     2,599          0          0          0          0          0          0          0 |     2,599 
Intermediate secondar |         0      1,828          0          0          0          0          0          0 |     1,828 
      Upper secondary |         0          0      3,066          0          0          0          0          0 |     3,066 
             Tertiary |         0          0          0      1,949          0          0          0          0 |     1,949 
                Other |         0          0          0          0        531          0          0          0 |       531 
       Apprenticeship |         0          0          0          0          0      1,840          0          0 |     1,840 
           Employment |         0          0          0          0          0          0      7,247          0 |     7,247 
    Out of employment |         0          0          0          0          0          0          0      5,205 |     5,205 
             Combined |        21        432        290          0          0          0          0          0 |       743 
----------------------+----------------------------------------------------------------------------------------+----------
                Total |     2,620      2,260      3,356      1,949        531      1,840      7,247      5,205 |    25,008 

. tab spelltype y6_s1_sit2a

                      |                                                        1s1: which school-type did or do you attend
            spelltype | dont know  no answer  not appli  lower sec  intermedi  combined   upper sec  higher se  combined   combined   combined   combined   school fo  rudolf-st |     Total
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
      Lower secondary |         0          0      1,916        683          0          0          0          0          0          0          0          0          0          0 |     2,620 
Intermediate secondar |         0          0         39          0      1,550         92          0          0         30         16         50         51          0          0 |     2,260 
      Upper secondary |         0          0        190          0          0          0      2,456        420          0          0          0          0          0         45 |     3,356 
             Tertiary |         0          0      1,949          0          0          0          0          0          0          0          0          0          0          0 |     1,949 
                Other |         5          5         65          0          0          0          0          0          0          0          0          0         62          0 |       531 
       Apprenticeship |         0          0      1,840          0          0          0          0          0          0          0          0          0          0          0 |     1,840 
           Employment |         0          0      7,247          0          0          0          0          0          0          0          0          0          0          0 |     7,247 
    Out of employment |         0          0      5,205          0          0          0          0          0          0          0          0          0          0          0 |     5,205 
----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+----------
                Total |         5          5     18,451        683      1,550         92      2,456        420         30         16         50         51         62         45 |    25,008 


                      |            1s1: which school-type did or do you attend
            spelltype | comprehen  combined   combined   combined   combined   other gen |     Total
----------------------+------------------------------------------------------------------+----------
      Lower secondary |         0          0         21          0          0          0 |     2,620 
Intermediate secondar |       273         44          0        115          0          0 |     2,260 
      Upper secondary |         0          0          0          0        245          0 |     3,356 
             Tertiary |         0          0          0          0          0          0 |     1,949 
                Other |         0          0          0          0          0        394 |       531 
       Apprenticeship |         0          0          0          0          0          0 |     1,840 
           Employment |         0          0          0          0          0          0 |     7,247 
    Out of employment |         0          0          0          0          0          0 |     5,205 
----------------------+------------------------------------------------------------------+----------
                Total |       273         44         21        115        245        394 |    25,008 

. 
. 
. 
. ** if ongoing, take the date (month) of the interview as month (if month is missing)
. br *id y6_ylhcs_index  *m *y *ongoing *correction *tp if endm<0 | begm<0 

. 
. //Q: in the variable y6_ylhcs_ongoing  it says sometimes "correction of end date" but I do not know whether they actually corrected the variable and where to find this information??  
. 
. * see e.g. this person 
. br *id y6_ylhcs_index  *m *y *ongoing *correction *tp if youthid== 20140217

. 
. 
. * missing/no answer/ don't know but still ongoing --> interviewmonth and interviewyear (kind of censoring)
. replace endm  = intmonth if y6_ylhcs_ongoing == 1 & y6_ylhcs_enddatm  < 0  |  y6_ylhcs_enddatm >12 & y6_ylhcs_ongoing == 1 
(10 real changes made)

. replace endy  = inty if y6_ylhcs_ongoing == 1 & y6_ylhcs_enddaty  < 0 
(0 real changes made)

. 
. 
. * consider missings using 
. fre y6_ylhcs_ongoing 

y6_ylhcs_ongoing -- spell is still ongoing
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   1 yes |       6456      25.82      25.82      25.82
        2 no  |      18552      74.18      74.18     100.00
        Total |      25008     100.00     100.00           
-----------------------------------------------------------

. fre y6_ylhcs_tp

y6_ylhcs_tp -- technical problem in longitudinal section
---------------------------------------------------------------------------------------
                                          |      Freq.    Percent      Valid       Cum.
------------------------------------------+--------------------------------------------
Valid   0 case correct                    |      24978      99.88      99.88      99.88
        1 longitudinal section incomplete |         30       0.12       0.12     100.00
        Total                             |      25008     100.00     100.00           
---------------------------------------------------------------------------------------

. fre y6_ylhcs_correction

y6_ylhcs_correction -- correction in check module
--------------------------------------------------------------------------------------------------------
                                                           |      Freq.    Percent      Valid       Cum.
-----------------------------------------------------------+--------------------------------------------
Valid   0 no correction of date or indicator 'spell is     |      24062      96.22      96.22      96.22
          still ongoing'                                   |                                            
        1 correction of start date                         |        187       0.75       0.75      96.96
        2 correction of end date                           |        364       1.46       1.46      98.42
        3 correction of start and end date                 |         85       0.34       0.34      98.76
        4 correction of indicator 'spell is still ongoing' |        210       0.84       0.84      99.60
        5 correction of end date and indicator 'spell is   |         94       0.38       0.38      99.98
          still ongoing'                                   |                                            
        6 correction of start date, end date, and          |          6       0.02       0.02     100.00
          indicator 'spell is still ongoing'               |                                            
        Total                                              |      25008     100.00     100.00           
--------------------------------------------------------------------------------------------------------

. 
. 
. * replace unspecific information on the month for beginning and ending month and set to missing
. global dates "begm endm  begy endy birthdm birthdy"

. 
. foreach val of global dates {
  2. recode `val'  (21 = 2 ) (24 = 4 ) (27 = 7) (30 = 9) (32 = 11) (-99 -88 -55 -22 -44 = .)
  3. }
(1,752 changes made to begm)
(1,048 changes made to endm)
(16 changes made to begy)
(15 changes made to endy)
(6 changes made to birthdm)
(6 changes made to birthdy)

. 
. 
. //  my idea here is that there are five categories/periods meaning the year is split up into 2,5 months per period so first January- mid March so I always took the month "in the middle" , in thi
> s case February (other suggestions for coding are welcome!)
. 
. /*
>         21  beginning of year/winter  --> February
>         24  spring                    --> April
>         27  mid-year/summer           --> July
>         30  autumn                    --> September
>         32  end of year                           --> November
> */ 
. 
. ** another option would be to take the end of the last spell as the beginning of the next.... ? but there may (I did actually not check yet) be gaps between spells??  
. 
. 
. * Change data to century month  //the e_m monthly date (months since 1960m1) corresponding to year Y, month M 
. 
. * Beginning of a spell in cm 
. gen begincm = ym(begy, begm)
(47 missing values generated)

.  
. * End of a spell in cm
. gen endcm = ym(endy, endm)
(23 missing values generated)

. 
. * Year and month of birth in cm  (not sure if this is relevant but more specific than year of birth)
. gen birthcm = ym( birthdy, birthdm)
(6 missing values generated)

. 
. * get the earliest and the latest cm we observe an individual (that is the range of our observations (in months))
. egen minbegincm = min(begincm)

. egen maxendcm   = max(endcm)

. 
. dis  maxendcm -  minbegincm   // 210 
210

. 
. 
. br *id *ongoing* *enddat* *begdat* *cm* begy begm endy endm if youthid== 20040214 & index==5 

. br *id  *enddat* *ongoing* *begdat*  begy begm endy endm if youthid== 20040214 & index==5 

. br *id  *enddat* *ongoing* *begdat*  begy begm endy endm if youthid== 22018010  & index==1 

. 
. 
. 
. unique(youthid)
Number of unique values of youthid is  5074
Number of records is  25008

. /*
> Number of unique values of youthid is  5074
> Number of records is  25008
> */
. 
. * Check missings
. count if endcm==.
  23

. count if begincm==.
  47

. count if endcm & begincm==.
  47

. 
. 
. ************************************************************************
. **# Bookmark 3. Globals for spell data preparation   *******************
. ************************************************************************
.  
. 
. global pid                          youthid                                     /** Identifier for individuals in spell datafile **/

. global spellnr                  y6_ylhcs_index              /** Identifier for spells of each person **/

. global spelltype                spelltype                       /** spelltype of spells which will be used for splitting **/

. global spells                   "1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 "      /** Spells: values of variable spelltype (see cre
> ation above)  **/

. global begin                    begincm                             /** Begin of spells **/

. global end                              endcm                                   /** End of spells **/

. 
. 
. sort ${pid} ${begin} ${end} ${spelltype} 

. order ${pid} ${begin} ${end} ${spelltype} 

. 
. 
. 
. ************************************************************************
. **# Bookmark 4.   Spell data preparation *******************************
. ************************************************************************
. 
. 
. * Adjust the endings of all spells to be exclusive (which means the last months is not the last month e.g. in school but the month after (important for duration)) 
. bysort ${pid} (${begin} ${end}): replace ${end} = ${end} + 1 if ${end} > 0 
(24,985 real changes made)

. 
. 
. * Generate a duration variable (in months)
. gen duration = ${end} - ${begin} 
(56 missing values generated)

. order ${pid} ${begin} ${end} ${spelltype}  duration *ongoing* *enddat* *begdat* 

. br ${pid} ${begin} ${end} ${spelltype}  duration *ongoing*  *enddat* *begdat*  

. 
. *if beginning or end of a spell is missing, the duration of a spell is set as zero month and the spell will not be expanded
. replace duration = 0 if ${end} ==. | ${begin} ==.
(56 real changes made)

. replace duration = 0 if duration <0   // there is one spell for which the duration is negative (youthid== 22018010  & index==1), in my opinion, this is a mistake in the data, since mid-year/summ
> er is earlier than october??  --> recoded to 0 
(1 real change made)

. 
. fre duration

duration
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   0     |         57       0.23       0.23       0.23
        1     |       2086       8.34       8.34       8.57
        2     |       2296       9.18       9.18      17.75
        3     |       1643       6.57       6.57      24.32
        4     |        995       3.98       3.98      28.30
        5     |        793       3.17       3.17      31.47
        6     |        997       3.99       3.99      35.46
        7     |        769       3.08       3.08      38.53
        8     |        655       2.62       2.62      41.15
        9     |        538       2.15       2.15      43.30
        10    |        614       2.46       2.46      45.76
        11    |        800       3.20       3.20      48.96
        12    |       1013       4.05       4.05      53.01
        13    |        686       2.74       2.74      55.75
        14    |        224       0.90       0.90      56.65
        15    |        152       0.61       0.61      57.25
        16    |        135       0.54       0.54      57.79
        17    |        174       0.70       0.70      58.49
        18    |        265       1.06       1.06      59.55
        19    |        289       1.16       1.16      60.70
        :     |          :          :          :          :
        140   |          2       0.01       0.01      99.73
        141   |          5       0.02       0.02      99.75
        142   |          3       0.01       0.01      99.76
        143   |          9       0.04       0.04      99.80
        144   |          5       0.02       0.02      99.82
        145   |          4       0.02       0.02      99.84
        151   |          1       0.00       0.00      99.84
        153   |          4       0.02       0.02      99.86
        154   |          6       0.02       0.02      99.88
        155   |          6       0.02       0.02      99.90
        156   |         10       0.04       0.04      99.94
        157   |          5       0.02       0.02      99.96
        158   |          1       0.00       0.00      99.97
        162   |          1       0.00       0.00      99.97
        167   |          2       0.01       0.01      99.98
        168   |          1       0.00       0.00      99.98
        169   |          1       0.00       0.00      99.99
        171   |          1       0.00       0.00      99.99
        176   |          1       0.00       0.00     100.00
        197   |          1       0.00       0.00     100.00
        Total |      25008     100.00     100.00           
-----------------------------------------------------------

. 
. * multiply/expand each spell according to its duration 
. expand duration
(57 zero counts ignored; observations not deleted)
(598,762 observations created)

. 
. 
. * adjust the beginning of all spells that the duration of each subspell of an original spell amounts to one months 
. bysort ${pid} ${spellnr} (${begin} ${end}): replace ${begin} = ${begin}[_n-1] + 1 if ${begin}[_n-1]!= .
(598,762 real changes made)

.  
. * adjust the ending so that the ending of each subspell equals to the beginning of the next subspell 
. replace ${end} = ${begin} + 1 if ${begin}!=. 
(598,772 real changes made)

. 
. 
. drop duration 

. order ${pid} ${begin} ${end} ${spellnr} ${spelltype}

.  
. save "$TEMP\spelldata.dta", replace 
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata.dta saved

. 
. 
. 
. ************************************************************************
. **# Bookmark 5.  Panel data preparation  *******************************
. ************************************************************************
. 
. * Create a "blanco" dataset with youthid and N total observations (see dis  maxendcm -  minbegincm) to merge the spelldata with 
. 
. * Dataset  education and profession 
. use "$DATA/w6_ylhcs_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. 
. 
. * Define some globals 
. global startcm 469  // start date of the earliest time observed (see minbegincm above)

. global expansion 211 // whole observation period of the sample (see dis  maxendcm -  minbegincm   // 210  above (I made 211 just to be sure))

. 
. 
. * identify the first spell of each individual (tag =1 ) 
. bys ${pid}(y6_ylhcs_index): gen tag= _n ==1

. 
. * keep only one row for each individual
. keep if tag ==1 
(19,934 observations deleted)

. keep ${pid} 

. unique(${pid})
Number of unique values of youthid is  5074
Number of records is  5074

. expand ${expansion}    
(1,065,540 observations created)

. sort ${pid} 

. 
. gen begincm= ${startcm}

. 
. 
. * create a month starting from the first month anyone was observed and ending with the last month anyone was observed (practically like code above)
. bysort ${pid}  (${begin} ): replace ${begin} = ${begin}[_n-1] + 1 if ${begin}[_n-1]!= .
(1,065,540 real changes made)

. 
. gen endcm= 0

. * adjust the ending so that the ending of each subspell equals to the beginning of the next subspell 
. replace ${end} = ${begin} + 1 if ${begin}!=. 
(1,070,614 real changes made)

. 
. 
. save "$TEMP\paneldata.dta", replace
file C:\Users\hornunma\Desktop\DATA\TEMP\paneldata.dta saved

. 
. 
. 
. ************************************************************************
. **# Bookmark 6.   Merging    *******************************************
. ************************************************************************
. 
. use "$TEMP\spelldata.dta", clear  
(30 Jul 2021)

. 
. 
. ** Generate a variable indicating the educational/spelltype status for each index/spell (in this case total 17 = (max)y6_ylhcs_index))
. * generate a variable for each possible value of ${spelltype}  (22 values)
. forvalues i = 1(1)17 {
  2. clonevar spell_edu`i' =  ${spelltype}  if index ==`i'
  3.  display `i'
  4. }
(262,763 missing values generated)
1
(514,026 missing values generated)
2
(558,483 missing values generated)
3
(583,330 missing values generated)
4
(600,320 missing values generated)
5
(612,558 missing values generated)
6
(617,629 missing values generated)
7
(620,518 missing values generated)
8
(622,297 missing values generated)
9
(622,840 missing values generated)
10
(623,350 missing values generated)
11
(623,531 missing values generated)
12
(623,676 missing values generated)
13
(623,729 missing values generated)
14
(623,744 missing values generated)
15
(623,758 missing values generated)
16
(623,768 missing values generated)
17

. 
. 
. save "$TEMP\spelldata_short.dta", replace 
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_short.dta saved

. 
. 
. ** here, I create one separate dataset for each spell (because sometimes spells overlap which means merge doesn't work if we'd do it with the complete dataset)
. forvalues i = 1(1)17 {
  2.         use "$TEMP\spelldata_short.dta", clear  
  3.         keep if index==`i'
  4.         keep youthid begincm endcm birthcm index  spell_edu`i'           // add here any variables you'd want to keep from the spelldataset 
  5.         clonevar index`i' =  index
  6.         drop index
  7.         save "$TEMP\spelldata_`i'.dta", replace
  8.  display `i'
  9. }
(30 Jul 2021)
(262,763 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_1.dta saved
1
(30 Jul 2021)
(514,026 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_2.dta saved
2
(30 Jul 2021)
(558,483 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_3.dta saved
3
(30 Jul 2021)
(583,330 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_4.dta saved
4
(30 Jul 2021)
(600,320 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_5.dta saved
5
(30 Jul 2021)
(612,558 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_6.dta saved
6
(30 Jul 2021)
(617,629 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_7.dta saved
7
(30 Jul 2021)
(620,518 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_8.dta saved
8
(30 Jul 2021)
(622,297 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_9.dta saved
9
(30 Jul 2021)
(622,840 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_10.dta saved
10
(30 Jul 2021)
(623,350 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_11.dta saved
11
(30 Jul 2021)
(623,531 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_12.dta saved
12
(30 Jul 2021)
(623,676 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_13.dta saved
13
(30 Jul 2021)
(623,729 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_14.dta saved
14
(30 Jul 2021)
(623,744 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_15.dta saved
15
(30 Jul 2021)
(623,758 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_16.dta saved
16
(30 Jul 2021)
(623,768 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_17.dta saved
17

. 
. 
. use  "$TEMP\paneldata.dta", clear 
(30 Jul 2021)

. 
. * merge each separate spell dataset to the 'blanco' dataset created above
. forvalues i = 1(1)17 {
  2. merge 1:1 ${pid} ${begin}  using "$TEMP\spelldata_`i'.dta", gen(mergepanel`i')
  3. display `i'
  4. }
(label youthid already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       709,627
        from master                   709,617  (mergepanel1==1)
        from using                         10  (mergepanel1==2)

    Matched                           360,997  (mergepanel1==3)
    -----------------------------------------
1
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       960,888
        from master                   960,884  (mergepanel2==1)
        from using                          4  (mergepanel2==2)

    Matched                           109,740  (mergepanel2==3)
    -----------------------------------------
2
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,005,363
        from master                 1,005,352  (mergepanel3==1)
        from using                         11  (mergepanel3==2)

    Matched                            65,276  (mergepanel3==3)
    -----------------------------------------
3
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,030,205
        from master                 1,030,202  (mergepanel4==1)
        from using                          3  (mergepanel4==2)

    Matched                            40,437  (mergepanel4==3)
    -----------------------------------------
4
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,047,204
        from master                 1,047,198  (mergepanel5==1)
        from using                          6  (mergepanel5==2)

    Matched                            23,444  (mergepanel5==3)
    -----------------------------------------
5
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,059,444
        from master                 1,059,440  (mergepanel6==1)
        from using                          4  (mergepanel6==2)

    Matched                            11,208  (mergepanel6==3)
    -----------------------------------------
6
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,064,513
        from master                 1,064,512  (mergepanel7==1)
        from using                          1  (mergepanel7==2)

    Matched                             6,140  (mergepanel7==3)
    -----------------------------------------
7
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,067,401
        from master                 1,067,401  (mergepanel8==1)
        from using                          0  (mergepanel8==2)

    Matched                             3,252  (mergepanel8==3)
    -----------------------------------------
8
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,069,180
        from master                 1,069,180  (mergepanel9==1)
        from using                          0  (mergepanel9==2)

    Matched                             1,473  (mergepanel9==3)
    -----------------------------------------
9
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,069,723
        from master                 1,069,723  (mergepanel10==1)
        from using                          0  (mergepanel10==2)

    Matched                               930  (mergepanel10==3)
    -----------------------------------------
10
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,233
        from master                 1,070,233  (mergepanel11==1)
        from using                          0  (mergepanel11==2)

    Matched                               420  (mergepanel11==3)
    -----------------------------------------
11
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,414
        from master                 1,070,414  (mergepanel12==1)
        from using                          0  (mergepanel12==2)

    Matched                               239  (mergepanel12==3)
    -----------------------------------------
12
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,559
        from master                 1,070,559  (mergepanel13==1)
        from using                          0  (mergepanel13==2)

    Matched                                94  (mergepanel13==3)
    -----------------------------------------
13
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,612
        from master                 1,070,612  (mergepanel14==1)
        from using                          0  (mergepanel14==2)

    Matched                                41  (mergepanel14==3)
    -----------------------------------------
14
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,627
        from master                 1,070,627  (mergepanel15==1)
        from using                          0  (mergepanel15==2)

    Matched                                26  (mergepanel15==3)
    -----------------------------------------
15
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,641
        from master                 1,070,641  (mergepanel16==1)
        from using                          0  (mergepanel16==2)

    Matched                                12  (mergepanel16==3)
    -----------------------------------------
16
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,651
        from master                 1,070,651  (mergepanel17==1)
        from using                          0  (mergepanel17==2)

    Matched                                 2  (mergepanel17==3)
    -----------------------------------------
17

. 
. 
. order ${pid}  ${begin}  ${end} spell_edu* merge* 

. br

. br if  ${begin}  ==. 

. 
. 
. * create a variable to see how many spells match with a cm info (could be >1 if spells overlap)
. egen matched = anycount(mergepanel1- mergepanel17), values(3)  

. br ${pid}  ${begin}  ${end} spell_edu* merge* matched 

. 
. 
. * drop if we have no information on a spell during that month 
. drop if matched == 0
(516,833 observations deleted)

. drop index* mergepanel* 

. 
. 
. * make sure to have no duplicates (not several rows with the same starting month)
. unique(${pid}  ${begin})
Number of unique values of youthid begincm is  553820
Number of records is  553820

. duplicates report  ${pid}  

Duplicates in terms of youthid

--------------------------------------
   Copies | Observations       Surplus
----------+---------------------------
        1 |            1             0
        3 |            3             2
        4 |            4             3
        8 |            8             7
       10 |           10             9
       11 |           11            10
       13 |           13            12
       15 |           15            14
       16 |           16            15
       23 |           23            22
       24 |           48            46
       25 |           50            48
       27 |           27            26
       28 |           28            27
       31 |           31            30
       33 |          132           128
       34 |           68            66
       35 |           70            68
       38 |           76            74
       39 |           39            38
       42 |          126           123
       43 |           86            84
       44 |          220           215
       45 |           45            44
       46 |           92            90
       47 |          141           138
       48 |          240           235
       49 |           49            48
       50 |           50            49
       51 |           51            50
       53 |           53            52
       54 |           54            53
       55 |          220           216
       56 |          224           220
       57 |          342           336
       58 |          406           399
       59 |          708           696
       60 |          540           531
       61 |          793           780
       62 |         1922          1891
       63 |         1953          1922
       64 |         1344          1323
       65 |         2340          2304
       66 |         3564          3510
       67 |         5695          5610
       68 |         4556          4489
       69 |         3243          3196
       70 |         3990          3933
       71 |         4757          4690
       72 |         3168          3124
       73 |         2920          2880
       74 |          666           657
       75 |          525           518
       76 |          304           300
       77 |          154           152
       78 |         1716          1694
       79 |         4108          4056
       80 |         2160          2133
       81 |         2187          2160
       82 |         2870          2835
       83 |         3154          3116
       84 |         2436          2407
       85 |         1445          1428
       86 |          774           765
       87 |          609           602
       88 |          176           174
       89 |          178           176
       90 |         2610          2581
       91 |         6097          6030
       92 |         5428          5369
       93 |         5766          5704
       94 |         3948          3906
       95 |         6365          6298
       96 |         5664          5605
       97 |         3492          3456
       98 |         1078          1067
       99 |          297           294
      100 |          400           396
      101 |          505           500
      102 |         5508          5454
      103 |         9785          9690
      104 |         8112          8034
      105 |         9240          9152
      106 |        11554         11445
      107 |        15087         14946
      108 |        10908         10807
      109 |         7848          7776
      110 |         1760          1744
      111 |          666           660
      112 |          896           888
      113 |          904           896
      114 |        14820         14690
      115 |        34960         34656
      116 |        32944         32660
      117 |        24219         24012
      118 |        25606         25389
      119 |        28917         28674
      120 |        21840         21658
      121 |        14399         14280
      122 |         3172          3146
      123 |          615           610
      124 |          372           369
      125 |         1125          1116
      126 |         4284          4250
      127 |         9398          9324
      128 |        12160         12065
      129 |        10191         10112
      130 |        13520         13416
      131 |        21877         21710
      132 |        14256         14148
      133 |         8246          8184
      134 |         2144          2128
      135 |          135           134
      136 |          408           405
      138 |         1380          1370
      139 |         2085          2070
      140 |         2380          2363
      141 |         3102          3080
      142 |         4686          4653
      143 |         5863          5822
      144 |         6192          6149
      145 |         2610          2592
      146 |          292           290
      148 |          296           294
      151 |          906           900
      152 |         1064          1057
      153 |          306           304
      154 |         1386          1377
      155 |         1705          1694
      156 |         1716          1705
      157 |          942           936
      162 |         1458          1449
      163 |         2934          2916
      164 |         1148          1141
      165 |         1650          1640
      166 |         1494          1485
      167 |         1670          1660
      168 |         2016          2004
      169 |         1521          1512
      171 |          171           170
      172 |          172           171
      173 |          173           172
      174 |          348           346
      175 |          525           522
      176 |         1056          1050
      177 |          708           704
      178 |         1424          1416
      179 |         1790          1780
      180 |         1080          1074
      181 |          362           360
      187 |          374           372
      188 |          564           561
      189 |          567           564
      190 |          190           189
      191 |          573           570
      192 |          192           191
      197 |          394           392
      198 |          594           591
      208 |          208           207
--------------------------------------

. 
. 
. * Add some time variables (for the year and months of spell) 
. clonevar dm = ${begin}  
(8 missing values generated)

. * to year and month data 
. format %tm dm

. format dm %10.0g

. gen date = dofm(dm)
(8 missing values generated)

. 
. format date %d

. gen month=month(date)
(8 missing values generated)

. gen yr=year(date)
(8 missing values generated)

. 
. 
. drop date

. rename dm date 

. format %tm date

. 
. 
. * Add some time variables (for the year and months of birthday) 
. egen birthmax = max(birthcm), by(${pid})
(2,913 missing values generated)

. drop birthcm 

. rename birthmax birthcm 

. 
. clonevar  dm = birthcm 
(2,913 missing values generated)

. * to year and month data 
. format %tm dm

. format dm %10.0g

. gen birthdate = dofm(dm)
(2,913 missing values generated)

. 
. format birthdate %d

. gen birthmonth=month(birthdate)
(2,913 missing values generated)

. gen birthyr=year(birthdate)
(2,913 missing values generated)

. 
. drop birthdate

. rename dm birthdate 

. format %tm birthdate

. 
. 
. * Add information on the age 
. 
. gen agecm = begincm - birthcm
(2,921 missing values generated)

. 
. *age in years with decimals
. gen age = agecm/12 
(2,921 missing values generated)

. gen dismonth= age- (yr- birthyr)
(2,921 missing values generated)

. replace dismonth = age+1 - (yr- birthyr) if month < birthmonth //for people where the calculation above doesn't work because the months reported is before their birthday in that year 
(253,484 real changes made)

. gen dismonth_new = dismonth*12
(2,921 missing values generated)

. 
. *age in months (rounded)
. gen age_month = round(dismonth_new ,0.01)
(2,921 missing values generated)

. 
. *age in years (full numbers)
. gen age_year = age - dismonth 
(2,921 missing values generated)

. 
. 
. drop dismonth* 

. 
. 
. order ${pid}  ${begin}  ${end}  spell_edu* matched date yr month birthcm birthd* birthy* birthm* agecm age age_y* age_m* 

. 
. 
. 
. 
. * Generate time and age of first observation per individual
. bysort youthid: egen frst_month = min(begincm)
(1 missing value generated)

. bysort youthid: egen frst_year = min(yr)
(1 missing value generated)

. bysort youthid: egen frst_age = min(age)
(2,914 missing values generated)

. 
. * Checking first age - most have age 10, which makes sense
. kdensity frst_age

. 
. * Question: what to do with the others?
. gen frst_age_flag = frst_age < 7

. replace frst_age_flag = 2 if frst_age >15
(36,090 real changes made)

. label define flag 0 "Normal first age" 1 "Below 7" 2 "Above 15", replace

. label values frst_age_flag flag

. 
. 
. * Checking what they are doing
. ta spell_edu1 frst_age_flag, col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

                      |          frst_age_flag
           spell_edu1 | Normal fi    Below 7   Above 15 |     Total
----------------------+---------------------------------+----------
      Lower secondary |    35,057      2,726      2,722 |    40,505 
                      |     10.54      18.31      19.94 |     11.22 
----------------------+---------------------------------+----------
Intermediate secondar |   114,682      4,629      2,741 |   122,052 
                      |     34.50      31.08      20.08 |     33.81 
----------------------+---------------------------------+----------
      Upper secondary |   176,304      6,546      4,716 |   187,566 
                      |     53.03      43.96      34.54 |     51.96 
----------------------+---------------------------------+----------
             Tertiary |       183         20        167 |       370 
                      |      0.06       0.13       1.22 |      0.10 
----------------------+---------------------------------+----------
                Other |     4,960        934        349 |     6,243 
                      |      1.49       6.27       2.56 |      1.73 
----------------------+---------------------------------+----------
       Apprenticeship |       763         37      2,125 |     2,925 
                      |      0.23       0.25      15.56 |      0.81 
----------------------+---------------------------------+----------
           Employment |       367          0        376 |       743 
                      |      0.11       0.00       2.75 |      0.21 
----------------------+---------------------------------+----------
    Out of employment |       138          0        457 |       595 
                      |      0.04       0.00       3.35 |      0.16 
----------------------+---------------------------------+----------
                Total |   332,454     14,892     13,653 |   360,999 
                      |    100.00     100.00     100.00 |    100.00 

. ta spell_edu1 if frst_age_flag==1 // more likely to be in Rudolf Steiner school

            spell_edu1 |      Freq.     Percent        Cum.
-----------------------+-----------------------------------
       Lower secondary |      2,726       18.31       18.31
Intermediate secondary |      4,629       31.08       49.39
       Upper secondary |      6,546       43.96       93.35
              Tertiary |         20        0.13       93.48
                 Other |        934        6.27       99.75
        Apprenticeship |         37        0.25      100.00
-----------------------+-----------------------------------
                 Total |     14,892      100.00

. ta spell_edu1 if frst_age_flag==2 // more likely to be in an apprenticeship

            spell_edu1 |      Freq.     Percent        Cum.
-----------------------+-----------------------------------
       Lower secondary |      2,722       19.94       19.94
Intermediate secondary |      2,741       20.08       40.01
       Upper secondary |      4,716       34.54       74.56
              Tertiary |        167        1.22       75.78
                 Other |        349        2.56       78.33
        Apprenticeship |      2,125       15.56       93.90
            Employment |        376        2.75       96.65
     Out of employment |        457        3.35      100.00
-----------------------+-----------------------------------
                 Total |     13,653      100.00

. 
. 
. 
. 
. save "$TEMP\educ.dta", replace 
(file C:\Users\hornunma\Desktop\DATA\TEMP\educ.dta not found)
file C:\Users\hornunma\Desktop\DATA\TEMP\educ.dta saved

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. /*
> 
> 
> 
> * Generate cm for all novembers from 2013-2019
> 
> forval year = 2013/2019 {
>     gen nov_`year' = ym(`year',11)
> }
> 
> 
> * Set the cm start for each individual depending on when they were born 
> // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
> 
> 
> gen start = .
> 
> forval year = 2013/2019 {
>     local month = `year' - 1991
>     replace start = nov_`year' if birthyr == 1991 + `month' & birthmonth <= 6
>     replace start = nov_`year' + 1 if birthyr == 1991 + `month' & birthmonth > 6
> }
> 
> 
> 
> * Set the end date of each individual as well (november again)  (WHAT AGE?? )
> gen end = .
> replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
> replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
> 
> replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
> replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
> 
> replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
> replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
> 
> replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
> replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
> 
> replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
> replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
> 
> replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
> replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 

end of do-file

. br

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. * Generate cm for all novembers from 2013-2019
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. gen start = .
(553,820 missing values generated)

. 
. forval year = 2013/2019 {
  2.     local month = `year' - 1991
  3.     replace start = nov_`year' if birthyr == 1991 + `month' & birthmonth <= 6
  4.     replace start = nov_`year' + 1 if birthyr == 1991 + `month' & birthmonth > 6
  5. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. 
end of do-file

. drop start

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2013-2019
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. 
. forval nov_`year'= 2013/2019 {
  2.     local month = nov_`year' - 1991
  3.     replace start = nov_`year' if birthyr == 1991 + `month' & birthmonth <= 6
  4.     replace start = nov_`year' + 1 if birthyr == 1991 + `month' & birthmonth > 6
  5. }
nov_ ambiguous abbreviation
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2013-2019
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. 
. forval year = 2013/2019 {
  2.     local month = `year' - 1991
  3.     replace start = nov_`year' if birthyr == 1991 + `month' & birthmonth <= 6
  4.     replace start = nov_`year' + 1 if birthyr == 1991 + `month' & birthmonth > 6
  5. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. 
. 
. 
end of do-file

. fre birthyr

birthyr
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   1992  |        226       0.04       0.04       0.04
        1993  |       1506       0.27       0.27       0.31
        1994  |     135213      24.41      24.54      24.86
        1995  |     205018      37.02      37.21      62.07
        1996  |     207492      37.47      37.66      99.74
        1997  |       1452       0.26       0.26     100.00
        Total |     550907      99.47     100.00           
Missing .     |       2913       0.53                      
Total         |     553820     100.00                      
-----------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. forval year = 2013/2019 {
  2.     local month = `year' - 1991
  3.     replace start = nov_`year' if birthyr == 1991  & birthmonth <= 6
  4.     replace start = nov_`year' + 1 if birthyr == 1991  & birthmonth > 6
  5. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace start = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2019 if birthyr == 1997  & birthmonth > 6 
(323 real changes made)

. 
. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br nov_* start birthyr birthmonth 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br nov_* start birthyr birthmonth age 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm nov_* start birthyr birthmonth age 

. 
end of do-file

. fre birthyr

birthyr
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   1992  |        226       0.04       0.04       0.04
        1993  |       1506       0.27       0.27       0.31
        1994  |     135213      24.41      24.54      24.86
        1995  |     205018      37.02      37.21      62.07
        1996  |     207492      37.47      37.66      99.74
        1997  |       1452       0.26       0.26     100.00
        Total |     550907      99.47     100.00           
Missing .     |       2913       0.53                      
Total         |     553820     100.00                      
-----------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace start = nov_2003 if birthyr == 1992  & birthmonth <= 6 
nov_2003 not found
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
nov_2004 not found
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }
variable nov_2013 already defined
r(110);

end of do-file

r(110);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm nov_* start birthyr birthmonth age 

. 
end of do-file

. tab age if start = begincm
invalid syntax
r(198);

.  tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. br if age >13 if start == begincm
invalid syntax
r(198);

.  br if age >13 & start == begincm

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen min_begincm = min(begincm), by(youthid)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid: egen tag = 1 if _n==1
unknown egen function 1()
r(133);

end of do-file

r(133);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid: gen tag = 1 if _n==1
(440,335 missing values generated)

. 
end of do-file

. ´br
´br is not a valid command name
r(199);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen  start - min_begincm  if tag == 1 
variable start already defined
r(110);

end of do-file

r(110);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen missing_start =   start - min_begincm  if tag == 1 
(440,335 missing values generated)

. 
end of do-file

. fre missing_start

missing_start
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   -100  |          1       0.00       0.02       0.02
        -94   |          1       0.00       0.02       0.04
        -87   |          1       0.00       0.02       0.06
        -81   |          1       0.00       0.02       0.08
        -80   |          1       0.00       0.02       0.10
        -76   |          1       0.00       0.02       0.12
        -73   |          1       0.00       0.02       0.14
        -70   |          1       0.00       0.02       0.16
        -69   |          1       0.00       0.02       0.18
        -68   |          2       0.00       0.04       0.22
        -66   |          1       0.00       0.02       0.24
        -63   |          1       0.00       0.02       0.26
        -62   |          1       0.00       0.02       0.28
        -58   |          3       0.00       0.06       0.34
        -57   |          8       0.00       0.16       0.50
        -56   |          3       0.00       0.06       0.56
        -54   |          1       0.00       0.02       0.58
        -51   |          3       0.00       0.06       0.64
        -50   |         32       0.01       0.64       1.27
        -49   |          2       0.00       0.04       1.31
        :     |          :          :          :          :
        -21   |         60       0.01       1.19      13.44
        -20   |         31       0.01       0.62      14.05
        -19   |          2       0.00       0.04      14.09
        -18   |          1       0.00       0.02      14.11
        -17   |          3       0.00       0.06      14.17
        -16   |          2       0.00       0.04      14.21
        -15   |         12       0.00       0.24      14.45
        -14   |         26       0.01       0.52      14.97
        -13   |          2       0.00       0.04      15.01
        -11   |          2       0.00       0.04      15.05
        -10   |         79       0.02       1.57      16.62
        -9    |         94       0.02       1.87      18.49
        -8    |         39       0.01       0.78      19.26
        -7    |          4       0.00       0.08      19.34
        -6    |          3       0.00       0.06      19.40
        -5    |          1       0.00       0.02      19.42
        -4    |          1       0.00       0.02      19.44
        -3    |         10       0.00       0.20      19.64
        -2    |          4       0.00       0.08      19.72
        0     |       4039       0.91      80.28     100.00
        Total |       5031       1.13     100.00           
Missing .     |     440335      98.87                      
Total         |     445366     100.00                      
-----------------------------------------------------------

. br

. drop missing_start

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen missing_start =   min_begincm - start   if tag == 1 
(440,335 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(4,039 zero counts ignored; observations not deleted)
(26,254 observations created)

. 
end of do-file

. bysort youthid
: required
r(100);

. sort youthid

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. sort youthid begincm 

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen tag2 if youthid= youthid[_n-1] & tag ==1 & tag[_n-1] ==. 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen tag2 = 1  if youthid= youthid[_n-1] & tag ==1 & tag[_n-1] ==. 
variable tag2 already defined
r(110);

end of do-file

r(110);

. drop tag2

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen tag2 = 1  if youthid= youthid[_n-1] & tag ==1 & tag[_n-1] ==. 
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen tag2 = 1  if youthid== youthid[_n-1] & tag ==1 & tag[_n-1] ==. 
(471,620 missing values generated)

. 
end of do-file

. drop tag2

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm: gen tag2 = 1  if youthid== youthid[_n-1] & tag ==1 & tag[_n-1] ==. 
(471,620 missing values generated)

. 
end of do-file

. drop tag2

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm: gen tag2 = 1  if youthid == youthid[_n+1] & tag ==1 & tag[_n+1] ==. 
(471,620 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag ==1 & tag[_n+1] ==. 
variable tag2 already defined
r(110);

end of do-file

r(110);

. drop tag2

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag ==1 & tag[_n+1] ==. 
(466,589 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. 
. forval year = 2013/2019 {
  2.     local month = `year' - 1991
  3.     replace start = nov_`year' if birthyr == 1991  & birthmonth <= 6
  4.     replace start = nov_`year' + 1 if birthyr == 1991  & birthmonth > 6
  5. }
nov_2013 not found
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * calculate the number of rows missing 
. 
. 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. gen missing_start =   min_begincm - start   if tag == 1 
(440,335 missing values generated)

. 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(4,039 zero counts ignored; observations not deleted)
(26,254 observations created)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(450,269 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * calculate the number of rows missing 
. 
. 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. gen missing_start =   min_begincm - start   if tag == 1 
(440,335 missing values generated)

. 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(4,039 zero counts ignored; observations not deleted)
(26,254 observations created)

. 
end of do-file

. br if youthid == 20010214

. br

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br if youthid == 20020204

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. sort youthid begincm 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br if youthid == 20020204

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(466,589 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid (begincm ): replace begincm = begincm [_n+1] - 1 if begincm [_n+1]!= . & tag1 == tag[_n+1]
weights not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm [_n+1] - 1 if begincm [_n+1]!= . & tag1 == tag[_n+1]
weights not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag[_n+1]
tag ambiguous abbreviation
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(26,254 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br if youthid == 20020204

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid  : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(25,652 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(24,663 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(23,685 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(22,708 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(21,730 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(20,755 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(19,785 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(18,854 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(18,018 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(17,258 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(16,500 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(15,741 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(14,985 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(14,256 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(13,540 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(12,827 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(12,117 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(11,406 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(10,698 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(10,019 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(9,401 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(8,865 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(8,332 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(7,801 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(7,281 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(6,815 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(6,363 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(5,910 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(5,460 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(5,010 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(4,563 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(4,140 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(3,777 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(3,492 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(3,207 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2,933 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2,660 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2,430 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2,211 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,992 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,777 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,561 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,350 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,130 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(995 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(922 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(846 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(777 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(709 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(675 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(643 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(613 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(582 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(553 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(520 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(479 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(448 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(427 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(406 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(390 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(370 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(352 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(338 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(323 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(309 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(292 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(273 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(240 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(209 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(192 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(182 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(173 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(164 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(150 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(143 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(136 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(126 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(117 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(104 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(86 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(68 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(58 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(52 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(48 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(43 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(37 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(34 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(31 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(29 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(25 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(21 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(17 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(10 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(8 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(7 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(5 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(4 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(3 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1 real change made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1 real change made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(43,467 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * calculate the number of rows missing 
. 
. 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. gen missing_start =   min_begincm - start   if tag == 1 
(440,335 missing values generated)

. 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(4,039 zero counts ignored; observations not deleted)
(26,254 observations created)

. 
. 
. br if youthid == 20020204

. sort youthid begincm 

. 
. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(466,589 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(5,031 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(992 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(988 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(978 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(977 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(976 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(973 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(969 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(930 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(836 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(757 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] if tag1==1 
(755 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid tag1 : replace begincm = begincm[_n+1] - 1 if begincm[_n+1] != . & _n < _N
(25,891 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * calculate the number of rows missing 
. 
. 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. gen missing_start =   min_begincm - start   if tag == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(4,039 zero counts ignored; observations not deleted)
(26,254 observations created)

. 
. 
. br if youthid == 20020204

. sort youthid begincm 

. 
. 
end of do-file

. 
. 
. 
. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(466,589 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
variable tag2 already defined
r(110);

end of do-file

r(110);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
variable tag2 already defined
r(110);

end of do-file

r(110);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
variable tag2 already defined
r(110);

end of do-file

r(110);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
variable tag2 already defined
r(110);

end of do-file

r(110);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
variable tag2 already defined
r(110);

end of do-file

r(110);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(26,254 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(25,262 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(24,274 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(23,296 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(22,319 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(21,343 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(20,370 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(19,401 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(18,471 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(17,635 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(16,878 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(16,123 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(15,368 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(14,615 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(13,888 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(13,173 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(12,460 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(11,750 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(11,041 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(10,334 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(9,658 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(9,042 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(8,507 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(7,976 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(7,450 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(6,931 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(6,466 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(6,014 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(5,563 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(5,115 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(4,668 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(4,224 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(3,804 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(3,446 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(3,163 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(2,887 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(2,614 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(2,344 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(2,117 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(1,898 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(1,679 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(1,465 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(1,252 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(1,041 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(848 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(730 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(660 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(592 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(526 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(462 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(430 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(401 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(372 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(343 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(315 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(287 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(262 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(245 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(231 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(217 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(203 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(189 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(176 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(164 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(152 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(140 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(129 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(118 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(109 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(101 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(94 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(87 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(80 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(74 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(68 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(62 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(57 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(52 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(47 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(42 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(38 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(35 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(32 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(29 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(26 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(23 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(20 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(18 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(16 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(14 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(12 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(10 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(8 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(6 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(5 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(4 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(3 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(2 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(1 real change made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(0 real changes made)

. 
end of do-file

. br

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(26,254 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * calculate the number of rows missing 
. 
. 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. gen missing_start =   min_begincm+1 - start   if tag == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. 
. 
. * tsspell?? 
. 
. 
.            * by id : gen byte censoredleft = _seq == 1 & _n == 1
.            * by id : gen byte censoredright = _end == 1 & _n == _N
.                    
.                    
. 
. br if youthid == 20020204

. 
. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. 
. * replace begincm 
. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(27,246 real changes made)

. 
. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(26,644 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(25,651 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(24,663 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(23,685 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(22,706 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(21,728 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(20,754 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(19,784 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(18,854 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(18,015 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(17,255 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(16,496 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(15,738 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(14,983 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(14,255 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(13,540 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(12,827 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(12,115 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(11,405 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(10,695 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(10,017 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(9,400 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(8,863 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(8,327 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(7,800 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(7,280 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(6,815 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(6,361 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(5,908 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(5,457 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(5,007 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(4,560 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(4,135 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(3,775 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(3,483 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(3,206 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2,930 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2,657 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2,430 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2,211 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,991 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,774 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,561 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,323 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1,113 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(992 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(914 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(843 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(773 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(707 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(672 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(642 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(611 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(581 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(548 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(504 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(465 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(441 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(420 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(404 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(384 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(365 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(350 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(335 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(321 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(303 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(284 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(249 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(217 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(199 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(189 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(180 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(170 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(156 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(149 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(141 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(131 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(122 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(109 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(90 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(71 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(61 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(55 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(51 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(46 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(40 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(36 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(33 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(31 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(27 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(23 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(19 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(12 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(9 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(8 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(6 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(5 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(4 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(3 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(2 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1 real change made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(1 real change made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(44,459 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen max_endcm = max(begincm), by(youthid)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid: gen tag3 = 1 if _N ==1
(472,612 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen missing_end =   end+1  - max_begincm   if tag3 == 1 
max_begincm not found
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid: gen tag3 = 1 if _N ==1
variable tag3 already defined
r(110);

end of do-file

r(110);

. drop tag3

. drop missing_end
variable missing_end not found
r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid: gen tag3 = 1 if _N ==1
(472,612 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_end =   end+1  - max_endcm    if tag3 == 1 
(472,612 missing values generated)

. 
. 
end of do-file

. drop tag3

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm: gen tag3 = 1 if _n == _N)
too many ')' or ']'
r(132);

end of do-file

r(132);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm: gen tag3 = 1 if _n == _N

. 
end of do-file

. br

. drop trag3
variable trag3 not found
r(111);

. drop tag3

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid begincm: gen tag3 = 1 if (_n == _N)

. 
end of do-file

. br

. br

. drop tag3

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag3 = 1 if (_n == _N)
(467,581 missing values generated)

. 
end of do-file

. br

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen missing_end =   end+1  - max_endcm    if tag3 == 1 
variable missing_end already defined
r(110);

end of do-file

r(110);

. drop missing_end

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen missing_end =   end+1  - max_endcm    if tag3 == 1 
(467,581 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. expand missing_end
(467,581 missing counts ignored; observations not deleted)
(74,291 observations created)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. sort youthid begincm 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid: replace begincm = begincm[_n-1] + 1 if begincm[_n-1]!= . & tag3 == tag3[_n-1]
(97,935 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(97,935 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(27,246 real changes made)

. 
. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(26,644 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(27,636 real changes made)

. 
. 
. 
. 
. * identify the last observation in cm 
. egen max_endcm = max(begincm), by(youthid)

. 
. * tag the last observation 
. bysort youthid : gen tag3 = 1 if (_n == _N)
(467,581 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_end =   end  - max_endcm    if tag3 == 1 
(467,581 missing values generated)

. 
. 
. * expand the number of rows missing in the end
. expand missing_end
(467,581 missing counts ignored; observations not deleted)
(568 zero counts ignored; observations not deleted)
(69,828 observations created)

. sort youthid begincm 

. 
. bysort youthid: replace begincm = begincm[_n-1] + 1 if begincm[_n-1]!= . & tag3 == tag3[_n-1]
(170,535 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(170,535 real changes made)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. sort youthid begincm 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(27,246 real changes made)

. 
. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(26,644 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(27,636 real changes made)

. 
. 
. 
. 
. * identify the last observation in cm 
. egen max_endcm = max(begincm), by(youthid)

. 
. * tag the last observation 
. bysort youthid : gen tag3 = 1 if (_n == _N)
(467,581 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_end =   end  - max_endcm    if tag3 == 1 
(467,581 missing values generated)

. 
. 
. * expand the number of rows missing in the end
. expand missing_end
(467,581 missing counts ignored; observations not deleted)
(568 zero counts ignored; observations not deleted)
(69,828 observations created)

. sort youthid begincm 

. 
. 
. 
. replace begincm = begincm[_n-1] + 1 if begincm[_n-1]!= . & tag3 == tag3[_n-1]
(170,535 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(170,535 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(27,246 real changes made)

. 
. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(26,644 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(27,636 real changes made)

. 
. 
. 
. 
. * identify the last observation in cm 
. egen max_endcm = max(begincm), by(youthid)

. 
. * tag the last observation 
. bysort youthid : gen tag3 = 1 if (_n == _N)
(467,581 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_end =   end  - max_endcm    if tag3 == 1 
(467,581 missing values generated)

. 
. 
. * expand the number of rows missing in the end
. expand missing_end
(467,581 missing counts ignored; observations not deleted)
(568 zero counts ignored; observations not deleted)
(69,828 observations created)

. sort youthid begincm 

. 
. 
. 
. replace begincm = begincm[_n-1] + 1 if begincm[_n-1]!= . & tag3 == tag3[_n-1] & youthid == youthid[_n-1]
(170,535 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(170,535 real changes made)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. bysort youthid begincm : replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1]
(27,246 real changes made)

. 
. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1]
(26,644 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(27,636 real changes made)

. 
. 
. 
. 
. * identify the last observation in cm 
. egen max_endcm = max(begincm), by(youthid)

. 
. * tag the last observation 
. bysort youthid : gen tag3 = 1 if (_n == _N)
(467,581 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_end =   end  - max_endcm    if tag3 == 1 
(467,581 missing values generated)

. 
. 
. * expand the number of rows missing in the end
. expand missing_end
(467,581 missing counts ignored; observations not deleted)
(568 zero counts ignored; observations not deleted)
(69,828 observations created)

. sort youthid begincm 

. 
. 
. 
. replace begincm = begincm[_n-1] + 1 if begincm[_n-1]!= . & tag3 == tag3[_n-1] & youthid == youthid[_n-1] & tag3 ==1 
(69,828 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(69,828 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag4 = 1  if youthid == youthid[_n-1] & tag3 ==1 & tag3[_n-1] ==.
(537,409 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(27,246 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(27,246 real changes made)

. 
. 
. 
. 
. * identify the last observation in cm 
. egen max_endcm = max(begincm), by(youthid)

. 
. * tag the last observation 
. bysort youthid : gen tag3 = 1 if (_n == _N)
(467,581 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_end =   end  - max_endcm    if tag3 == 1 
(467,581 missing values generated)

. 
. 
. * expand the number of rows missing in the end
. expand missing_end
(467,581 missing counts ignored; observations not deleted)
(568 zero counts ignored; observations not deleted)
(69,828 observations created)

. sort youthid begincm 

. 
. 
. 
. replace begincm = begincm[_n-1] + 1 if begincm[_n-1]!= . & tag3 == tag3[_n-1] & youthid == youthid[_n-1] & tag3 ==1 
(69,828 real changes made)

. replace endcm = begincm +1 if begincm!=. 
(69,828 real changes made)

. 
. 
. bysort youthid : gen tag4 = 1  if youthid == youthid[_n-1] & tag3 ==1 & tag3[_n-1] ==.
(537,409 missing values generated)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(26,254 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(25,262 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(24,274 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(23,296 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(22,319 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(21,343 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(20,370 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(19,401 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(18,471 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(17,635 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16,878 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16,123 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(15,368 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(14,615 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(13,888 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(13,173 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(12,460 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(11,750 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(11,041 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(10,334 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(9,658 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(9,042 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(8,507 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(7,976 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(7,450 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,931 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. replace begincm[_n+1] = begincm - 1 if tag1[_n+1] == tag1 & youthid[_n+1]  == youthid & tag1[_n+1] ==1 
weights not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm[_n+1] = begincm - 1 if tag1[_n+1] == tag1 & youthid[_n+1]  == youthid & tag1[_n+1] ==1 
weights not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm[_n+1] = begincm - 1   if tag1[_n+1] == tag1 & youthid[_n+1]  == youthid & tag1[_n+1] ==1 
weights not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag3 == tag3[_n+1] & youthid == youthid[_n+1] & tag3 ==1 
tag3 not found
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(27,246 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(26,254 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(25,262 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(24,274 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(23,296 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(22,319 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(21,343 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(20,370 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(19,401 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(18,471 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(17,635 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16,878 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16,123 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(15,368 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(14,615 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(13,888 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(13,173 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(12,460 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(11,750 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(11,041 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(10,334 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(9,658 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(9,042 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(8,507 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(7,976 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(7,450 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,931 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,466 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,014 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(5,563 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(5,115 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(4,668 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(4,224 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,804 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,446 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,163 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,887 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,614 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,344 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,117 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,898 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,679 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,465 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,252 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,041 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(848 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(730 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(660 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(592 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(526 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(462 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(430 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(401 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(372 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(343 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(315 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(287 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(262 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(245 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(231 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(217 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(203 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(189 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(176 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(164 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(152 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(140 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(129 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(118 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(109 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(101 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(94 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(87 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(80 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(74 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(68 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(62 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(57 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(52 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(47 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(42 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(38 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(35 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(32 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(29 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(26 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(23 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(20 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(18 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(14 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(12 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(10 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(8 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(5 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(4 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1 real change made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(27,246 real changes made)

. 
end of do-file

. fre missing_start

missing_start
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   1     |       4039       0.85      12.51      12.51
        3     |         12       0.00       0.04      12.55
        4     |         40       0.01       0.12      12.67
        5     |          5       0.00       0.02      12.69
        6     |          6       0.00       0.02      12.71
        7     |         21       0.00       0.07      12.77
        8     |         32       0.01       0.10      12.87
        9     |        351       0.07       1.09      13.96
        10    |        940       0.20       2.91      16.87
        11    |        869       0.18       2.69      19.57
        12    |         24       0.01       0.07      19.64
        14    |         28       0.01       0.09      19.73
        15    |        390       0.08       1.21      20.93
        16    |        192       0.04       0.59      21.53
        17    |         34       0.01       0.11      21.63
        18    |         54       0.01       0.17      21.80
        19    |         19       0.00       0.06      21.86
        20    |         40       0.01       0.12      21.98
        21    |        651       0.14       2.02      24.00
        22    |       1320       0.28       4.09      28.09
        :     |          :          :          :          :
        50    |        100       0.02       0.31      88.46
        51    |       1632       0.35       5.06      93.51
        52    |        156       0.03       0.48      94.00
        55    |         55       0.01       0.17      94.17
        57    |        171       0.04       0.53      94.70
        58    |        464       0.10       1.44      96.13
        59    |        177       0.04       0.55      96.68
        63    |         63       0.01       0.20      96.88
        64    |         64       0.01       0.20      97.08
        67    |         67       0.01       0.21      97.28
        69    |        138       0.03       0.43      97.71
        70    |         70       0.01       0.22      97.93
        71    |         71       0.02       0.22      98.15
        74    |         74       0.02       0.23      98.38
        77    |         77       0.02       0.24      98.62
        81    |         81       0.02       0.25      98.87
        82    |         82       0.02       0.25      99.12
        88    |         88       0.02       0.27      99.39
        95    |         95       0.02       0.29      99.69
        101   |        101       0.02       0.31     100.00
        Total |      32277       6.83     100.00           
Missing .     |     440335      93.17                      
Total         |     472612     100.00                      
-----------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. 
. 
. forvalues i = 1/150 {
  2. replace begincm = begincm[_n+`i'] - 1 if begincm[_n+`i']!= . & tag1 == tag1[_n+`i'] & youthid == youthid[_n+`i'] & tag1 ==1 
  3. }
(27,246 real changes made)
(25,262 real changes made)
(23,307 real changes made)
(21,398 real changes made)
(19,839 real changes made)
(17,276 real changes made)
(15,387 real changes made)
(12,942 real changes made)
(10,547 real changes made)
(8,539 real changes made)
(6,467 real changes made)
(4,901 real changes made)
(3,869 real changes made)
(3,041 real changes made)
(2,564 real changes made)
(2,433 real changes made)
(1,950 real changes made)
(1,602 real changes made)
(1,407 real changes made)
(1,325 real changes made)
(1,190 real changes made)
(1,106 real changes made)
(987 real changes made)
(759 real changes made)
(690 real changes made)
(638 real changes made)
(541 real changes made)
(523 real changes made)
(513 real changes made)
(488 real changes made)
(481 real changes made)
(477 real changes made)
(448 real changes made)
(384 real changes made)
(304 real changes made)
(291 real changes made)
(287 real changes made)
(282 real changes made)
(238 real changes made)
(229 real changes made)
(228 real changes made)
(220 real changes made)
(219 real changes made)
(217 real changes made)
(197 real changes made)
(122 real changes made)
(74 real changes made)
(71 real changes made)
(68 real changes made)
(66 real changes made)
(33 real changes made)
(29 real changes made)
(29 real changes made)
(29 real changes made)
(28 real changes made)
(28 real changes made)
(25 real changes made)
(17 real changes made)
(14 real changes made)
(14 real changes made)
(14 real changes made)
(14 real changes made)
(13 real changes made)
(12 real changes made)
(12 real changes made)
(12 real changes made)
(11 real changes made)
(11 real changes made)
(9 real changes made)
(8 real changes made)
(7 real changes made)
(7 real changes made)
(7 real changes made)
(6 real changes made)
(6 real changes made)
(6 real changes made)
(5 real changes made)
(5 real changes made)
(5 real changes made)
(5 real changes made)
(4 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
end of do-file

. br

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. 
. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(27,246 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(26,254 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(25,262 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(24,274 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(23,296 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(22,319 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(21,343 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(20,370 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(19,401 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(18,471 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(17,635 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16,878 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16,123 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(15,368 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(14,615 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(13,888 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(13,173 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(12,460 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(11,750 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(11,041 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(10,334 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(9,658 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(9,042 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(8,507 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(7,976 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(7,450 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,931 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,466 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,014 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(5,563 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(5,115 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(4,668 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(4,224 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,804 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,446 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,163 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,887 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,614 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,344 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,117 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,898 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,679 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,465 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,252 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,041 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(848 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(730 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(660 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(592 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(526 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(462 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(430 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(401 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(372 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(343 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(315 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(287 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(262 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(245 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(231 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(217 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(203 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(189 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(176 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(164 real changes made)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. forvalues i = 1/150 {
  2.     replace begincm = begincm[_n+`i'] - 1 if begincm[_n+`i'] != . & tag1 == tag1[_n+`i'] & youthid == youthid[_n+`i'] & tag1 == 1 
  3. }
(152 real changes made)
(26,243 real changes made)
(25,254 real changes made)
(23,291 real changes made)
(21,342 real changes made)
(18,689 real changes made)
(16,369 real changes made)
(13,582 real changes made)
(10,971 real changes made)
(8,597 real changes made)
(6,491 real changes made)
(4,912 real changes made)
(3,873 real changes made)
(3,041 real changes made)
(2,564 real changes made)
(2,433 real changes made)
(1,950 real changes made)
(1,602 real changes made)
(1,407 real changes made)
(1,325 real changes made)
(1,190 real changes made)
(1,106 real changes made)
(987 real changes made)
(759 real changes made)
(690 real changes made)
(638 real changes made)
(541 real changes made)
(523 real changes made)
(513 real changes made)
(488 real changes made)
(481 real changes made)
(477 real changes made)
(448 real changes made)
(384 real changes made)
(304 real changes made)
(291 real changes made)
(287 real changes made)
(282 real changes made)
(238 real changes made)
(229 real changes made)
(228 real changes made)
(220 real changes made)
(219 real changes made)
(217 real changes made)
(197 real changes made)
(122 real changes made)
(74 real changes made)
(71 real changes made)
(68 real changes made)
(66 real changes made)
(33 real changes made)
(29 real changes made)
(29 real changes made)
(29 real changes made)
(28 real changes made)
(28 real changes made)
(25 real changes made)
(17 real changes made)
(14 real changes made)
(14 real changes made)
(14 real changes made)
(14 real changes made)
(13 real changes made)
(12 real changes made)
(12 real changes made)
(12 real changes made)
(11 real changes made)
(11 real changes made)
(9 real changes made)
(8 real changes made)
(7 real changes made)
(7 real changes made)
(7 real changes made)
(6 real changes made)
(6 real changes made)
(6 real changes made)
(5 real changes made)
(5 real changes made)
(5 real changes made)
(5 real changes made)
(4 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
end of do-file

. br

. sort youthid begincm

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. sort youthid begincm 

. 
. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(27,246 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(26,254 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(25,262 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(24,274 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(23,296 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(22,319 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(21,343 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(20,370 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(19,401 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(18,471 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(17,635 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16,878 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16,123 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(15,368 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(14,615 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(13,888 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(13,173 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(12,460 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(11,750 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(11,041 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(10,334 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(9,658 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(9,042 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(8,507 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(7,976 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(7,450 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,931 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,466 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6,014 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(5,563 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(5,115 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(4,668 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(4,224 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,804 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,446 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3,163 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,887 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,614 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,344 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2,117 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,898 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,679 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,465 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,252 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1,041 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(848 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(730 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(660 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(592 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(526 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(462 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(430 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(401 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(372 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(343 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(315 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(287 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(262 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(245 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(231 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(217 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(203 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(189 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(176 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(164 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(152 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(140 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(129 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(118 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(109 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(101 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(94 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(87 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(80 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(74 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(68 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(62 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(57 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(52 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(47 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(42 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(38 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(35 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(32 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(29 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(26 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(23 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(20 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(18 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(16 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(14 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(12 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(10 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(8 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(6 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(5 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(4 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(3 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(2 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(1 real change made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. replace begincm = begincm[_n+1] - 1 if begincm[_n+1]!= . & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 ==1 
(0 real changes made)

. 
end of do-file

. br

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(27,246 real changes made)

. 
end of do-file

. help tsspell

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. sort youthid begincm 

. 
. 
. tsspell youthid
time variable not set, use tsset varname ...
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. tsspell youthid begincm 
too many variables specified
r(103);

end of do-file

r(103);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. tsspell  begincm youthid
too many variables specified
r(103);

end of do-file

r(103);

. help tsspell

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. tsset youthid begincm 
repeated time values within panel
r(451);

end of do-file

r(451);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. tsset youthid  
repeated time values in sample
r(451);

end of do-file

r(451);

. help tsset

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. tsset begincm 
repeated time values in sample
r(451);

end of do-file

r(451);

. sort youthid begincm tag2

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm tag1 tag2 missing_start start 

. 
end of do-file

. sort youthid begincm

. sort youthid

. sort youthid begincm

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. sort youthid begincm 

. 
. 
. br youthid begincm endcm tag1 tag2 missing_start start 

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. sort youthid begincm 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. forvalues i = 1/150 {
  2.     replace begincm = begincm[_n+`i'] - 1 if begincm[_n+`i'] != . & tag1 == tag1[_n+`i'] & youthid == youthid[_n+`i'] & tag2 == 1 
  3. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

.  replace begincm = begincm[_n-1] - 1 if begincm[_n-1]!= . & tag1 == tag1[_n-1] & youthid == youthid[_n-1] & tag1 ==1 
(27,246 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. sort youthid begincm 

. 
. 
. br youthid begincm endcm tag1 tag2 missing_start start 

. 
. 
. quietly gen count = 1

. 
. qui levelsof youthid, local(youthids)

. foreach id of local youthids {
  2.     qui sum count if youthid == `id'
  3.     local numreps = _N - r(sum)
  4.     replace begincm = begincm[_n+1] - 1 ///
>         if begincm[_n+1]!=. & tag1 == tag1[_n+1] & youthid == youthid[_n+1] & tag1 == 1 & count <= `numreps'
  5. }
(27,246 real changes made)
(26,254 real changes made)
(25,262 real changes made)
(24,274 real changes made)
(23,296 real changes made)
(22,319 real changes made)
(21,343 real changes made)
(20,370 real changes made)
(19,401 real changes made)
(18,471 real changes made)
(17,635 real changes made)
(16,878 real changes made)
(16,123 real changes made)
(15,368 real changes made)
(14,615 real changes made)
(13,888 real changes made)
(13,173 real changes made)
(12,460 real changes made)
(11,750 real changes made)
(11,041 real changes made)
(10,334 real changes made)
(9,658 real changes made)
(9,042 real changes made)
(8,507 real changes made)
(7,976 real changes made)
(7,450 real changes made)
(6,931 real changes made)
(6,466 real changes made)
(6,014 real changes made)
(5,563 real changes made)
(5,115 real changes made)
(4,668 real changes made)
(4,224 real changes made)
(3,804 real changes made)
(3,446 real changes made)
(3,163 real changes made)
(2,887 real changes made)
(2,614 real changes made)
(2,344 real changes made)
(2,117 real changes made)
(1,898 real changes made)
(1,679 real changes made)
(1,465 real changes made)
(1,252 real changes made)
(1,041 real changes made)
(848 real changes made)
(730 real changes made)
(660 real changes made)
(592 real changes made)
(526 real changes made)
(462 real changes made)
(430 real changes made)
(401 real changes made)
(372 real changes made)
(343 real changes made)
(315 real changes made)
(287 real changes made)
(262 real changes made)
(245 real changes made)
(231 real changes made)
(217 real changes made)
(203 real changes made)
(189 real changes made)
(176 real changes made)
(164 real changes made)
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. sort youthid begincm 

. 
. 
. br youthid begincm endcm tag1 tag2 missing_start start 

. 
. 
. 
. forvalues i = 1/150 {
  2.     replace begincm = begincm[_n-`i'] - 1 if begincm[_n-`i'] != . & tag1 == tag1[_n-`i'] & youthid == youthid[_n-`i'] & tag2 == 1 
  3. }
(992 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. forvalues i = 1/150 {
  2.     replace begincm = begincm[_n+`i'] -`i' if begincm[_n+`i'] != . & tag1 == tag1[_n+`i'] & youthid == youthid[_n+`i'] & tag2 == 1 
  3. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. use "$TEMP\educ.dta", clear
(30 Jul 2021)

. 
. 
. 
. * Generate cm for all novembers from 2004-2009, 2013-2019
. 
. // https://www.calculator.net/age-calculator.html
. 
. 
. forval year = 2004/2009 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. * Set the cm start for each individual depending on when they were born 
. // criteria: They should be 12 until June of the calendar (before entering the school year in september, this is following the logic of )
. 
. 
. gen start = .
(553,820 missing values generated)

. replace start = nov_2004 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace start = nov_2005 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace start = nov_2005 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace start = nov_2006 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace start = nov_2006 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace start = nov_2007 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace start = nov_2007 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace start = nov_2008 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace start = nov_2008 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace start = nov_2009 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace start = nov_2009 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace start = nov_2009 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. br youthid begincm endcm nov_* start birthyr birthmonth age 

. br if age >13 & start == begincm

. 
. br  youthid begincm endcm nov_* start birthyr birthmonth age  if youthid==  20010214

. 
. tab age if start == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   12.16667 |          1        0.02        0.02
   12.33333 |          2        0.05        0.07
   12.41667 |        302        7.48        7.55
       12.5 |        335        8.29       15.85
   12.58333 |        286        7.08       22.93
   12.66667 |        328        8.12       31.05
      12.75 |        294        7.28       38.33
   12.83333 |        318        7.87       46.20
   12.91667 |        355        8.79       54.99
         13 |        330        8.17       63.16
   13.08333 |        353        8.74       71.90
   13.16667 |        363        8.99       80.89
      13.25 |        364        9.01       89.90
   13.33333 |        408       10.10      100.00
------------+-----------------------------------
      Total |      4,039      100.00

. histogram age if start == begincm
(bin=36, start=12.166667, width=.03240739)

. 
. 
. forval year = 2013/2019 {
  2.     gen nov_`year' = ym(`year',11)
  3. }

. 
. 
. 
. 
. * Set the end date of each individual as well (november again)  (WHAT AGE?? )
. gen end = .
(553,820 missing values generated)

. replace end = nov_2013 if birthyr == 1992  & birthmonth <= 6 
(226 real changes made)

. replace end = nov_2014 if birthyr == 1992  & birthmonth > 6
(0 real changes made)

. 
. replace end = nov_2014 if birthyr == 1993  & birthmonth <= 6 
(303 real changes made)

. replace end = nov_2015 if birthyr == 1993  & birthmonth > 6
(1,203 real changes made)

. 
. replace end = nov_2015 if birthyr == 1994  & birthmonth <= 6 
(60,101 real changes made)

. replace end = nov_2016 if birthyr == 1994  & birthmonth > 6
(75,112 real changes made)

. 
. replace end = nov_2016 if birthyr == 1995  & birthmonth <= 6 
(82,179 real changes made)

. replace end = nov_2017 if birthyr == 1995  & birthmonth > 6
(122,839 real changes made)

. 
. replace end = nov_2017 if birthyr == 1996  & birthmonth <= 6 
(125,286 real changes made)

. replace end = nov_2018 if birthyr == 1996  & birthmonth > 6
(82,206 real changes made)

. 
. replace end = nov_2018 if birthyr == 1997  & birthmonth <= 6
(1,129 real changes made)

. replace end = nov_2019 if birthyr == 1997  & birthmonth > 6
(323 real changes made)

. 
. 
. 
. tab age if end == begincm

        age |      Freq.     Percent        Cum.
------------+-----------------------------------
   21.41667 |         80       14.08       14.08
       21.5 |        118       20.77       34.86
   21.58333 |         91       16.02       50.88
   21.66667 |         91       16.02       66.90
      21.75 |         83       14.61       81.51
   21.83333 |         92       16.20       97.71
   21.91667 |          2        0.35       98.06
         22 |          1        0.18       98.24
   22.08333 |          2        0.35       98.59
   22.16667 |          2        0.35       98.94
      22.25 |          1        0.18       99.12
   22.33333 |          5        0.88      100.00
------------+-----------------------------------
      Total |        568      100.00

. 
. histogram age if end == begincm
(bin=23, start=21.416666, width=.03985513)

. ** create one spell for each individual, if overlapping give preference to educational spells
. 
. 
. 
. // There is a bit of an age range since we check the age until June and then start in November 
. 
. 
. 
. * Drop observations before the start date
. bysort youthid: drop if begincm < start
(104,851 observations deleted)

. 
. 
. 
. 
. * Drop observations after the start date 
. bysort youthid: drop if begincm > end
(3,603 observations deleted)

. 
. 
. 
. * identify the first observation 
. egen min_begincm = min(begincm), by(youthid)

. 
. 
. bysort youthid: gen tag1 = 1 if _n==1
(440,335 missing values generated)

. 
. * calculate the number of rows missing (until start)
. gen missing_start =   min_begincm+1 - start   if tag1 == 1 
(440,335 missing values generated)

. 
. 
. 
. * expand the number of rows missing in the beginning 
. expand missing_start 
(440,335 missing counts ignored; observations not deleted)
(27,246 observations created)

. sort youthid begincm 

. 
. br if youthid == 20020204

. bysort youthid : gen tag2 = 1  if youthid == youthid[_n+1] & tag1 ==1 & tag1[_n+1] ==.
(467,581 missing values generated)

. 
. 
. * replace begincm 
. sort youthid begincm 

. 
. 
. br youthid begincm endcm tag1 tag2 missing_start start 

. 
. 
. 
. forvalues i = 1/150 {
  2.     replace begincm = begincm[_n+`i'] -`i' if begincm[_n+`i'] != . & tag1 == tag1[_n+`i'] & youthid == youthid[_n+`i'] & tag2[_n+`i'] == 1 
  3. }
(992 real changes made)
(992 real changes made)
(988 real changes made)
(978 real changes made)
(977 real changes made)
(976 real changes made)
(973 real changes made)
(969 real changes made)
(930 real changes made)
(836 real changes made)
(757 real changes made)
(755 real changes made)
(755 real changes made)
(753 real changes made)
(727 real changes made)
(715 real changes made)
(713 real changes made)
(710 real changes made)
(709 real changes made)
(707 real changes made)
(676 real changes made)
(616 real changes made)
(535 real changes made)
(531 real changes made)
(526 real changes made)
(519 real changes made)
(465 real changes made)
(452 real changes made)
(451 real changes made)
(448 real changes made)
(447 real changes made)
(444 real changes made)
(420 real changes made)
(358 real changes made)
(283 real changes made)
(276 real changes made)
(273 real changes made)
(270 real changes made)
(227 real changes made)
(219 real changes made)
(219 real changes made)
(214 real changes made)
(213 real changes made)
(211 real changes made)
(193 real changes made)
(118 real changes made)
(70 real changes made)
(68 real changes made)
(66 real changes made)
(64 real changes made)
(32 real changes made)
(29 real changes made)
(29 real changes made)
(29 real changes made)
(28 real changes made)
(28 real changes made)
(25 real changes made)
(17 real changes made)
(14 real changes made)
(14 real changes made)
(14 real changes made)
(14 real changes made)
(13 real changes made)
(12 real changes made)
(12 real changes made)
(12 real changes made)
(11 real changes made)
(11 real changes made)
(9 real changes made)
(8 real changes made)
(7 real changes made)
(7 real changes made)
(7 real changes made)
(6 real changes made)
(6 real changes made)
(6 real changes made)
(5 real changes made)
(5 real changes made)
(5 real changes made)
(5 real changes made)
(4 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(3 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm tag1 tag2 missing_start start  if youthid == 20020204

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm tag1 tag2 missing_start start  if youthid == 20020204

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(27,246 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen max_endcm = max(begincm), by(youthid)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag3 = 1 if (_n == _N)
(467,581 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm tag1 tag2 missing_start start end

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. * calculate the number of rows missing (until start)
. gen missing_end =   end  - max_endcm    if tag3 == 1 
(467,581 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. expand missing_end
(467,581 missing counts ignored; observations not deleted)
(568 zero counts ignored; observations not deleted)
(69,828 observations created)

. sort youthid begincm 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm tag1 tag2 tag3  missing_start start end

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm tag1 tag2 tag3  missing_* start end

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace begincm = begincm[_n-1] + 1 if begincm[_n-1]!= . & tag3 == tag3[_n-1] & youthid == youthid[_n-1] & tag3 ==1 
(69,828 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace endcm = begincm +1 if begincm!=. 
(69,828 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. bysort youthid : gen tag4 = 1  if youthid == youthid[_n-1] & tag3 ==1 & tag3[_n-1] ==.
(537,409 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm spell_* 

. 
end of do-file

. fre spell_edu1

spell_edu1
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   1 Lower secondary        |      34916       6.44      12.06      12.06
        2 Intermediate secondary |      93116      17.17      32.16      44.21
        3 Upper secondary        |     148017      27.29      51.12      95.33
        4 Tertiary               |        623       0.11       0.22      95.55
        5 Other                  |       5099       0.94       1.76      97.31
        6 Apprenticeship         |       5550       1.02       1.92      99.22
        7 Employment             |       1261       0.23       0.44      99.66
        8 Out of employment      |        986       0.18       0.34     100.00
        Total                    |     289568      53.38     100.00           
Missing .                        |     252872      46.62                      
Total                            |     542440     100.00                      
------------------------------------------------------------------------------

. fre spell_edu3

spell_edu3
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   1 Lower secondary        |      11703       2.16      12.56      12.56
        2 Intermediate secondary |       1574       0.29       1.69      14.25
        3 Upper secondary        |       4850       0.89       5.21      19.46
        4 Tertiary               |      13217       2.44      14.19      33.64
        5 Other                  |       1870       0.34       2.01      35.65
        6 Apprenticeship         |      18339       3.38      19.69      55.34
        7 Employment             |      36409       6.71      39.08      94.42
        8 Out of employment      |       5199       0.96       5.58     100.00
        Total                    |      93161      17.17     100.00           
Missing .                        |     449279      82.83                      
Total                            |     542440     100.00                      
------------------------------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. sort spell_edu* 

. egen spell_edu = rowmax(spell_edu1 - spell_edu17)

. 
end of do-file

. br

. help egen

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_N = anycount(spell_edu1 - spell_edu17)
option values() required
r(198);

end of do-file

r(198);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_N = anyvalue(spell_edu1 - spell_edu17)
too many variables specified
r(103);

end of do-file

r(103);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. sort spell_edu* 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_N = count(spell_edu1 - spell_edu17)

. 
end of do-file

. fre spell_N

spell_N
-------------------------------------------------------
          |      Freq.    Percent      Valid       Cum.
----------+--------------------------------------------
Valid   0 |     542440     100.00     100.00     100.00
-------------------------------------------------------

. br

. help egen

. drop spell_n
variable spell_n not found
r(111);

. drop spell_N

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_N = rownonmiss(spell_edu1 - spell_edu17)

. 
end of do-file

. fre spell_N

spell_N
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   1     |     461471      85.07      85.07      85.07
        2     |      70787      13.05      13.05      98.12
        3     |       8971       1.65       1.65      99.78
        4     |       1047       0.19       0.19      99.97
        5     |        150       0.03       0.03     100.00
        6     |         14       0.00       0.00     100.00
        Total |     542440     100.00     100.00           
-----------------------------------------------------------

. br if spell_N ==6

. br if spell_N >1

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm *spell_* 

. 
end of do-file

. help egen

. help egen

. fre spell_edu1

spell_edu1
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   1 Lower secondary        |      34916       6.44      12.06      12.06
        2 Intermediate secondary |      93116      17.17      32.16      44.21
        3 Upper secondary        |     148017      27.29      51.12      95.33
        4 Tertiary               |        623       0.11       0.22      95.55
        5 Other                  |       5099       0.94       1.76      97.31
        6 Apprenticeship         |       5550       1.02       1.92      99.22
        7 Employment             |       1261       0.23       0.44      99.66
        8 Out of employment      |        986       0.18       0.34     100.00
        Total                    |     289568      53.38     100.00           
Missing .                        |     252872      46.62                      
Total                            |     542440     100.00                      
------------------------------------------------------------------------------

. help egen

. drop spell_edu

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_edu= anymatch(spell_edu1 - spell_edu17), values(4)

. 
end of do-file

. fre spell_edu

spell_edu -- see notes
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   0     |     494608      91.18      91.18      91.18
        1     |      47832       8.82       8.82     100.00
        Total |     542440     100.00     100.00           
-----------------------------------------------------------

. br

. help egen

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_edu= anymatch(spell_edu1 - spell_edu17), values(4)
variable spell_edu already defined
r(110);

end of do-file

r(110);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm *spell_* 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_edu= anymatch(spell_edu1 - spell_edu17), values(4)
variable spell_edu already defined
r(110);

end of do-file

r(110);

. drop spell_edu

. fre spell_edu1

spell_edu1
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   1 Lower secondary        |      34916       6.44      12.06      12.06
        2 Intermediate secondary |      93116      17.17      32.16      44.21
        3 Upper secondary        |     148017      27.29      51.12      95.33
        4 Tertiary               |        623       0.11       0.22      95.55
        5 Other                  |       5099       0.94       1.76      97.31
        6 Apprenticeship         |       5550       1.02       1.92      99.22
        7 Employment             |       1261       0.23       0.44      99.66
        8 Out of employment      |        986       0.18       0.34     100.00
        Total                    |     289568      53.38     100.00           
Missing .                        |     252872      46.62                      
Total                            |     542440     100.00                      
------------------------------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_edu_test = anymatch(spell_edu1 - spell_edu17), values(4)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. foreach var of local spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3. }

. 
end of do-file

. tab spell_edu_test spell_edu
spell_edu ambiguous abbreviation
r(111);

. tab spell_edu_test spell_edu
spell_edu ambiguous abbreviation
r(111);

. drop spell_edu
spell_edu ambiguous abbreviation
r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen spell_edu = .
(542,440 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. foreach var of local spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3. }

. 
. 
end of do-file

. tab spell_edu_test spell_edu
no observations

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. egen spell_edu_test = anymatch(spell_edu1 - spell_edu17), values(4)
variable spell_edu_test already defined
r(110);

end of do-file

r(110);

. fre spell_edu_test

spell_edu_test -- see notes
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   0     |     494608      91.18      91.18      91.18
        1     |      47832       8.82       8.82     100.00
        Total |     542440     100.00     100.00           
-----------------------------------------------------------

. fre spell_edu

spell_edu
-------------------------------------------------------
          |      Freq.    Percent      Valid       Cum.
----------+--------------------------------------------
Missing . |     542440     100.00                      
-------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. local spell_edu_vars spell_edu1 spell_edu2 spell_edu3 spell_edu4 spell_edu5 ///
>                       spell_edu6 spell_edu7 spell_edu8 spell_edu9 spell_edu10 ///
>                       spell_edu11 spell_edu12 spell_edu13 spell_edu14 spell_edu15 ///
>                       spell_edu16 spell_edu17

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. foreach var of local spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3. }

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. foreach var of local spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3. }

. 
. 
end of do-file

. fre spell_edu

spell_edu
-------------------------------------------------------
          |      Freq.    Percent      Valid       Cum.
----------+--------------------------------------------
Missing . |     542440     100.00                      
-------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace spell_edu = 4 if spell_edu1 ==4 | spell_edu2 =04 | spell_edu3 ==4  
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace spell_edu = 4 if spell_edu1 == 4 
(623 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace spell_edu = 4 if spell_edu2 == 4 
(31,060 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. foreach var of local spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3. }

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. replace spell_edu = 4 if spell_edu3 == 4 
(11,705 real changes made)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. global  spell_edu_vars  "spell_edu1 spell_edu2 spell_edu3 spell_edu4 spell_edu5 ///
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. global  spell_edu_vars  "spell_edu1 spell_edu2 spell_edu3 spell_edu4 spell_edu5 spell_edu6 spell_edu7 spell_edu8 spell_edu9 spell_edu10                  spell_edu11 spell_edu12 spell_edu13 spell
> _edu14 spell_edu15 spell_edu16 spell_edu17"

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. foreach var of global spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(2,806 real changes made)
(747 real changes made)
(344 real changes made)
(219 real changes made)
(99 real changes made)
(64 real changes made)
(63 real changes made)
(25 real changes made)
(62 real changes made)
(15 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. 
end of do-file

. drop spell_edu

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. foreach var of global spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3.         replace spell_edu = 4 if spell_edu==. & `var' == 3
  4.         
. }
spell_edu ambiguous abbreviation
r(111);

end of do-file

r(111);

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen spell_edu = .
(542,440 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. global  spell_edu_vars  "spell_edu1 spell_edu2 spell_edu3 spell_edu4 spell_edu5 spell_edu6 spell_edu7 spell_edu8 spell_edu9 spell_edu10                  spell_edu11 spell_edu12 spell_edu13 spell
> _edu14 spell_edu15 spell_edu16 spell_edu17"

. 
. foreach var of global spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3.         replace spell_edu = 4 if spell_edu==. & `var' == 3
  4.         
. }
(623 real changes made)
(148,017 real changes made)
(30,994 real changes made)
(29,106 real changes made)
(11,656 real changes made)
(4,799 real changes made)
(2,797 real changes made)
(910 real changes made)
(747 real changes made)
(317 real changes made)
(344 real changes made)
(236 real changes made)
(219 real changes made)
(119 real changes made)
(99 real changes made)
(212 real changes made)
(64 real changes made)
(0 real changes made)
(63 real changes made)
(0 real changes made)
(25 real changes made)
(0 real changes made)
(62 real changes made)
(0 real changes made)
(15 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
end of do-file

. drop spell_edu

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. gen spell_edu = .
(542,440 missing values generated)

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. 
. global  spell_edu_vars  "spell_edu1 spell_edu2 spell_edu3 spell_edu4 spell_edu5 spell_edu6 spell_edu7 spell_edu8 spell_edu9 spell_edu10                  spell_edu11 spell_edu12 spell_edu13 spell
> _edu14 spell_edu15 spell_edu16 spell_edu17"

. 
. foreach var of global spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3.         replace spell_edu = 3 if spell_edu==. & `var' == 3
  4.         replace spell_edu = 2 if spell_edu==. & `var' == 2
  5.         replace spell_edu = 1 if spell_edu==. & `var' == 1
  6.         replace spell_edu = 5 if spell_edu==. & `var' == 5
  7.         replace spell_edu = 6 if spell_edu==. & `var' == 6
  8.         replace spell_edu = 7 if spell_edu==. & `var' == 7
  9.         replace spell_edu = 8 if spell_edu==. & `var' == 8
 10. 
. }
(623 real changes made)
(148,017 real changes made)
(93,116 real changes made)
(34,916 real changes made)
(5,099 real changes made)
(5,550 real changes made)
(1,261 real changes made)
(986 real changes made)
(31,060 real changes made)
(28,832 real changes made)
(6,589 real changes made)
(18,409 real changes made)
(6,706 real changes made)
(26,691 real changes made)
(7,238 real changes made)
(2,514 real changes made)
(11,705 real changes made)
(4,647 real changes made)
(1,370 real changes made)
(10,288 real changes made)
(1,609 real changes made)
(17,329 real changes made)
(18,269 real changes made)
(4,049 real changes made)
(2,806 real changes made)
(847 real changes made)
(453 real changes made)
(3,798 real changes made)
(358 real changes made)
(4,241 real changes made)
(11,084 real changes made)
(4,873 real changes made)
(747 real changes made)
(236 real changes made)
(552 real changes made)
(1,074 real changes made)
(55 real changes made)
(961 real changes made)
(5,559 real changes made)
(4,584 real changes made)
(344 real changes made)
(171 real changes made)
(184 real changes made)
(522 real changes made)
(24 real changes made)
(218 real changes made)
(2,345 real changes made)
(3,090 real changes made)
(219 real changes made)
(99 real changes made)
(141 real changes made)
(330 real changes made)
(34 real changes made)
(202 real changes made)
(750 real changes made)
(2,042 real changes made)
(99 real changes made)
(106 real changes made)
(90 real changes made)
(141 real changes made)
(0 real changes made)
(178 real changes made)
(355 real changes made)
(1,047 real changes made)
(64 real changes made)
(0 real changes made)
(5 real changes made)
(18 real changes made)
(0 real changes made)
(43 real changes made)
(128 real changes made)
(482 real changes made)
(63 real changes made)
(0 real changes made)
(0 real changes made)
(71 real changes made)
(10 real changes made)
(63 real changes made)
(56 real changes made)
(399 real changes made)
(25 real changes made)
(0 real changes made)
(0 real changes made)
(92 real changes made)
(0 real changes made)
(29 real changes made)
(18 real changes made)
(147 real changes made)
(62 real changes made)
(0 real changes made)
(0 real changes made)
(8 real changes made)
(0 real changes made)
(0 real changes made)
(27 real changes made)
(50 real changes made)
(15 real changes made)
(0 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(3 real changes made)
(16 real changes made)
(17 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(11 real changes made)
(8 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(27 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(2 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(3 real changes made)

. 
. 
end of do-file

. drop spell_edu

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. 
. * Generate a new variable spell_edu with default value 3
. gen spell_edu = .
(542,440 missing values generated)

. 
. global  spell_edu_vars  "spell_edu1 spell_edu2 spell_edu3 spell_edu4 spell_edu5 spell_edu6 spell_edu7 spell_edu8 spell_edu9 spell_edu10                  spell_edu11 spell_edu12 spell_edu13 spell
> _edu14 spell_edu15 spell_edu16 spell_edu17"

. 
. foreach var of global spell_edu_vars {
  2.     replace spell_edu = 4 if `var' == 4
  3. }
(623 real changes made)
(31,060 real changes made)
(11,705 real changes made)
(2,806 real changes made)
(747 real changes made)
(344 real changes made)
(219 real changes made)
(99 real changes made)
(64 real changes made)
(63 real changes made)
(25 real changes made)
(62 real changes made)
(15 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. foreach var of global spell_edu_vars {  
  2.         replace spell_edu = 3 if spell_edu==. & `var' == 3
  3. }
(147,913 real changes made)
(29,095 real changes made)
(4,790 real changes made)
(910 real changes made)
(317 real changes made)
(236 real changes made)
(119 real changes made)
(212 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. foreach var of global spell_edu_vars {  
  2.         replace spell_edu = 2 if spell_edu==. & `var' == 2
  3. }
(92,901 real changes made)
(6,726 real changes made)
(1,477 real changes made)
(469 real changes made)
(581 real changes made)
(191 real changes made)
(147 real changes made)
(90 real changes made)
(7 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. foreach var of global spell_edu_vars {  
  2.         replace spell_edu = 1 if spell_edu==. & `var' == 1
  3. }
(34,746 real changes made)
(18,231 real changes made)
(10,483 real changes made)
(4,009 real changes made)
(1,190 real changes made)
(579 real changes made)
(416 real changes made)
(182 real changes made)
(19 real changes made)
(79 real changes made)
(105 real changes made)
(12 real changes made)
(14 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. foreach var of global spell_edu_vars {  
  2.         replace spell_edu = 5 if spell_edu==. & `var' == 5
  3. }
(5,088 real changes made)
(6,444 real changes made)
(1,662 real changes made)
(361 real changes made)
(55 real changes made)
(50 real changes made)
(33 real changes made)
(11 real changes made)
(0 real changes made)
(12 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. foreach var of global spell_edu_vars {  
  2.         replace spell_edu = 6 if spell_edu==. & `var' == 6
  3. }
(5,483 real changes made)
(26,105 real changes made)
(17,125 real changes made)
(4,210 real changes made)
(990 real changes made)
(218 real changes made)
(205 real changes made)
(181 real changes made)
(43 real changes made)
(65 real changes made)
(29 real changes made)
(0 real changes made)
(4 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. foreach var of global spell_edu_vars {  
  2.         replace spell_edu = 7 if spell_edu==. & `var' == 7
  3. }
(1,258 real changes made)
(6,945 real changes made)
(17,833 real changes made)
(10,858 real changes made)
(5,507 real changes made)
(2,305 real changes made)
(738 real changes made)
(370 real changes made)
(125 real changes made)
(70 real changes made)
(19 real changes made)
(29 real changes made)
(16 real changes made)
(11 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. foreach var of global spell_edu_vars {  
  2.         replace spell_edu = 8 if spell_edu==. & `var' == 8
  3. }
(928 real changes made)
(2,405 real changes made)
(3,968 real changes made)
(4,806 real changes made)
(4,535 real changes made)
(3,084 real changes made)
(2,021 real changes made)
(1,043 real changes made)
(464 real changes made)
(397 real changes made)
(147 real changes made)
(49 real changes made)
(17 real changes made)
(8 real changes made)
(27 real changes made)
(2 real changes made)
(3 real changes made)

. 
. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm *spell_* 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm *spell_*  if spell_N>1 

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. label define spell_edu 1 "Lower secondary" 2 "Intermediate secondary" 3 "Upper secondary" 4 "Tertiary" 5 "Other" 6 "Apprenticeship" 7 "Employment" 8 "Out of employment"

. label values spell_edu spell_edu 

. 
end of do-file

. fre spell_edu

spell_edu
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   1 Lower secondary        |      70065      12.92      12.92      12.92
        2 Intermediate secondary |     102589      18.91      18.91      31.83
        3 Upper secondary        |     183592      33.85      33.85      65.67
        4 Tertiary               |      47832       8.82       8.82      74.49
        5 Other                  |      13716       2.53       2.53      77.02
        6 Apprenticeship         |      54658      10.08      10.08      87.10
        7 Employment             |      46084       8.50       8.50      95.59
        8 Out of employment      |      23904       4.41       4.41     100.00
        Total                    |     542440     100.00     100.00           
------------------------------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. sort youthid begincm

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. 
. replace spell_edu = 9 if tag3==1 & tag4!=1 
(69,828 real changes made)

. replace spell_edu = 9 if tag1==1 & tag2!=1 
(27,246 real changes made)

. 
end of do-file

. fre spell_edu

spell_edu
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   1 Lower secondary        |      56869      10.48      10.48      10.48
        2 Intermediate secondary |      94602      17.44      17.44      27.92
        3 Upper secondary        |     169376      31.22      31.22      59.15
        4 Tertiary               |      28039       5.17       5.17      64.32
        5 Other                  |      11563       2.13       2.13      66.45
        6 Apprenticeship         |      39253       7.24       7.24      73.69
        7 Employment             |      29226       5.39       5.39      79.07
        8 Out of employment      |      16438       3.03       3.03      82.10
        9                        |      97074      17.90      17.90     100.00
        Total                    |     542440     100.00     100.00           
------------------------------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. label define spell_edu 1 "Lower secondary" 2 "Intermediate secondary" 3 "Upper secondary" 4 "Tertiary" 5 "Other" 6 "Apprenticeship" 7 "Employment" 8 "Out of employment" 9 "Missing ", modify 

. label values spell_edu spell_edu 

. 
end of do-file

. fre spell_edu

spell_edu
------------------------------------------------------------------------------
                                 |      Freq.    Percent      Valid       Cum.
---------------------------------+--------------------------------------------
Valid   1 Lower secondary        |      56869      10.48      10.48      10.48
        2 Intermediate secondary |      94602      17.44      17.44      27.92
        3 Upper secondary        |     169376      31.22      31.22      59.15
        4 Tertiary               |      28039       5.17       5.17      64.32
        5 Other                  |      11563       2.13       2.13      66.45
        6 Apprenticeship         |      39253       7.24       7.24      73.69
        7 Employment             |      29226       5.39       5.39      79.07
        8 Out of employment      |      16438       3.03       3.03      82.10
        9 Missing                |      97074      17.90      17.90     100.00
        Total                    |     542440     100.00     100.00           
------------------------------------------------------------------------------

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. sort youthid begincm

. 
end of do-file

. do "C:\Users\hornunma\AppData\Local\Temp\STD97c4_000000.tmp"

. br youthid begincm endcm spell_edu 

. 
end of do-file

