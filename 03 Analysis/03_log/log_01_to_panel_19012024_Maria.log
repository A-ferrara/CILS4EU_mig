---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  Z:Eigene Dateien\GitHub\CILS4EU_mig\03 Analysis\03_log\log_01_to_panel_19012024_Maria.log
  log type:  text
 opened on:  19 Jan 2024, 17:17:06

. 
. 
. ************************************************************************
. **# Bookmark  1. Browse the datasets ***********************************
. ************************************************************************
. 
. * Dataset relationship information 
. use "$DATA/w6_ylhcp_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. describe

Contains data from C:\Users\hornunma\Desktop\DATA\CILS4EU_mig/w6_ylhcp_ge_v6.0.0_rv.dta
 Observations:         5,370                  30 Jul 2021
    Variables:            59                  30 Jul 2021 15:18
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
youthid         long    %32.0g     youthid    unique youth id
youthid_ge      byte    %32.0g     youthid_ge
                                              national youth id (germany)
country         byte    %32.0g     country    country of survey
y6_status       byte    %32.0g     y6_status
                                              mode of youth lhc partner interview
y6_version      byte    %32.0g     y6_version
                                              version of youth lhc partner interview
y6_sample       byte    %32.0g     y6_sample
                                              sample
y6_intdat_ylhcp byte    %4.0f      y6_intdat_ylhcp
                                              date of survey
y6_intdat_ylh~V int     %tm        y6_intdat_ylhcpRV
                                              date of survey (reduced version)
y6_vers_ylhcp   str21   %21s                  data release version of youth lhc partner interview
y6_rpindex      byte    %32.0g     y6_rpindex
                                              unique partner index
y6_rpsex        byte    %32.0g     y6_rpsex   rp1: sex of partner
y6_rpdobm       byte    %32.0g     y6_rpdobm
                                              rp2: when was partner born: month
y6_rpdoby       byte    %32.0g     y6_rpdoby
                                              rp2: when was partner born: year
y6_rpdobyRV     int     %32.0g     y6_rpdobyRV
                                              rp2: when was partner born: year (reduced version)
y6_rp1startm    byte    %32.0g     y6_rp1startm
                                              rp3: start of relationship (month)
y6_rp1starty    byte    %32.0g     y6_rp1starty
                                              rp3: start of relationship (year)
y6_rp1startyRV  int     %32.0g     y6_rp1startyRV
                                              rp3: start of relationship (year) (reduced version)
y6_rp1checkbdat byte    %38.0g     y6_rp1checkbdat
                                              rp4: january 2011: did i record that correctly
y6_rp1endm      byte    %32.0g     y6_rp1endm
                                              rp5: end of relationship (month)
y6_rp1endy      int     %32.0g     y6_rp1endy
                                              rp5: end of relationship (year)
y6_rp1ongoing   byte    %32.0g     y6_rp1ongoing
                                              rp5: relationship is still on-going
y6_rp2relship   byte    %32.0g     y6_rp2relship
                                              rp6: together with partner at other point in time, first other time
y6_rp2startm    byte    %32.0g     y6_rp2startm
                                              rp7: start of relationship (month), first other time
y6_rp2starty    int     %32.0g     y6_rp2starty
                                              rp7: start of relationship (year), first other time
y6_rp2endm      byte    %32.0g     y6_rp2endm
                                              rp8: end of relationship (month), first other time
y6_rp2endy      int     %32.0g     y6_rp2endy
                                              rp8: end of relationship (year), first other time
y6_rp2ongoing   byte    %32.0g     y6_rp2ongoing
                                              rp8: relationship is still on-going, first other time
y6_rp3relship   byte    %32.0g     y6_rp3relship
                                              rp9: together with partner at other point in time, second other time
y6_rp3startm    byte    %32.0g     y6_rp3startm
                                              rp10: start of relationship (month), second other time
y6_rp3starty    int     %32.0g     y6_rp3starty
                                              rp10: start of relationship (year), second other time
y6_rp3endm      byte    %32.0g     y6_rp3endm
                                              rp11: end of relationship (month), second other time
y6_rp3endy      int     %32.0g     y6_rp3endy
                                              rp11: end of relationship (year), second other time
y6_rp3ongoing   byte    %32.0g     y6_rp3ongoing
                                              rp11: relationship is still on-going, second other time
y6_rp4relship   byte    %32.0g     y6_rp4relship
                                              rp12: together with partner at other point in time, third other time
y6_rpeduc8      byte    %35.0g     y6_rpeduc8
                                              rp13: was partner in school at beginning of relationship
y6_rpeduc9      byte    %62.0g     y6_rpeduc9
                                              rp14: which educational degree did partner have at beginning of relationship
y6_rpeduc9op    str36   %36s                  rp14: which educational degree did partner have at beginning, other degree
y6_rpeduc9_add  str36   %36s                  rp14: which educational degree did partner have at beginning, additional inform.
y6_rpsit2a      byte    %129.0g    y6_rpsit2a
                                              rp15: what type of education did he/she do at beginning of relationship
y6_rpsit2aop    str36   %36s                  rp15: what type of education did he/she do at beginning, other education
y6_rpsit2aopRV  str72   %72s                  rp15: what type of educ. did he/she do at beg., other educ. (reduced version)
y6_rpsit2a_add  str36   %36s                  rp15: what type of education did he/she do at beginning, additional information
y6_rpback2      byte    %52.0g     y6_rpback2
                                              rp16: what is his/her background
y6_rpback2RV    byte    %32.0g     y6_rpback2RV
                                              rp16: what is his/her background (reduced version)
y6_rpback2_add  str36   %36s                  rp16: what is his/her background, additional information
y6_rpcohab      byte    %32.0g     y6_rpcohab
                                              rp17: lived together with partner
y6_rpcohabsta~m byte    %32.0g     y6_rpcohabstartm
                                              rp18: start of cohabitation with partner: month
y6_rpcohabsta~y byte    %32.0g     y6_rpcohabstarty
                                              rp18: start of cohabitation with partner: year
y6_rpcohabsta~V int     %32.0g     y6_rpcohabstartyRV
                                              rp18: start of cohabitation with partner: year (reduced version)
y6_rpcohabendm  byte    %32.0g     y6_rpcohabendm
                                              rp19: end of cohabitation with partner: month
y6_rpcohabendy  int     %32.0g     y6_rpcohabendy
                                              rp19: end of cohabitation with partner: year
y6_rpcohab_on~g byte    %32.0g     y6_rpcohab_ongoing
                                              rp19: still lives together with partner
y6_rpmarst4     byte    %32.0g     y6_rpmarst4
                                              rp20: married to partner
y6_rpmarstartm  byte    %32.0g     y6_rpmarstartm
                                              rp21: start of marriage with partner: month
y6_rpmarstarty  byte    %32.0g     y6_rpmarstarty
                                              rp21: start of marriage with partner: year
y6_rpmarstart~V int     %32.0g     y6_rpmarstartyRV
                                              rp21: start of marriage with partner: year (reduced version)
y6_rpmarendm    byte    %32.0g     y6_rpmarendm
                                              rp22: end of marriage with partner: month
y6_rpmarendy    int     %32.0g     y6_rpmarendy
                                              rp22: end of marriage with partner: year
y6_rpmar_ongo~g byte    %32.0g     y6_rpmar_ongoing
                                              rp22: still married to partner
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: youthid

. 
. * Dataset  with year of birth
. use "$DATA/w6_ym_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. 
. 
. * Dataset  education and profession 
. use "$DATA/w6_ylhcs_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. describe

Contains data from C:\Users\hornunma\Desktop\DATA\CILS4EU_mig/w6_ylhcs_ge_v6.0.0_rv.dta
 Observations:        25,008                  30 Jul 2021
    Variables:           280                  30 Jul 2021 15:19
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
youthid         long    %32.0f     youthid    unique youth id
youthid_ge      byte    %32.0g     youthid_ge
                                              national youth id (germany)
country         byte    %32.0g     country    country of survey
y6_status       byte    %32.0g     y6_status
                                              mode of youth structural lhc interview
y6_version      byte    %32.0g     y6_version
                                              version of youth structural lhc interview
y6_sample       byte    %32.0g     y6_sample
                                              sample
y6_intdat_ylhcs byte    %4.0f      y6_intdat_ylhcs
                                              date of survey
y6_intdat_ylh~V int     %tm        y6_intdat_ylhcsRV
                                              date of survey (reduced version)
y6_vers_ylhcs   str21   %21s                  data release version of youth structural lhc interview
y6_ylhcs_mode   byte    %32.0g     y6_ylhcs_mode
                                              mode of spell entry
y6_ylhcs_index  byte    %32.0g     y6_ylhcs_index
                                              unique personal spell index
y6_ylhcs_spt1   byte    %32.0g     y6_ylhcs_spt1
                                              spell type (first level)
y6_ylhcs_spt2   byte    %43.0g     y6_ylhcs_spt2
                                              spell type (second level)
y6_ylhcs_begd~m byte    %32.0g     y6_ylhcs_begdatm
                                              start of spell (month)
y6_ylhcs_begd~y int     %32.0g     y6_ylhcs_begdaty
                                              start of spell (year)
y6_ylhcs_endd~m byte    %32.0g     y6_ylhcs_enddatm
                                              end of spell (month)
y6_ylhcs_endd~y int     %32.0g     y6_ylhcs_enddaty
                                              end of spell (year)
y6_ylhcs_ongo~g byte    %32.0g     y6_ylhcs_ongoing
                                              spell is still ongoing
y6_ylhcs_corr~n byte    %74.0g     y6_ylhcs_correction
                                              correction in check module
y6_ylhcs_tp     byte    %32.0g     y6_ylhcs_tp
                                              technical problem in longitudinal section
y6_s1_sit2a     byte    %129.0g    y6_s1_sit2a
                                              1s1: which school-type did or do you attend
y6_s1_sit2aop   str36   %36s                  1s1: which school-type did or do you attend, other general education school
y6_s1_sit2aopRV str72   %72s                  1s1: which school-type, other general education school (reduced version)
y6_s1_sit2a_add str36   %36s                  1s1: which school-type did or do you attend, additional information
y6_s1_checkbdat byte    %38.0g     y6_s1_checkbdat
                                              2s1: january 2011: did i record that correctly
y6_s1_grad3     byte    %32.0g     y6_s1_grad3
                                              3s1: did you complete this general education school with an educational degree
y6_s1_g_fed_ge  byte    %32.0g     y6_s1_g_fed_ge
                                              4s1: in which federal state did you get this educational degree
y6_s1_g_educ5   byte    %52.0g     y6_s1_g_educ5
                                              5s1: in which country did you get this educational degree
y6_s1_g_educ5RV byte    %32.0g     y6_s1_g_educ5RV
                                              5s1: in which country did you get this educational degree (reduced version)
y6_s1_g_educ2   byte    %62.0g     y6_s1_g_educ2
                                              6s1: which educational degree was this
y6_s1_g_educ2op str36   %36s                  6s1: which educational degree was this, other educational degree
y6_s1_g_educ2~d str36   %36s                  6s1: which educational degree was this, additional information
y6_s1_g_ggrad~G byte    %32.0g     y6_s1_g_ggradeoG
                                              7s1: grades in school leaving certificate: overall (generated)
y6_s1_g_ggradeo double  %32.0g     y6_s1_g_ggradeo
                                              7s1: grades in school leaving certificate: overall, grade
y6_s1_g_gcred~o float   %32.0g     y6_s1_g_gcredito
                                              7s1: grades in school leaving certificate: overall, credit points
y6_s1_proc1     byte    %32.0g     y6_s1_proc1
                                              8s1: another general education school since january 2011
y6_s1_proc2     byte    %32.0g     y6_s1_proc2
                                              9s1: open calendar
y6_s1_proc3     byte    %32.0g     y6_s1_proc3
                                              10s1: is any information missing
y6_s2_sit2b     byte    %72.0g     y6_s2_sit2b
                                              1s2: which school-type did or do you attend
y6_s2_sit2bop1  str36   %36s                  1s2: which school-type did or do you attend, other evening school
y6_s2_sit2b~1RV str67   %67s                  1s2: which school-type, other evening school (reduced version)
y6_s2_sit2bop2  str36   %36s                  1s2: which school-type did or do you attend, other general education school
y6_s2_sit2b~2RV str65   %65s                  1s2: which school-type, other general education school (reduced version)
y6_s2_grad3     byte    %32.0g     y6_s2_grad3
                                              2s2: did you complete this school with an educational degree
y6_s2_g_fed_ge  byte    %32.0g     y6_s2_g_fed_ge
                                              3s2: in which federal state did you get this educational degree
y6_s2_g_educ5   byte    %52.0g     y6_s2_g_educ5
                                              4s2: in which country did you get this educational degree
y6_s2_g_educ5RV byte    %32.0g     y6_s2_g_educ5RV
                                              4s2: in which country did you get this educational degree (reduced version)
y6_s2_g_educ2   byte    %62.0g     y6_s2_g_educ2
                                              5s2: which educational degree was this
y6_s2_g_educ2op str36   %36s                  5s2: which educational degree was this, other educational degree
y6_s2_g_educ2~d str36   %36s                  5s2: which educational degree was this, additional information
y6_s2_g_ggrad~G byte    %32.0g     y6_s2_g_ggradeoG
                                              6s2: grades in school leaving certificate: overall, grade (generated)
y6_s2_g_ggradeo double  %32.0g     y6_s2_g_ggradeo
                                              6s2: grades in school leaving certificate: overall, grade
y6_s2_g_gcred~o byte    %32.0g     y6_s2_g_gcredito
                                              6s2: grades in school leaving certificate: overall, credit points
y6_s2_proc1     byte    %32.0g     y6_s2_proc1
                                              7s2: another second chance education since january 2011
y6_s2_proc2     byte    %32.0g     y6_s2_proc2
                                              8s2: open calendar
y6_s2_proc3     byte    %32.0g     y6_s2_proc3
                                              9s2: is any information missing
y6_s3_isco08    byte    %32.0g     y6_s3_isco08
                                              1s3: in which profession did or do you do your apprenticeship
y6_s3_isco08RV  int     %32.0g     y6_s3_isco08RV
                                              1s3: in which profession did or do you do your apprenticeship (reduced version)
y6_s3_iseiG     float   %32.0g     y6_s3_iseiG
                                              1s3: in which profession did or do you do your apprenticeship, isei (generated)
y6_s3_siopsG    float   %32.0g     y6_s3_siopsG
                                              1s3: in which profession did or do you do your apprenticeship, siops (generated)
y6_s3_grad3     byte    %32.0g     y6_s3_grad3
                                              2s3: did you complete this vocational training
y6_s3_g_isco08  byte    %32.0g     y6_s3_g_isco08
                                              3s3: what is the exact title of your vocational qualification
y6_s3_g_isco0~V int     %32.0g     y6_s3_g_isco08RV
                                              3s3: what is the exact title of your vocational qualification (reduced version)
y6_s3_g_iseiG   float   %32.0g     y6_s3_g_iseiG
                                              3s3: what is the exact title of your vocational qualification, isei (generated)
y6_s3_g_siopsG  float   %32.0g     y6_s3_g_siopsG
                                              3s3: what is the exact title of your vocational qualification, siops (generated)
y6_s3_g_ggrad~G byte    %32.0g     y6_s3_g_ggradeoG
                                              4s3: overall grade you got in vocational qualification certificate (generated)
y6_s3_g_ggradeo double  %32.0g     y6_s3_g_ggradeo
                                              4s3: overall grade you got in vocational qualification certificate, grade
y6_s3_g_gcred~o byte    %32.0g     y6_s3_g_gcredito
                                              4s3: overall grade you got in vocational qualification certificate, credit point
y6_s3_g_educ1   byte    %32.0g     y6_s3_g_educ1
                                              5s3: receive an additional educational degree with your vocational qualification
y6_s3_gs_fed_ge byte    %32.0g     y6_s3_gs_fed_ge
                                              6s3: in which federal state did you receive this degree
y6_s3_gs_educ5  byte    %52.0g     y6_s3_gs_educ5
                                              7s3: in which country did you receive this degree
y6_s3_gs_educ~V byte    %32.0g     y6_s3_gs_educ5RV
                                              7s3: in which country did you receive this degree (reduced version)
y6_s3_gs_educ2  byte    %62.0g     y6_s3_gs_educ2
                                              8s3: which educational degree was this
y6_s3_gs_educ~p str36   %36s                  8s3: which educational degree was this, other educational degree
y6_s3_gs_educ~d str36   %36s                  8s3: which educational degree was this, additional information
y6_s3_gs_ggra~G byte    %32.0g     y6_s3_gs_ggradeoG
                                              9s3: grades in school leaving certificate: overall (generated)
y6_s3_gs_ggra~o double  %32.0g     y6_s3_gs_ggradeo
                                              9s3: grades in school leaving certificate: overall, grade
y6_s3_gs_gcre~o byte    %32.0g     y6_s3_gs_gcredito
                                              9s3: grades in school leaving certificate: overall, credit points
y6_s3_proc1     byte    %32.0g     y6_s3_proc1
                                              10s3: another apprenticeship since january 2011
y6_s3_proc2     byte    %32.0g     y6_s3_proc2
                                              11s3: open calendar
y6_s3_proc3     byte    %32.0g     y6_s3_proc3
                                              12s3: is any information missing
y6_s4_isco08    byte    %32.0g     y6_s4_isco08
                                              1s4: in which profession did or do you do your apprenticeship
y6_s4_isco08RV  int     %32.0g     y6_s4_isco08RV
                                              1s4: in which profession did or do you do your apprenticeship (reduced version)
y6_s4_iseiG     float   %32.0g     y6_s4_iseiG
                                              1s4: in which profession did or do you do your apprenticeship, isei (generated)
y6_s4_siopsG    float   %32.0g     y6_s4_siopsG
                                              1s4: in which profession did or do you do your apprenticeship, siops (generated)
y6_s4_grad3     byte    %32.0g     y6_s4_grad3
                                              2s4: did you complete this vocational training
y6_s4_g_isco08  byte    %32.0g     y6_s4_g_isco08
                                              3s4: what is the exact title of your vocational qualification
y6_s4_g_isco0~V int     %32.0g     y6_s4_g_isco08RV
                                              3s4: what is the exact title of your vocational qualification (reduced version)
y6_s4_g_iseiG   float   %32.0g     y6_s4_g_iseiG
                                              3s4: what is the exact title of your vocational qualification, isei (generated)
y6_s4_g_siopsG  float   %32.0g     y6_s4_g_siopsG
                                              3s4: what is the exact title of your vocational qualification, siops (generated)
y6_s4_g_ggrad~G byte    %32.0g     y6_s4_g_ggradeoG
                                              4s4: overall grade you got in vocational qualification certificate (generated)
y6_s4_g_ggradeo double  %32.0g     y6_s4_g_ggradeo
                                              4s4: overall grade you got in vocational qualification certificate, grade
y6_s4_g_gcred~o byte    %32.0g     y6_s4_g_gcredito
                                              4s4: overall grade you got in vocational qualification certificate, credit point
y6_s4_g_educ1   byte    %32.0g     y6_s4_g_educ1
                                              5s4: receive an additional educational degree with your vocational qualification
y6_s4_gs_fed_ge byte    %32.0g     y6_s4_gs_fed_ge
                                              6s4: in which federal state did you receive this degree
y6_s4_gs_educ5  byte    %52.0g     y6_s4_gs_educ5
                                              7s4: in which country did you receive this degree
y6_s4_gs_educ~V byte    %32.0g     y6_s4_gs_educ5RV
                                              7s4: in which country did you receive this degree (reduced version)
y6_s4_gs_educ2  byte    %62.0g     y6_s4_gs_educ2
                                              8s4: which educational degree was this
y6_s4_gs_educ~p str36   %36s                  8s4: which educational degree was this, other educational degree
y6_s4_gs_educ~d str36   %36s                  8s4: which educational degree was this, additional information
y6_s4_gs_ggra~G byte    %32.0g     y6_s4_gs_ggradeoG
                                              9s4: grades in school leaving certificate: overall (generated)
y6_s4_gs_ggra~o double  %32.0g     y6_s4_gs_ggradeo
                                              9s4: grades in school leaving certificate: overall, grade
y6_s4_gs_gcre~o byte    %32.0g     y6_s4_gs_gcredito
                                              9s4: grades in school leaving certificate: overall, credit points
y6_s4_proc1     byte    %32.0g     y6_s4_proc1
                                              10s4: another school-based vocational education since january 2011
y6_s4_proc2     byte    %32.0g     y6_s4_proc2
                                              11s4: open calendar
y6_s4_proc3     byte    %32.0g     y6_s4_proc3
                                              12s4: is any information missing
y6_s5_sit2c     byte    %39.0g     y6_s5_sit2c
                                              1s5: which professional school did or do you attend
y6_s5_sit2cop   str36   %36s                  1s5: which professional school did or do you attend, other school
y6_s5_sit2copRV str72   %72s                  1s5: which professional school, other school (reduced version)
y6_s5_grad3     byte    %32.0g     y6_s5_grad3
                                              2s5: did you complete this continuing vocational education
y6_s5_g_gradG   byte    %32.0g     y6_s5_g_gradG
                                              3s5: what is the exact title of further voc. qualification (generated)
y6_s5_g_isco08  byte    %32.0g     y6_s5_g_isco08
                                              3s5: what is the exact title of further voc. qualification
y6_s5_g_isco0~V int     %32.0g     y6_s5_g_isco08RV
                                              3s5: what is the exact title of further voc. qualification (reduced version)
y6_s5_g_iseiG   float   %32.0g     y6_s5_g_iseiG
                                              3s5: what is the exact title of further voc. qualification, isei (generated)
y6_s5_g_siopsG  float   %32.0g     y6_s5_g_siopsG
                                              3s5: what is the exact title of further voc. qualification, siops (generated)
y6_s5_g_educ2   byte    %62.0g     y6_s5_g_educ2
                                              3s5: exact title of further vocational qualification, general education degree
y6_s5_g_educ2op str36   %36s                  3s5: exact title of further vocational qualification, other qualification
y6_s5_g_educ2~d str36   %36s                  3s5: exact title of further vocational qualification, additional information
y6_s5_g_ggrad~G byte    %32.0g     y6_s5_g_ggradeoG
                                              4s5: grades in school leaving certificate: overall (generated)
y6_s5_g_ggradeo double  %32.0g     y6_s5_g_ggradeo
                                              4s5: grades in school leaving certificate: overall, grade
y6_s5_g_gcred~o byte    %32.0g     y6_s5_g_gcredito
                                              4s5: grades in school leaving certificate: overall, credit points
y6_s5_proc1     byte    %32.0g     y6_s5_proc1
                                              5s5: another school for further education and training since january 2011
y6_s5_proc2     byte    %32.0g     y6_s5_proc2
                                              6s5: open calendar
y6_s5_proc3     byte    %32.0g     y6_s5_proc3
                                              7s5: is any information missing
y6_s6_grad3     byte    %32.0g     y6_s6_grad3
                                              1s6: did you complete this vocational re-training
y6_s6_g_isco08  byte    %32.0g     y6_s6_g_isco08
                                              2s6: what is the exact title of your qualification
y6_s6_g_isco0~V int     %32.0g     y6_s6_g_isco08RV
                                              2s6: what is the exact title of your qualification (reduced version)
y6_s6_g_iseiG   float   %32.0g     y6_s6_g_iseiG
                                              2s6: what is the exact title of your qualification, isei (generated)
y6_s6_g_siopsG  byte    %32.0g     y6_s6_g_siopsG
                                              2s6: what is the exact title of your qualification, siops (generated)
y6_s6_g_ggrad~G byte    %32.0g     y6_s6_g_ggradeoG
                                              3s6: grades in re-training certificate: overall (generated)
y6_s6_g_ggradeo double  %32.0g     y6_s6_g_ggradeo
                                              3s6: grades in re-training certificate: overall, grade
y6_s6_g_gcred~o byte    %32.0g     y6_s6_g_gcredito
                                              3s6: grades in re-training certificate: overall, credit points
y6_s6_educ1     byte    %32.0g     y6_s6_educ1
                                              4s6: receive an additional educational degree with your re-training
y6_s6_gs_fed_ge byte    %32.0g     y6_s6_gs_fed_ge
                                              5s6: in which federal state did you receive this degree
y6_s6_gs_educ5  byte    %52.0g     y6_s6_gs_educ5
                                              6s6: in which country did you receive this degree
y6_s6_gs_educ~V byte    %32.0g     y6_s6_gs_educ5RV
                                              6s6: in which country did you receive this degree (reduced version)
y6_s6_gs_educ2  byte    %62.0g     y6_s6_gs_educ2
                                              7s6: which educational degree was this
y6_s6_gs_educ~p str36   %36s                  7s6: which educational degree was this, other educational degree
y6_s6_gs_ggra~G byte    %32.0g     y6_s6_gs_ggradeoG
                                              8s6: grades in school leaving certificate: overall (generated)
y6_s6_gs_ggra~o double  %32.0g     y6_s6_gs_ggradeo
                                              8s6: grades in school leaving certificate: overall, grade
y6_s6_gs_gcre~o byte    %32.0g     y6_s6_gs_gcredito
                                              8s6: grades in school leaving certificate: overall, credit points
y6_s6_proc1     byte    %32.0g     y6_s6_proc1
                                              9s6: another re-training since january 2011
y6_s6_proc2     byte    %32.0g     y6_s6_proc2
                                              10s6: open calendar
y6_s6_proc3     byte    %32.0g     y6_s6_proc3
                                              11s6: is any information missing
y6_s7_masubj1~g byte    %75.0g     y6_s7_masubj1_sg
                                              1s7: which subject did or do you study, major subject 1, subject group
y6_s7_masu~1_as byte    %69.0g     y6_s7_masubj1_as
                                              1s7: which subject did or do you study, major subject 1, area of studies
y6_s7_masubj1_s int     %72.0g     y6_s7_masubj1_s
                                              1s7: which subject did or do you study, major subject 1, subject
y6_s7_masubj2~g byte    %75.0g     y6_s7_masubj2_sg
                                              1s7: which subject did or do you study, major subject 2, subject group
y6_s7_masu~2_as byte    %69.0g     y6_s7_masubj2_as
                                              1s7: which subject did or do you study, major subject 2, area of studies
y6_s7_masubj2_s int     %72.0g     y6_s7_masubj2_s
                                              1s7: which subject did or do you study, major subject 2, subject
y6_s7_masubj3~g byte    %75.0g     y6_s7_masubj3_sg
                                              1s7: which subject did or do you study, major subject 3, subject group
y6_s7_masu~3_as byte    %69.0g     y6_s7_masubj3_as
                                              1s7: which subject did or do you study, major subject 3, area of studies
y6_s7_masubj3_s int     %72.0g     y6_s7_masubj3_s
                                              1s7: which subject did or do you study, major subject 3, subject
y6_s7_masubj4~g byte    %75.0g     y6_s7_masubj4_sg
                                              1s7: which subject did or do you study, major subject 4, subject group
y6_s7_masu~4_as byte    %69.0g     y6_s7_masubj4_as
                                              1s7: which subject did or do you study, major subject 4, area of studies
y6_s7_masubj4_s byte    %72.0g     y6_s7_masubj4_s
                                              1s7: which subject did or do you study, major subject 4, subject
y6_s7_type      byte    %54.0g     y6_s7_type
                                              2s7: which institution of higher education did or do you attend
y6_s7_typeop    str36   %36s                  2s7: which institution of higher education, other institution
y6_s7_typeopRV  str67   %67s                  2s7: which institution of higher education, other institution (reduced version)
y6_s7_type_add  str36   %36s                  2s7: which institution of higher education, additional information
y6_s7_name      str36   %36s                  3s7: what was or is the exact name of this institution of higher education
y6_s7_city      str36   %36s                  4s7: in which city did or do you study this subject
y6_s7_rest      byte    %32.0g     y6_s7_rest
                                              5s7: selection test or specific gpa for admission to study subject
y6_s7_grad3     byte    %32.0g     y6_s7_grad3
                                              6s7: did you earn a university degree in this subject
y6_s7_g_degree  byte    %52.0g     y6_s7_g_degree
                                              7s7: which university degree did you earn
y6_s7_g_degre~p str36   %36s                  7s7: which university degree did you earn, other degree
y6_s7_g_ggrad~G byte    %32.0g     y6_s7_g_ggradeoG
                                              8s7: grades in examination certificate: overall (generated)
y6_s7_g_ggradeo double  %32.0g     y6_s7_g_ggradeo
                                              8s7: grades in examination certificate: overall, grade
y6_s7_g_gcred~o byte    %32.0g     y6_s7_g_gcredito
                                              8s7: grades in examination certificate: overall, credit points
y6_s7_degree    byte    %52.0g     y6_s7_degree
                                              9s7: which degree will you receive with your current studies
y6_s7_degreeop  str36   %36s                  9s7: which degree will you receive with your current studies, other degree
y6_s7_degree_~d str36   %36s                  9s7: which degree will you receive with current studies, additional information
y6_s7_proc1     byte    %32.0g     y6_s7_proc1
                                              10s7: another subject since january 2011
y6_s7_proc2     byte    %32.0g     y6_s7_proc2
                                              11s7: open calendar
y6_s7_proc3     byte    %32.0g     y6_s7_proc3
                                              12s7: is any information missing
y6_s8_educ1     byte    %32.0g     y6_s8_educ1
                                              1s8: receive an educational degree in the course of your vocational preparation
y6_s8_gs_fed_ge byte    %32.0g     y6_s8_gs_fed_ge
                                              2s8: in which federal state did you receive this degree
y6_s8_gs_educ5  byte    %52.0g     y6_s8_gs_educ5
                                              3s8: in which country did you receive this degree
y6_s8_gs_educ~V byte    %32.0g     y6_s8_gs_educ5RV
                                              3s8: in which country did you receive this degree (reduced version)
y6_s8_gs_educ2  byte    %62.0g     y6_s8_gs_educ2
                                              4s8: which educational degree was this
y6_s8_gs_educ~p str36   %36s                  4s8: which educational degree was this, other educational degree
y6_s8_gs_educ~d str36   %36s                  4s8: which educational degree was this, additional information
y6_s8_gs_ggra~G byte    %32.0g     y6_s8_gs_ggradeoG
                                              5s8: grades in school leaving certificate: overall (generated)
y6_s8_gs_ggra~o double  %32.0g     y6_s8_gs_ggradeo
                                              5s8: grades in school leaving certificate: overall, grade
y6_s8_gs_gcre~o float   %32.0g     y6_s8_gs_gcredito
                                              5s8: grades in school leaving certificate: overall, credit points
y6_s8_prepG     byte    %32.0g     y6_s8_prepG
                                              6s8: for which profession did voc. prep. measure prepare you (generated)
y6_s8_isco08    byte    %32.0g     y6_s8_isco08
                                              6s8: for which profession did voc. prep. measure prepare you
y6_s8_isco08RV  int     %32.0g     y6_s8_isco08RV
                                              6s8: for which profession did voc. prep. measure prepare you (reduced version)
y6_s8_iseiG     float   %32.0g     y6_s8_iseiG
                                              6s8: for which profession did voc. prep. measure prepare you, isei (generated)
y6_s8_siopsG    float   %32.0g     y6_s8_siopsG
                                              6s8: for which profession did voc. prep. measure prepare you, siops (generated)
y6_s8_proc1     byte    %32.0g     y6_s8_proc1
                                              7s8: another vocational preparation measure since january 2011
y6_s8_proc2     byte    %32.0g     y6_s8_proc2
                                              8s8: open calendar
y6_s8_proc3     byte    %32.0g     y6_s8_proc3
                                              9s8: is any information missing
y6_s9_tactG     byte    %32.0g     y6_s9_tactG
                                              1s9: in which profession did or do you do your vocational training (generated)
y6_s9_isco08    byte    %32.0g     y6_s9_isco08
                                              1s9: in which profession did or do you do your vocational training
y6_s9_isco08RV  int     %32.0g     y6_s9_isco08RV
                                              1s9: in which profession did or do you do your voc. training (reduced version)
y6_s9_iseiG     float   %32.0g     y6_s9_iseiG
                                              1s9: in which profession did or do you do your voc. training, isei (generated)
y6_s9_siopsG    float   %32.0g     y6_s9_siopsG
                                              1s9: in which profession did or do you do your voc. training, siops (generated)
y6_s9_tactop    str36   %36s                  1s9: in which profession did or do you do your voc. training, other activity
y6_s9_tactopRV  str72   %72s                  1s9: profession of vocational training, other activity (reduced version)
y6_s9_proc1     byte    %32.0g     y6_s9_proc1
                                              2s9: another vocational training since january 2011
y6_s9_proc2     byte    %32.0g     y6_s9_proc2
                                              3s9: open calendar
y6_s9_proc3     byte    %32.0g     y6_s9_proc3
                                              4s9: is any information missing
y6_s10_isco08   byte    %32.0g     y6_s10_isco08
                                              1s10: what is your profession called
y6_s10_isco08RV int     %32.0g     y6_s10_isco08RV
                                              1s10: what is your profession called (reduced version)
y6_s10_iseiG    float   %32.0g     y6_s10_iseiG
                                              1s10: what is your profession called, isei (generated)
y6_s10_siopsG   float   %32.0g     y6_s10_siopsG
                                              1s10: what is your profession called, siops (generated)
y6_s10_cont5    byte    %36.0g     y6_s10_cont5
                                              2s10: type of contract at the beginning for this profession or job
y6_s10_cont6    byte    %32.0g     y6_s10_cont6
                                              3s10: was contract changed from a temporary contract to a permanent contract
y6_s10_workh    byte    %37.0g     y6_s10_workh
                                              4s10: weekly working hours in contract at beginning of job
y6_s10_workhRV  float   %37.0g     y6_s10_workhRV
                                              4s10: weekly working hours in contract at beginning of job (reduced version)
y6_s10_proc1a   byte    %32.0g     y6_s10_proc1a
                                              5s10: another full-time employment in same occupation since january 2011
y6_s10_proc1b   byte    %32.0g     y6_s10_proc1b
                                              6s10: another full-time employment in different occupation since january 2011
y6_s10_proc2    byte    %32.0g     y6_s10_proc2
                                              7s10: open calendar
y6_s10_proc3    byte    %32.0g     y6_s10_proc3
                                              8s10: is any information missing
y6_s11_isco08   byte    %32.0g     y6_s11_isco08
                                              1s11: what is your profession called
y6_s11_isco08RV int     %32.0g     y6_s11_isco08RV
                                              1s11: what is your profession called (reduced version)
y6_s11_iseiG    float   %32.0g     y6_s11_iseiG
                                              1s11: what is your profession called, isei (generated)
y6_s11_siopsG   float   %32.0g     y6_s11_siopsG
                                              1s11: what is your profession called, siops (generated)
y6_s11_proc1a   byte    %32.0g     y6_s11_proc1a
                                              2s11: another employment as contr. family worker in same occ. since january 2011
y6_s11_proc1b   byte    %32.0g     y6_s11_proc1b
                                              3s11: another employment as family worker in different occ. since january 2011
y6_s11_proc2    byte    %32.0g     y6_s11_proc2
                                              4s11: open calendar
y6_s11_proc3    byte    %32.0g     y6_s11_proc3
                                              5s11: is any information missing
y6_s12_isco08   byte    %32.0g     y6_s12_isco08
                                              1s12: what is your profession called
y6_s12_isco08RV int     %32.0g     y6_s12_isco08RV
                                              1s12: what is your profession called (reduced version)
y6_s12_iseiG    float   %32.0g     y6_s12_iseiG
                                              1s12: what is your profession called, isei (generated)
y6_s12_siopsG   float   %32.0g     y6_s12_siopsG
                                              1s12: what is your profession called, siops (generated)
y6_s12_proc1a   byte    %32.0g     y6_s12_proc1a
                                              2s12: another self-employment in same occupation since january 2011
y6_s12_proc1b   byte    %32.0g     y6_s12_proc1b
                                              3s12: another self-employment in different occupation since january 2011
y6_s12_proc2    byte    %32.0g     y6_s12_proc2
                                              4s12: open calendar
y6_s12_proc3    byte    %32.0g     y6_s12_proc3
                                              5s12: is any information missing
y6_s13_isco08   byte    %32.0g     y6_s13_isco08
                                              1s13: what is your profession called
y6_s13_isco08RV int     %32.0g     y6_s13_isco08RV
                                              1s13: what is your profession called (reduced version)
y6_s13_iseiG    float   %32.0g     y6_s13_iseiG
                                              1s13: what is your profession called, isei (generated)
y6_s13_siopsG   float   %32.0g     y6_s13_siopsG
                                              1s13: what is your profession called, siops (generated)
y6_s13_cont5    byte    %36.0g     y6_s13_cont5
                                              2s13: type of contract at the beginning for this profession or job
y6_s13_cont6    byte    %32.0g     y6_s13_cont6
                                              3s13: was contract changed from a temporary contract to a permanent contract
y6_s13_workh    byte    %37.0g     y6_s13_workh
                                              4s13: weekly working hours in contract at beginning of job
y6_s13_workhRV  float   %37.0g     y6_s13_workhRV
                                              4s13: weekly working hours in contract at beginning of job (reduced version)
y6_s13_proc1a   byte    %32.0g     y6_s13_proc1a
                                              5s13: another part-time employment in same occupation since january 2011
y6_s13_proc1b   byte    %32.0g     y6_s13_proc1b
                                              6s13: another part-time employment in different occupation since january 2011
y6_s13_proc2    byte    %32.0g     y6_s13_proc2
                                              7s13: open calendar
y6_s13_proc3    byte    %32.0g     y6_s13_proc3
                                              8s13: is any information missing
y6_s14_tact     byte    %62.0g     y6_s14_tact
                                              1s14: what did you do exactly
y6_s14_tactop   str36   %36s                  1s14: what did you do exactly, something else
y6_s14_tactopRV str35   %35s                  1s14: what did you do exactly, something else (reduced version)
y6_s14_isco08   byte    %32.0g     y6_s14_isco08
                                              2s14: for which profession did or does this activity prepare
y6_s14_isco08RV int     %32.0g     y6_s14_isco08RV
                                              2s14: for which profession did or does this activity prepare (reduced version)
y6_s14_iseiG    float   %32.0g     y6_s14_iseiG
                                              2s14: for which profession did or does this activity prepare, isei (generated)
y6_s14_siopsG   float   %32.0g     y6_s14_siopsG
                                              2s14: for which profession did or does this activity prepare, siops (generated)
y6_s14_paid     byte    %32.0g     y6_s14_paid
                                              3s14: was this activity paid or unpaid or was there expense allowance
y6_s14_proc1    byte    %32.0g     y6_s14_proc1
                                              4s14: another internship since january 2011
y6_s14_proc2    byte    %32.0g     y6_s14_proc2
                                              5s14: open calendar
y6_s14_proc3    byte    %32.0g     y6_s14_proc3
                                              6s14: is any information missing
y6_s15_proc1    byte    %32.0g     y6_s15_proc1
                                              1s15: another secondary employment since january 2011
y6_s15_proc2    byte    %32.0g     y6_s15_proc2
                                              2s15: open calendar
y6_s15_proc3    byte    %32.0g     y6_s15_proc3
                                              3s15: is any information missing
y6_s16_proc1    byte    %32.0g     y6_s16_proc1
                                              1s16: another maternity leave or parental leave since january 2011
y6_s16_proc2    byte    %32.0g     y6_s16_proc2
                                              2s16: open calendar
y6_s16_proc3    byte    %32.0g     y6_s16_proc3
                                              3s16: is any information missing
y6_s17_proc1    byte    %32.0g     y6_s17_proc1
                                              1s17: another volontary or military service since january 2011
y6_s17_proc2    byte    %32.0g     y6_s17_proc2
                                              2s17: open calendar
y6_s17_proc3    byte    %32.0g     y6_s17_proc3
                                              3s17: is any information missing
y6_s18_proc1    byte    %32.0g     y6_s18_proc1
                                              1s18: another work & travel programme or stay abroad since january 2011
y6_s18_proc2    byte    %32.0g     y6_s18_proc2
                                              2s18: open calendar
y6_s18_proc3    byte    %32.0g     y6_s18_proc3
                                              3s18: is any information missing
y6_s19_proc1    byte    %32.0g     y6_s19_proc1
                                              1s19: another period of unemployment or job-seeking since january 2011
y6_s19_proc2    byte    %32.0g     y6_s19_proc2
                                              2s19: open calendar
y6_s19_proc3    byte    %32.0g     y6_s19_proc3
                                              3s19: is any information missing
y6_s20_proc1    byte    %32.0g     y6_s20_proc1
                                              1s20: another period as househusband or housewife since january 2011
y6_s20_proc2    byte    %32.0g     y6_s20_proc2
                                              2s20: open calendar
y6_s20_proc3    byte    %32.0g     y6_s20_proc3
                                              3s20: is any information missing
y6_s21_proc1    byte    %32.0g     y6_s21_proc1
                                              1s21: another period of incapacity for work since january 2011
y6_s21_proc2    byte    %32.0g     y6_s21_proc2
                                              2s21: open calendar
y6_s21_proc3    byte    %32.0g     y6_s21_proc3
                                              3s21: is any information missing
y6_s22_tactop   str36   %36s                  1s22: what did you do during this time
y6_s22_tactopRV str55   %55s                  1s22: what did you do during this time (reduced version)
y6_s22_proc1    byte    %32.0g     y6_s22_proc1
                                              2s22: another activity since january 2011
y6_s22_proc2    byte    %32.0g     y6_s22_proc2
                                              3s22: open calendar
y6_s22_proc3    byte    %32.0g     y6_s22_proc3
                                              4s22: is any information missing
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: youthid

. 
.  
. order  *id   y6_ylhcs_index y6_s1_sit2a *dat* y6_ylhcs_spt2  y6_ylhcs_spt1

. br *id   y6_ylhcs_index y6_s1_sit2a *dat* y6_ylhcs_spt2  y6_ylhcs_spt1

. 
.   
. 
.  
.  
. ************************************************************************
. **# Bookmark  2. Preparation of dataset ********************************
. ************************************************************************
. 
. * Dataset  education and profession
. use "$DATA/w6_ylhcs_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. 
.  
. *  add year of birth from the other dataset 
. merge m:1 youthid using "$DATA/w6_ym_ge_v6.0.0_rv.dta" , keepusing (y6_doby y6_dobm  y6_sex) keep (match)
(label youthid_ge already defined)
(label y6_sample already defined)
(label y6_version already defined)
(label y6_status already defined)
(label country already defined)
(label youthid already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            25,008  (_merge==3)
    -----------------------------------------

. 
. 
. * Get months and year of the interview separately 
. gen intdate = dofm(y6_intdat_ylhcsRV)

. format intdate %d

. gen intmonth=month(intdate)

. gen inty=year(intdate) 

. drop intdate

. 
. * generate an age variable (broad)
. gen age = y6_ylhcs_begdaty - y6_doby 

. fre age  if y6_ylhcs_index==1  

age
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   5     |          7       0.14       0.14       0.14
        6     |         64       1.27       1.27       1.41
        7     |         80       1.59       1.59       2.99
        8     |         26       0.52       0.52       3.51
        9     |         75       1.49       1.49       5.00
        10    |       1339      26.56      26.56      31.55
        11    |       1531      30.36      30.36      61.92
        12    |        574      11.38      11.38      73.30
        13    |        329       6.53       6.53      79.83
        14    |        221       4.38       4.38      84.21
        15    |        256       5.08       5.08      89.29
        16    |        305       6.05       6.05      95.34
        17    |        152       3.01       3.01      98.35
        18    |         35       0.69       0.69      99.05
        19    |         27       0.54       0.54      99.58
        20    |         10       0.20       0.20      99.78
        21    |          8       0.16       0.16      99.94
        22    |          2       0.04       0.04      99.98
        2032  |          1       0.02       0.02     100.00
        Total |       5042     100.00     100.00           
-----------------------------------------------------------

. br if age == 22 & y6_ylhcs_index==1  

. fre y6_sample

y6_sample -- sample
-------------------------------------------------------------------
                      |      Freq.    Percent      Valid       Cum.
----------------------+--------------------------------------------
Valid   1 panel       |       7830      31.31      31.31      31.31
        2 refreshment |      17178      68.69      68.69     100.00
        Total         |      25008     100.00     100.00           
-------------------------------------------------------------------

. 
. 
. *clone some variables
. clonevar begm  = y6_ylhcs_begdatm

. clonevar begy  = y6_ylhcs_begdaty

. 
. clonevar endm        = y6_ylhcs_enddatm

. clonevar endy        = y6_ylhcs_enddaty

. 
. clonevar birthdm     = y6_dobm 

. clonevar birthdy     = y6_doby 

. 
. clonevar index       = y6_ylhcs_index

. clonevar spelltype   =  y6_s1_sit2a

. 
. 
. 
. * create a variable for the educational spells including both y6_s1_sit2a (detailed info on school) and y6_ylhcs_spt2 (other things such employment,..)
. 
. * the y6_ylhcs_spt2 is added below the y6_s1_sit2a  variable (a bit like appended)
. local i = 18

. while `i' <= 38 {
  2.     replace spelltype = `i' if y6_ylhcs_spt2 == `i' - 16
  3.     local i = `i' + 1
  4. }
(649 real changes made)
(1,840 real changes made)
(573 real changes made)
(46 real changes made)
(6 real changes made)
(1,949 real changes made)
(593 real changes made)
(343 real changes made)
(1,403 real changes made)
(166 real changes made)
(103 real changes made)
(585 real changes made)
(1,498 real changes made)
(2,946 real changes made)
(87 real changes made)
(459 real changes made)
(358 real changes made)
(801 real changes made)
(51 real changes made)
(47 real changes made)
(3,948 real changes made)

. 
. * set to missing
. recode spelltype (-99 -88 -77 =. )
(10 changes made to spelltype)

. 
. *relabel 
.     label define spelltype ///
>     1   "lower secondary school (hauptschule)" ///
>     2   "intermediate secondary school (realschule)" ///
>     3   "combined lower and intermediate secondary school (realschule plus)" ///
>     4   "upper secondary school (gymnasium)" ///
>     5   "higher secondary vocational school (fachoberschule)" ///
>     6   "combined lower and intermediate secondary school (mittelschule)" ///
>     7   "combined lower and intermediate secondary school (regelschule)" ///
>     8   "combined lower and intermediate secondary school (sekundarschule)" ///
>     9   "combined lower and intermediate secondary school (haupt-realschule)" ///
>     10  "school for special needs (foerderschule)" ///
>     11  "rudolf-steiner school (waldorfschule)" ///
>     12  "comprehensive school (integrierte gesamtschule)" ///
>     13  "combined lower, intermediate and upper secondary school (kooperative gesamtschule)" ///
>     14  "combined lower, intermediate and upper secondary school (kooperative gesamtschule): lower secondary track (hauptschulzweig)" ///
>     15  "combined lower, intermediate and upper secondary school (kooperative gesamtschule): intermediate secondary track (realschulzweig)" ///
>     16  "combined lower, intermediate and upper secondary school (kooperative gesamtschule): upper secondary track (gymnasialzweig)" ///
>     17  "other general education school" /// 
>     18 "second chance education" ///
>     19 "apprenticeship (in a company and in school)" ///
>     20 "school-based vocational education" ///
>     21 "school for further education and training" ///
>     22 "re-training" ///
>     23 "studying" ///
>     24 "vocational preparation" ///
>     25 "other vocational education" ///
>     26 "full-time employment" ///
>     27 "contributing family worker" ///
>     28 "self-employment" ///
>     29 "part-time employment" ///
>     30 "internship/traineeship/etc." ///
>     31 "other secondary employment" ///
>     32 "maternity/parental leave" ///
>     33 "voluntary/military service" ///
>     34 "work & travel programme/stay abroad" ///
>     35 "unemployment/job-seeking" ///
>     36 "housewife/househusband" ///
>     37 "incapacity for work" ///
>     38 "other activity" , modify 

.     label values spelltype spelltype

. 
. 
.         
.         
.         
. 
. ** if ongoing, take the date (month) of the interview as month (if month is missing)
. br *id y6_ylhcs_index  *m *y *ongoing *correction *tp if endm<0 | begm<0 

. 
. //Q: in the variable y6_ylhcs_ongoing  it says sometimes "correction of end date" but I do not know whether they actually corrected the variable and where to find this information??  
. 
. * see e.g. this person 
. br *id y6_ylhcs_index  *m *y *ongoing *correction *tp if youthid== 20140217

. 
. 
. * missing/no answer/ don't know but still ongoing --> interviewmonth and interviewyear (kind of censoring)
. replace endm  = intmonth if y6_ylhcs_ongoing == 1 & y6_ylhcs_enddatm  < 0  |  y6_ylhcs_enddatm >12 & y6_ylhcs_ongoing == 1 
(10 real changes made)

. replace endy  = inty if y6_ylhcs_ongoing == 1 & y6_ylhcs_enddaty  < 0 
(0 real changes made)

. 
. 
. * consider missings using 
. fre y6_ylhcs_ongoing 

y6_ylhcs_ongoing -- spell is still ongoing
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   1 yes |       6456      25.82      25.82      25.82
        2 no  |      18552      74.18      74.18     100.00
        Total |      25008     100.00     100.00           
-----------------------------------------------------------

. fre y6_ylhcs_tp

y6_ylhcs_tp -- technical problem in longitudinal section
---------------------------------------------------------------------------------------
                                          |      Freq.    Percent      Valid       Cum.
------------------------------------------+--------------------------------------------
Valid   0 case correct                    |      24978      99.88      99.88      99.88
        1 longitudinal section incomplete |         30       0.12       0.12     100.00
        Total                             |      25008     100.00     100.00           
---------------------------------------------------------------------------------------

. fre y6_ylhcs_correction

y6_ylhcs_correction -- correction in check module
--------------------------------------------------------------------------------------------------------
                                                           |      Freq.    Percent      Valid       Cum.
-----------------------------------------------------------+--------------------------------------------
Valid   0 no correction of date or indicator 'spell is     |      24062      96.22      96.22      96.22
          still ongoing'                                   |                                            
        1 correction of start date                         |        187       0.75       0.75      96.96
        2 correction of end date                           |        364       1.46       1.46      98.42
        3 correction of start and end date                 |         85       0.34       0.34      98.76
        4 correction of indicator 'spell is still ongoing' |        210       0.84       0.84      99.60
        5 correction of end date and indicator 'spell is   |         94       0.38       0.38      99.98
          still ongoing'                                   |                                            
        6 correction of start date, end date, and          |          6       0.02       0.02     100.00
          indicator 'spell is still ongoing'               |                                            
        Total                                              |      25008     100.00     100.00           
--------------------------------------------------------------------------------------------------------

. 
. 
. * replace unspecific information on the month for beginning and ending month and set to missing
. global dates "begm endm  begy endy birthdm birthdy"

. 
. foreach val of global dates {
  2. recode `val'  (21 = 2 ) (24 = 4 ) (27 = 7) (30 = 9) (32 = 11) (-99 -88 -55 -22 -44 = .)
  3. }
(1,752 changes made to begm)
(1,048 changes made to endm)
(16 changes made to begy)
(15 changes made to endy)
(6 changes made to birthdm)
(6 changes made to birthdy)

. 
. 
. ** my idea here is that there are five categories/periods meaning the year is split up into 2,5 months per period so first January- mid March so I always took the month "in the middle" , in this case February (other suggestions for coding are welcome!)
. 
. /*
>         21  beginning of year/winter  --> February
>         24  spring                    --> April
>         27  mid-year/summer           --> July
>         30  autumn                    --> September
>         32  end of year                           --> November
> */ 
. 
. ** another option would be to take the end of the last spell as the beginning of the next.... ? but there may (I did actually not check yet) be gaps between spells??  
. 
. 
. * Change data to century month  //the e_m monthly date (months since 1960m1) corresponding to year Y, month M 
. 
. * Beginning of a spell in cm 
. gen begincm = ym(begy, begm)
(47 missing values generated)

.  
. * End of a spell in cm
. gen endcm = ym(endy, endm)
(23 missing values generated)

. 
. * Year and month of birth in cm  (not sure if this is relevant but more specific than year of birth)
. gen birthcm = ym( birthdy, birthdm)
(6 missing values generated)

. 
. * get the earliest and the latest cm we observe an individual (that is the range of our observations (in months))
. egen minbegincm = min(begincm)

. egen maxendcm   = max(endcm)

. 
. dis  maxendcm -  minbegincm   // 210 
210

. 
. 
. br *id *ongoing* *enddat* *begdat* *cm* begy begm endy endm if youthid== 20040214 & index==5 

. br *id  *enddat* *ongoing* *begdat*  begy begm endy endm if youthid== 20040214 & index==5 

. br *id  *enddat* *ongoing* *begdat*  begy begm endy endm if youthid== 22018010  & index==1 

. 
. 
. 
. unique(youthid)
Number of unique values of youthid is  5074
Number of records is  25008

. /*
> Number of unique values of youthid is  5074
> Number of records is  25008
> */
. 
. * Check missings
. count if endcm==.
  23

. count if begincm==.
  47

. count if endcm & begincm==.
  47

. 
. 
. ************************************************************************
. **# Bookmark 3. Globals for spell data preparation   *******************
. ************************************************************************
.  
. 
. global pid                          youthid                                     /** Identifier for individuals in spell datafile **/

. global spellnr                  y6_ylhcs_index              /** Identifier for spells of each person **/

. global spelltype                spelltype                       /** spelltype of spells which will be used for splitting **/

. global spells                   "1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 "      /** Spells: values of variable spelltype (see creation above)  **/

. global begin                    begincm                             /** Begin of spells **/

. global end                              endcm                                   /** End of spells **/

. 
. 
. sort ${pid} ${begin} ${end} ${spelltype} 

. order ${pid} ${begin} ${end} ${spelltype} 

. 
. 
. 
. ************************************************************************
. **# Bookmark 4.   Spell data preparation *******************************
. ************************************************************************
. 
. 
. * Adjust the endings of all spells to be exclusive (which means the last months is not the last month e.g. in school but the month after (important for duration)) 
. bysort ${pid} (${begin} ${end}): replace ${end} = ${end} + 1 if ${end} > 0 
(24,985 real changes made)

. 
. 
. * Generate a duration variable (in months)
. gen duration = ${end} - ${begin} 
(56 missing values generated)

. order ${pid} ${begin} ${end} ${spelltype}  duration *ongoing* *enddat* *begdat* 

. br ${pid} ${begin} ${end} ${spelltype}  duration *ongoing*  *enddat* *begdat*  

. 
. *if beginning or end of a spell is missing, the duration of a spell is set as zero month and the spell will not be expanded
. replace duration = 0 if ${end} ==. | ${begin} ==.
(56 real changes made)

. replace duration = 0 if duration <0   // there is one spell for which the duration is negative (youthid== 22018010  & index==1), in my opinion, this is a mistake in the data, since mid-year/summer is earlier than october??  --> recoded to 0 
(1 real change made)

. 
. fre duration

duration
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   0     |         57       0.23       0.23       0.23
        1     |       2086       8.34       8.34       8.57
        2     |       2296       9.18       9.18      17.75
        3     |       1643       6.57       6.57      24.32
        4     |        995       3.98       3.98      28.30
        5     |        793       3.17       3.17      31.47
        6     |        997       3.99       3.99      35.46
        7     |        769       3.08       3.08      38.53
        8     |        655       2.62       2.62      41.15
        9     |        538       2.15       2.15      43.30
        10    |        614       2.46       2.46      45.76
        11    |        800       3.20       3.20      48.96
        12    |       1013       4.05       4.05      53.01
        13    |        686       2.74       2.74      55.75
        14    |        224       0.90       0.90      56.65
        15    |        152       0.61       0.61      57.25
        16    |        135       0.54       0.54      57.79
        17    |        174       0.70       0.70      58.49
        18    |        265       1.06       1.06      59.55
        19    |        289       1.16       1.16      60.70
        :     |          :          :          :          :
        140   |          2       0.01       0.01      99.73
        141   |          5       0.02       0.02      99.75
        142   |          3       0.01       0.01      99.76
        143   |          9       0.04       0.04      99.80
        144   |          5       0.02       0.02      99.82
        145   |          4       0.02       0.02      99.84
        151   |          1       0.00       0.00      99.84
        153   |          4       0.02       0.02      99.86
        154   |          6       0.02       0.02      99.88
        155   |          6       0.02       0.02      99.90
        156   |         10       0.04       0.04      99.94
        157   |          5       0.02       0.02      99.96
        158   |          1       0.00       0.00      99.97
        162   |          1       0.00       0.00      99.97
        167   |          2       0.01       0.01      99.98
        168   |          1       0.00       0.00      99.98
        169   |          1       0.00       0.00      99.99
        171   |          1       0.00       0.00      99.99
        176   |          1       0.00       0.00     100.00
        197   |          1       0.00       0.00     100.00
        Total |      25008     100.00     100.00           
-----------------------------------------------------------

. 
. * multiply/expand each spell according to its duration 
. expand duration
(57 zero counts ignored; observations not deleted)
(598,762 observations created)

. 
. 
. * adjust the beginning of all spells that the duration of each subspell of an original spell amounts to one months 
. bysort ${pid} ${spellnr} (${begin} ${end}): replace ${begin} = ${begin}[_n-1] + 1 if ${begin}[_n-1]!= .
(598,762 real changes made)

.  
. * adjust the ending so that the ending of each subspell equals to the beginning of the next subspell 
. replace ${end} = ${begin} + 1 if ${begin}!=. 
(598,772 real changes made)

. 
. 
. drop duration 

. order ${pid} ${begin} ${end} ${spellnr} ${spelltype}

.  
. save "$TEMP\spelldata.dta", replace 
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata.dta saved

. 
. 
. 
. ************************************************************************
. **# Bookmark 5.  Panel data preparation  *******************************
. ************************************************************************
. 
. * Create a "blanco" dataset with youthid and N total observations (see dis  maxendcm -  minbegincm) to merge the spelldata with 
. 
. * Dataset  education and profession 
. use "$DATA/w6_ylhcs_ge_v6.0.0_rv.dta", clear
(30 Jul 2021)

. 
. 
. * Define some globals 
. global startcm 469  // start date of the earliest time observed (see minbegincm above)

. global expansion 211 // whole observation period of the sample (see dis  maxendcm -  minbegincm   // 210  above (I made 211 just to be sure))

. 
. 
. * identify the first spell of each individual (tag =1 ) 
. bys ${pid}(y6_ylhcs_index): gen tag= _n ==1

. 
. * keep only one row for each individual
. keep if tag ==1 
(19,934 observations deleted)

. keep ${pid} 

. unique(${pid})
Number of unique values of youthid is  5074
Number of records is  5074

. expand ${expansion}    
(1,065,540 observations created)

. sort ${pid} 

. 
. gen begincm= ${startcm}

. 
. 
. * create a month starting from the first month anyone was observed and ending with the last month anyone was observed (practically like code above)
. bysort ${pid}  (${begin} ): replace ${begin} = ${begin}[_n-1] + 1 if ${begin}[_n-1]!= .
(1,065,540 real changes made)

. 
. gen endcm= 0

. * adjust the ending so that the ending of each subspell equals to the beginning of the next subspell 
. replace ${end} = ${begin} + 1 if ${begin}!=. 
(1,070,614 real changes made)

. 
. 
. save "$TEMP\paneldata.dta", replace
file C:\Users\hornunma\Desktop\DATA\TEMP\paneldata.dta saved

. 
. 
. 
. ************************************************************************
. **# Bookmark 6.   Merging    *******************************************
. ************************************************************************
. 
. use "$TEMP\spelldata.dta", clear  
(30 Jul 2021)

. 
. 
. ** Generate a variable indicating the educational/spelltype status for each index/spell (in this case total 17 = (max)y6_ylhcs_index))
. * generate a variable for each possible value of ${spelltype}  (22 values)
. forvalues i = 1(1)17 {
  2. clonevar spell_edu`i' =  ${spelltype}  if index ==`i'
  3.  display `i'
  4. }
(262,763 missing values generated)
1
(514,154 missing values generated)
2
(558,507 missing values generated)
3
(583,414 missing values generated)
4
(600,381 missing values generated)
5
(612,558 missing values generated)
6
(617,629 missing values generated)
7
(620,518 missing values generated)
8
(622,297 missing values generated)
9
(622,840 missing values generated)
10
(623,350 missing values generated)
11
(623,531 missing values generated)
12
(623,676 missing values generated)
13
(623,729 missing values generated)
14
(623,744 missing values generated)
15
(623,758 missing values generated)
16
(623,768 missing values generated)
17

. 
. 
. save "$TEMP\spelldata_short.dta", replace 
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_short.dta saved

. 
. 
. ** here, I create one separate dataset for each spell (because sometimes spells overlap which means merge doesn't work if we'd do it with the complete dataset)
. forvalues i = 1(1)17 {
  2.         use "$TEMP\spelldata_short.dta", clear  
  3.         keep if index==`i'
  4.         keep youthid begincm endcm birthcm index  spell_edu`i'           // add here any variables you'd want to keep from the spelldataset 
  5.         clonevar index`i' =  index
  6.         drop index
  7.         save "$TEMP\spelldata_`i'.dta", replace
  8.  display `i'
  9. }
(30 Jul 2021)
(262,763 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_1.dta saved
1
(30 Jul 2021)
(514,026 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_2.dta saved
2
(30 Jul 2021)
(558,483 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_3.dta saved
3
(30 Jul 2021)
(583,330 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_4.dta saved
4
(30 Jul 2021)
(600,320 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_5.dta saved
5
(30 Jul 2021)
(612,558 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_6.dta saved
6
(30 Jul 2021)
(617,629 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_7.dta saved
7
(30 Jul 2021)
(620,518 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_8.dta saved
8
(30 Jul 2021)
(622,297 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_9.dta saved
9
(30 Jul 2021)
(622,840 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_10.dta saved
10
(30 Jul 2021)
(623,350 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_11.dta saved
11
(30 Jul 2021)
(623,531 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_12.dta saved
12
(30 Jul 2021)
(623,676 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_13.dta saved
13
(30 Jul 2021)
(623,729 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_14.dta saved
14
(30 Jul 2021)
(623,744 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_15.dta saved
15
(30 Jul 2021)
(623,758 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_16.dta saved
16
(30 Jul 2021)
(623,768 observations deleted)
file C:\Users\hornunma\Desktop\DATA\TEMP\spelldata_17.dta saved
17

. 
. 
. 
. 
. 
. use  "$TEMP\paneldata.dta", clear 
(30 Jul 2021)

. 
. * merge each separate spell dataset to the 'blanco' dataset created above
. forvalues i = 1(1)17 {
  2. merge 1:1 ${pid} ${begin}  using "$TEMP\spelldata_`i'.dta", gen(mergepanel`i')
  3. display `i'
  4. }
(label youthid already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       709,627
        from master                   709,617  (mergepanel1==1)
        from using                         10  (mergepanel1==2)

    Matched                           360,997  (mergepanel1==3)
    -----------------------------------------
1
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       960,888
        from master                   960,884  (mergepanel2==1)
        from using                          4  (mergepanel2==2)

    Matched                           109,740  (mergepanel2==3)
    -----------------------------------------
2
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,005,363
        from master                 1,005,352  (mergepanel3==1)
        from using                         11  (mergepanel3==2)

    Matched                            65,276  (mergepanel3==3)
    -----------------------------------------
3
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,030,205
        from master                 1,030,202  (mergepanel4==1)
        from using                          3  (mergepanel4==2)

    Matched                            40,437  (mergepanel4==3)
    -----------------------------------------
4
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,047,204
        from master                 1,047,198  (mergepanel5==1)
        from using                          6  (mergepanel5==2)

    Matched                            23,444  (mergepanel5==3)
    -----------------------------------------
5
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,059,444
        from master                 1,059,440  (mergepanel6==1)
        from using                          4  (mergepanel6==2)

    Matched                            11,208  (mergepanel6==3)
    -----------------------------------------
6
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,064,513
        from master                 1,064,512  (mergepanel7==1)
        from using                          1  (mergepanel7==2)

    Matched                             6,140  (mergepanel7==3)
    -----------------------------------------
7
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,067,401
        from master                 1,067,401  (mergepanel8==1)
        from using                          0  (mergepanel8==2)

    Matched                             3,252  (mergepanel8==3)
    -----------------------------------------
8
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,069,180
        from master                 1,069,180  (mergepanel9==1)
        from using                          0  (mergepanel9==2)

    Matched                             1,473  (mergepanel9==3)
    -----------------------------------------
9
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,069,723
        from master                 1,069,723  (mergepanel10==1)
        from using                          0  (mergepanel10==2)

    Matched                               930  (mergepanel10==3)
    -----------------------------------------
10
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,233
        from master                 1,070,233  (mergepanel11==1)
        from using                          0  (mergepanel11==2)

    Matched                               420  (mergepanel11==3)
    -----------------------------------------
11
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,414
        from master                 1,070,414  (mergepanel12==1)
        from using                          0  (mergepanel12==2)

    Matched                               239  (mergepanel12==3)
    -----------------------------------------
12
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,559
        from master                 1,070,559  (mergepanel13==1)
        from using                          0  (mergepanel13==2)

    Matched                                94  (mergepanel13==3)
    -----------------------------------------
13
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,612
        from master                 1,070,612  (mergepanel14==1)
        from using                          0  (mergepanel14==2)

    Matched                                41  (mergepanel14==3)
    -----------------------------------------
14
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,627
        from master                 1,070,627  (mergepanel15==1)
        from using                          0  (mergepanel15==2)

    Matched                                26  (mergepanel15==3)
    -----------------------------------------
15
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,641
        from master                 1,070,641  (mergepanel16==1)
        from using                          0  (mergepanel16==2)

    Matched                                12  (mergepanel16==3)
    -----------------------------------------
16
(label youthid already defined)
(label y6_ylhcs_index already defined)
(label spelltype already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                     1,070,651
        from master                 1,070,651  (mergepanel17==1)
        from using                          0  (mergepanel17==2)

    Matched                                 2  (mergepanel17==3)
    -----------------------------------------
17

. 
. 
. order ${pid}  ${begin}  ${end} spell_edu* merge* 

. br

. br if  ${begin}  ==. 

. 
. 
. * create a variable to see how many spells match with a cm info (could be >1 if spells overlap)
. egen matched = anycount(mergepanel1- mergepanel17), values(3)  

. br ${pid}  ${begin}  ${end} spell_edu* merge* matched 

. 
. 
. * drop if we have no information on a spell during that month 
. drop if matched == 0
(516,833 observations deleted)

. drop index* mergepanel* 

. 
. 
. * make sure to have no duplicates (not several rows with the same starting month)
. unique(${pid}  ${begin})
Number of unique values of youthid begincm is  553820
Number of records is  553820

. duplicates report  ${pid}  

Duplicates in terms of youthid

--------------------------------------
   Copies | Observations       Surplus
----------+---------------------------
        1 |            1             0
        3 |            3             2
        4 |            4             3
        8 |            8             7
       10 |           10             9
       11 |           11            10
       13 |           13            12
       15 |           15            14
       16 |           16            15
       23 |           23            22
       24 |           48            46
       25 |           50            48
       27 |           27            26
       28 |           28            27
       31 |           31            30
       33 |          132           128
       34 |           68            66
       35 |           70            68
       38 |           76            74
       39 |           39            38
       42 |          126           123
       43 |           86            84
       44 |          220           215
       45 |           45            44
       46 |           92            90
       47 |          141           138
       48 |          240           235
       49 |           49            48
       50 |           50            49
       51 |           51            50
       53 |           53            52
       54 |           54            53
       55 |          220           216
       56 |          224           220
       57 |          342           336
       58 |          406           399
       59 |          708           696
       60 |          540           531
       61 |          793           780
       62 |         1922          1891
       63 |         1953          1922
       64 |         1344          1323
       65 |         2340          2304
       66 |         3564          3510
       67 |         5695          5610
       68 |         4556          4489
       69 |         3243          3196
       70 |         3990          3933
       71 |         4757          4690
       72 |         3168          3124
       73 |         2920          2880
       74 |          666           657
       75 |          525           518
       76 |          304           300
       77 |          154           152
       78 |         1716          1694
       79 |         4108          4056
       80 |         2160          2133
       81 |         2187          2160
       82 |         2870          2835
       83 |         3154          3116
       84 |         2436          2407
       85 |         1445          1428
       86 |          774           765
       87 |          609           602
       88 |          176           174
       89 |          178           176
       90 |         2610          2581
       91 |         6097          6030
       92 |         5428          5369
       93 |         5766          5704
       94 |         3948          3906
       95 |         6365          6298
       96 |         5664          5605
       97 |         3492          3456
       98 |         1078          1067
       99 |          297           294
      100 |          400           396
      101 |          505           500
      102 |         5508          5454
      103 |         9785          9690
      104 |         8112          8034
      105 |         9240          9152
      106 |        11554         11445
      107 |        15087         14946
      108 |        10908         10807
      109 |         7848          7776
      110 |         1760          1744
      111 |          666           660
      112 |          896           888
      113 |          904           896
      114 |        14820         14690
      115 |        34960         34656
      116 |        32944         32660
      117 |        24219         24012
      118 |        25606         25389
      119 |        28917         28674
      120 |        21840         21658
      121 |        14399         14280
      122 |         3172          3146
      123 |          615           610
      124 |          372           369
      125 |         1125          1116
      126 |         4284          4250
      127 |         9398          9324
      128 |        12160         12065
      129 |        10191         10112
      130 |        13520         13416
      131 |        21877         21710
      132 |        14256         14148
      133 |         8246          8184
      134 |         2144          2128
      135 |          135           134
      136 |          408           405
      138 |         1380          1370
      139 |         2085          2070
      140 |         2380          2363
      141 |         3102          3080
      142 |         4686          4653
      143 |         5863          5822
      144 |         6192          6149
      145 |         2610          2592
      146 |          292           290
      148 |          296           294
      151 |          906           900
      152 |         1064          1057
      153 |          306           304
      154 |         1386          1377
      155 |         1705          1694
      156 |         1716          1705
      157 |          942           936
      162 |         1458          1449
      163 |         2934          2916
      164 |         1148          1141
      165 |         1650          1640
      166 |         1494          1485
      167 |         1670          1660
      168 |         2016          2004
      169 |         1521          1512
      171 |          171           170
      172 |          172           171
      173 |          173           172
      174 |          348           346
      175 |          525           522
      176 |         1056          1050
      177 |          708           704
      178 |         1424          1416
      179 |         1790          1780
      180 |         1080          1074
      181 |          362           360
      187 |          374           372
      188 |          564           561
      189 |          567           564
      190 |          190           189
      191 |          573           570
      192 |          192           191
      197 |          394           392
      198 |          594           591
      208 |          208           207
--------------------------------------

. 
. 
. * Add some time variables (for the year and months of spell) 
. clonevar dm = ${begin}  
(8 missing values generated)

. * to year and month data 
. format %tm dm

. format dm %10.0g

. gen date = dofm(dm)
(8 missing values generated)

. 
. format date %d

. gen month=month(date)
(8 missing values generated)

. gen yr=year(date)
(8 missing values generated)

. 
. 
. drop date

. rename dm date 

. format %tm date

. 
. 
. * Add some time variables (for the year and months of birthday) 
. egen birthmax = max(birthcm), by(${pid})
(2,913 missing values generated)

. drop birthcm 

. rename birthmax birthcm 

. 
. clonevar  dm = birthcm 
(2,913 missing values generated)

. * to year and month data 
. format %tm dm

. format dm %10.0g

. gen birthdate = dofm(dm)
(2,913 missing values generated)

. 
. format birthdate %d

. gen birthmonth=month(birthdate)
(2,913 missing values generated)

. gen birthyr=year(birthdate)
(2,913 missing values generated)

. 
. drop birthdate

. rename dm birthdate 

. format %tm birthdate

. 
. 
. * Add information on the age 
. 
. gen agecm = begincm - birthcm
(2,921 missing values generated)

. 
. *age in years with decimals
. gen age = agecm/12 
(2,921 missing values generated)

. gen dismonth= age- (yr- birthyr)
(2,921 missing values generated)

. replace dismonth = age+1 - (yr- birthyr) if month < birthmonth //for people where the calculation above doesn't work because the months reported is before their birthday in that year 
(253,484 real changes made)

. gen dismonth_new = dismonth*12
(2,921 missing values generated)

. 
. *age in months (rounded)
. gen age_month = round(dismonth_new ,0.01)
(2,921 missing values generated)

. 
. *age in years (full numbers)
. gen age_year = age - dismonth 
(2,921 missing values generated)

. 
. 
. drop dismonth* 

. 
. 
. order ${pid}  ${begin}  ${end}  spell_edu* matched date yr month birthcm birthd* birthy* birthm* agecm age age_y* age_m* 

. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
end of do-file

. 
end of do-file

